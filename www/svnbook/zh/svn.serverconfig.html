<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>&#31532;&nbsp;6&nbsp;&#31456;&nbsp;&#26381;&#21153;&#37197;&#32622;</title>
      <meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
      <link rel="start" href="index.html" title="Subversion &#26435;&#23041;&#25351;&#21335;">
      <link rel="up" href="index.html" title="Subversion &#26435;&#23041;&#25351;&#21335;">
      <link rel="prev" href="svn.reposadmin.html" title="&#31532;&nbsp;5&nbsp;&#31456;&nbsp;&#29256;&#26412;&#24211;&#31649;&#29702;">
      <link rel="next" href="svn.customization.html" title="&#31532;&nbsp;7&nbsp;&#31456;&nbsp;&#23450;&#21046;&#20320;&#30340; Subversion &#20307;&#39564;">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">&#31532;&nbsp;6&nbsp;&#31456;&nbsp;&#26381;&#21153;&#37197;&#32622;</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="svn.reposadmin.html">&#19978;&#19968;&#39029;</a>&nbsp;
               </td>
               <th width="60%" align="center">&nbsp;</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="svn.customization.html">&#19979;&#19968;&#39029;</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="chapter" lang="zh-cn">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title"><a name="svn.serverconfig"></a>&#31532;&nbsp;6&nbsp;&#31456;&nbsp;&#26381;&#21153;&#37197;&#32622;
                  </h2>
               </div>
            </div>
         </div>
         <div class="toc">
            <p><b>&#30446;&#24405;</b></p>
            <dl>
               <dt><span class="sect1"><a href="svn.serverconfig.html#svn.serverconfig.overview">6.1. &#27010;&#36848;</a></span></dt>
               <dt><span class="sect1"><a href="svn.serverconfig.html#svn.serverconfig.choosing">6.2. &#36873;&#25321;&#19968;&#20010;&#26381;&#21153;&#22120;&#37197;&#32622;</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="sect2"><a href="svn.serverconfig.html#svn.serverconfig.choosing.svnserve">6.2.1. svnserve &#26381;&#21153;&#22120;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.serverconfig.html#svn.serverconfig.choosing.svn-ssh">6.2.2. &#31359;&#36234; SSH &#38567;&#36947;&#30340; svnserve &#26381;&#21153;&#22120;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.serverconfig.html#svn.serverconfig.choosing.apache">6.2.3. Apache &#30340; HTTP &#26381;&#21153;&#22120;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.serverconfig.html#svn.serverconfig.choosing.recommendations">6.2.4. &#25512;&#33616;</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="sect1"><a href="svn.serverconfig.html#svn.serverconfig.svnserve">6.3. svnserve - &#23450;&#21046;&#30340;&#26381;&#21153;&#22120; </a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="sect2"><a href="svn.serverconfig.html#svn.serverconfig.svnserve.invoking">6.3.1. &#35843;&#29992;&#26381;&#21153;&#22120;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.serverconfig.html#svn.serverconfig.svnserve.auth">6.3.2. &#20869;&#32622;&#30340;&#35748;&#35777;&#21644;&#25480;&#26435;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.serverconfig.html#svn.serverconfig.svnserve.sasl">6.3.3. &#35753; svnserve &#20351;&#29992; SASL</a></span></dt>
                     <dt><span class="sect2"><a href="svn.serverconfig.html#svn.serverconfig.svnserve.sshauth">6.3.4. &#31359;&#36234; SSH &#38567;&#36947;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.serverconfig.html#svn.serverconfig.svnserve.sshtricks">6.3.5. SSH &#37197;&#32622;&#25216;&#24039;</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="sect1"><a href="svn.serverconfig.html#svn.serverconfig.httpd">6.4. httpd - Apache &#30340; HTTP &#26381;&#21153;&#22120;</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="sect2"><a href="svn.serverconfig.html#svn.serverconfig.httpd.prereqs">6.4.1. &#20808;&#20915;&#26465;&#20214;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.serverconfig.html#svn.serverconfig.httpd.basic">6.4.2. &#22522;&#26412;&#30340; Apache &#37197;&#32622;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.serverconfig.html#svn.serverconfig.httpd.authn">6.4.3. &#35748;&#35777;&#36873;&#39033;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.serverconfig.html#svn.serverconfig.httpd.authz">6.4.4. &#25480;&#26435;&#36873;&#39033;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.serverconfig.html#svn.serverconfig.httpd.extra">6.4.5. &#39069;&#22806;&#30340;&#31958;&#26524;</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="sect1"><a href="svn.serverconfig.html#svn.serverconfig.pathbasedauthz">6.5. &#22522;&#20110;&#36335;&#24452;&#30340;&#25480;&#26435;</a></span></dt>
               <dt><span class="sect1"><a href="svn.serverconfig.html#svn.serverconfig.multimethod">6.6. &#25903;&#25345;&#22810;&#31181;&#29256;&#26412;&#24211;&#35775;&#38382;&#26041;&#27861;</a></span></dt>
            </dl>
         </div>
         <p>&#19968;&#20010;Subversion&#30340;&#29256;&#26412;&#24211;&#21487;&#20197;&#21644;&#23458;&#25143;&#31471;&#21516;&#26102;&#36816;&#34892;&#22312;&#21516;&#19968;&#20010;&#26426;&#22120;&#19978;&#65292;&#20351;&#29992;<code class="literal">file:///</code>&#35775;&#38382;&#65292;&#20294;&#26159;&#19968;&#20010;&#20856;&#22411;&#30340;Subversion&#35774;&#32622;&#24212;&#35813;&#21253;&#25324;&#19968;&#20010;&#21333;&#29420;&#30340;&#26381;&#21153;&#22120;&#65292;&#21487;&#20197;&#34987;&#21150;&#20844;&#23460;&#30340;&#25152;&#26377;&#23458;&#25143;&#31471;&#35775;&#38382;&#8212;&#25110;&#32773;&#26377;&#21487;&#33021;&#26159;&#25972;&#20010;&#19990;&#30028;&#12290;
         </p>
         <p>This chapter describes how to get your Subversion repository
                exposed outside its host machine for use by remote clients.  We
                will cover Subversion's currently available server mechanisms,
                discussing the configuration and use of each.  After reading this
                chapter, you should be able to decide which networking setup is
                right for your needs, as well as understand how to enable such a
                setup on your host computer.
         </p>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.serverconfig.overview"></a>6.1.&nbsp;&#27010;&#36848;
                     </h2>
                  </div>
               </div>
            </div>
            <p>Subversion&#30340;&#35774;&#35745;&#21253;&#25324;&#19968;&#20010;&#25277;&#35937;&#30340;&#32593;&#32476;&#23618;&#65292;&#36825;&#24847;&#21619;&#30528;&#29256;&#26412;&#24211;&#21487;&#20197;&#36890;&#36807;&#21508;&#31181;&#26381;&#21153;&#22120;&#36827;&#31243;&#35775;&#38382;&#65292;&#32780;&#19988;&#23458;&#25143;&#31471;&#8220;<span class="quote">&#29256;&#26412;&#24211;&#35775;&#38382;</span>&#8221;&#30340;API&#20801;&#35768;&#31243;&#24207;&#21592;&#20889;&#20986;&#30456;&#20851;&#21327;&#35758;&#30340;&#25554;&#20214;&#65292;&#29702;&#35770;&#19978;&#35762;&#65292;Subversion&#21487;&#20197;&#20351;&#29992;&#26080;&#38480;&#25968;&#37327;&#30340;&#32593;&#32476;&#21327;&#35758;&#23454;&#29616;&#65292;&#30446;&#21069;&#23454;&#36341;&#20013;&#21482;&#26377;&#20004;&#31181;&#26381;&#21153;&#22120;&#12290;
            </p>
            <p>Apache&#26159;&#26368;&#27969;&#34892;&#30340;web&#26381;&#21153;&#22120;&#65292;&#36890;&#36807;&#20351;&#29992;<span class="command"><strong>mod_dav_svn</strong></span>&#27169;&#22359;&#65292;Apache&#21487;&#20197;&#35775;&#38382;&#29256;&#26412;&#24211;&#65292;&#24182;&#19988;&#21487;&#20197;&#20351;&#23458;&#25143;&#31471;&#20351;&#29992;HTTP&#30340;&#25193;&#23637;&#21327;&#35758;WebDAV/DeltaV&#36827;&#34892;&#35775;&#38382;&#65292;&#22240;&#20026;Apache&#26159;&#19968;&#20010;&#38750;&#24120;&#26131;&#20110;&#25193;&#23637;&#30340;web&#26381;&#21153;&#22120;&#65292;&#23427;&#25552;&#20379;&#20102;&#35768;&#22810;&#8220;<span class="quote">&#26131;&#20110;&#33719;&#21462;&#30340;</span>&#8221;&#29305;&#24615;&#65292;&#20363;&#22914;&#21152;&#23494;&#30340;SSL&#36890;&#35759;&#65292;&#26085;&#24535;&#21644;&#19982;&#31532;&#19977;&#26041;&#24037;&#20855;&#30340;&#38598;&#25104;&#65292;&#20197;&#21450;&#20869;&#32622;&#30340;&#29256;&#26412;&#24211;web&#27983;&#35272;&#21151;&#33021;&#12290;
            </p>
            <p>&#22312;&#21478;&#19968;&#20010;&#35282;&#33853;&#26159;<span class="command"><strong>svnserve</strong></span>&#65306;&#19968;&#20010;&#26356;&#23567;&#65292;&#36731;&#22411;&#30340;&#26381;&#21153;&#22120;&#31243;&#24207;&#65292;&#21516;&#23458;&#25143;&#31471;&#20351;&#29992;&#33258;&#23450;&#20041;&#30340;&#21327;&#35758;&#12290;&#22240;&#20026;&#21327;&#35758;&#26159;&#20026;Subversion&#19987;&#38376;&#35774;&#35745;&#30340;&#65292;&#24182;&#19988;&#26159;&#26377;&#29366;&#24577;&#30340;(&#19981;&#20687;HTTP)&#65292;&#23427;&#25552;&#20379;&#20102;&#26356;&#24555;&#30340;&#32593;&#32476;&#25805;&#20316;&#8212;&#20294;&#20063;&#26377;&#19968;&#20123;&#20195;&#20215;&#12290;&#23427;&#21482;&#29702;&#35299;CRAM-MD5&#30340;&#35748;&#35777;&#65292;&#28982;&#32780;&#23427;&#38750;&#24120;&#26131;&#20110;&#37197;&#32622;&#65292;&#26159;&#24320;&#22987;&#20351;&#29992;Subversion&#30340;&#23567;&#22242;&#38431;&#30340;&#26368;&#20339;&#36873;&#25321;&#12290;
            </p>
            <p>A third option is to use <span class="command"><strong>svnserve</strong></span>
                     tunneled over an SSH connection.  Even though this scenario
                     still uses <span class="command"><strong>svnserve</strong></span>, it differs quite a bit
                     in features from a traditional <span class="command"><strong>svnserve</strong></span>
                     deployment.  SSH is used to encrypt all communication.  SSH is
                     also used exclusively to authenticate, so real system accounts
                     are required on the server host (unlike
                     vanilla <span class="command"><strong>svnserve</strong></span>, which has its own private
                     user accounts).  Finally, because this setup requires that each
                     user spawn a private, temporary <span class="command"><strong>svnserve</strong></span>
                     process, it's equivalent (from a permissions point of view) to
                     allowing a group of local users to all access the repository
                     via <code class="literal">file://</code> URLs. Path-based access control
                     has no meaning, since each user is accessing the repository
                     database files directly.
            </p>
            <p><a class="xref" href="svn.serverconfig.html#svn.serverconfig.overview.tbl-1" title="&#34920;&nbsp;6.1.&nbsp;Subversion &#26381;&#21153;&#22120;&#36873;&#39033;&#27604;&#36739;">&#34920;&nbsp;6.1 &#8220;Subversion &#26381;&#21153;&#22120;&#36873;&#39033;&#27604;&#36739;&#8221;</a>&#26159;&#19977;&#31181;&#20856;&#22411;&#26381;&#21153;&#22120;&#37096;&#32626;&#30340;&#24635;&#32467;&#12290;
            </p>
            <div class="table"><a name="svn.serverconfig.overview.tbl-1"></a><p class="title"><b>&#34920;&nbsp;6.1.&nbsp;Subversion &#26381;&#21153;&#22120;&#36873;&#39033;&#27604;&#36739;</b></p>
               <div class="table-contents">
                  <table summary="Subversion &#26381;&#21153;&#22120;&#36873;&#39033;&#27604;&#36739;" border="1">
                     <colgroup>
                        <col width="25%">
                        <col width="25%">
                        <col width="25%">
                        <col width="25%">
                     </colgroup>
                     <thead>
                        <tr>
                           <th>&#29305;&#24615;</th>
                           <th>Apache + mod_dav_svn</th>
                           <th>svnserve</th>
                           <th>&#31359;&#36234; SSH &#38567;&#36947;&#30340; svnserve &#26381;&#21153;&#22120;</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td>&#35748;&#35777;&#36873;&#39033;</td>
                           <td>HTTP(S) &#22522;&#26412;&#35748;&#35777;&#12289;X.509 &#35777;&#20070;&#12289;LDAP&#12289;NTLM &#25110;&#20219;&#20309; Apache httpd &#24050;&#32463;&#20855;&#22791;&#30340;&#26041;&#24335;</td>
                           <td>&#32570;&#30465;&#26159; CRAM-MD5&#65307;LDAP&#12289;NTLM &#25110;&#20219;&#20309; SASL &#25903;&#25345;&#30340;&#26426;&#21046;&#12290;</td>
                           <td>SSH</td>
                        </tr>
                        <tr>
                           <td>&#29992;&#25143;&#24080;&#21495;&#36873;&#39033;</td>
                           <td>&#31169;&#26377; &#8220;users&#8221; &#25991;&#20214;&#65292;&#25110;&#20854;&#23427; Apache httpd(LDAP&#65292;SQL &#31561;)&#25903;&#25345;&#30340;&#26426;&#21046;</td>
                           <td>&#31169;&#26377; &#8220;users&#8221; &#25991;&#20214;&#65292;&#25110;&#20854;&#23427; SASL(LDAP&#65292;SQL &#31561;)&#25903;&#25345;&#30340;&#26426;&#21046;</td>
                           <td>&#31995;&#32479;&#24080;&#21495;</td>
                        </tr>
                        <tr>
                           <td>&#25480;&#26435;&#36873;&#39033;</td>
                           <td>&#21487;&#20197;&#25480;&#20104;&#25972;&#20010;&#29256;&#26412;&#24211;&#30340;&#35835;/&#20889;&#26435;&#38480;&#65292;&#20063;&#21487;&#20197;&#20026;&#27599;&#20010;&#36335;&#24452;&#25351;&#23450;</td>
                           <td>&#21487;&#20197;&#25480;&#20104;&#25972;&#20010;&#29256;&#26412;&#24211;&#30340;&#35835;/&#20889;&#26435;&#38480;&#65292;&#20063;&#21487;&#20197;&#20026;&#27599;&#20010;&#36335;&#24452;&#25351;&#23450;</td>
                           <td>&#21482;&#33021;&#23545;&#25972;&#20010;&#29256;&#26412;&#24211;&#25480;&#20104;&#35835;/&#20889;&#26435;&#38480;</td>
                        </tr>
                        <tr>
                           <td>&#21152;&#23494;</td>
                           <td>&#36890;&#36807;&#21487;&#36873;&#30340; SSL</td>
                           <td>&#36890;&#36807;&#21487;&#36873;&#30340; SASL &#29305;&#24615;</td>
                           <td>&#32487;&#25215; SSH &#36830;&#25509;</td>
                        </tr>
                        <tr>
                           <td>&#26085;&#24535;</td>
                           <td>&#23545;&#27599;&#20010; HTTP &#35831;&#27714;&#35760;&#24405;&#23436;&#20840;&#30340; Apache &#26085;&#24535;&#65292;&#36890;&#36807;&#21487;&#36873;&#30340;&#8220;<span class="quote">&#39640;&#32423;</span>&#8221;&#35760;&#24405;&#26222;&#36890;&#30340;&#23458;&#25143;&#31471;&#25805;&#20316;
                           </td>
                           <td>&#26080;&#26085;&#24535;</td>
                           <td>&#26080;&#26085;&#24535;</td>
                        </tr>
                        <tr>
                           <td>&#20132;&#20114;&#24615;</td>
                           <td>&#21487;&#20197;&#34987;&#20854;&#23427; WebDAV &#23458;&#25143;&#31471;&#35775;&#38382;</td>
                           <td>&#21482;&#21516; svn &#23458;&#25143;&#31471;&#36890;&#35759;</td>
                           <td>&#21482;&#21516; svn &#23458;&#25143;&#31471;&#36890;&#35759;</td>
                        </tr>
                        <tr>
                           <td>Web &#27983;&#35272;&#33021;&#21147;</td>
                           <td>&#26377;&#38480;&#30340;&#20869;&#32622;&#25903;&#25345;&#65292;&#25110;&#32773;&#36890;&#36807;&#31532;&#19977;&#26041;&#24037;&#20855;&#65292;&#22914; ViewVC</td>
                           <td>&#21482;&#26377;&#36890;&#36807;&#31532;&#19977;&#26041;&#24037;&#20855;&#65292;&#22914; ViewVC</td>
                           <td>&#21482;&#26377;&#36890;&#36807;&#31532;&#19977;&#26041;&#24037;&#20855;&#65292;&#22914; ViewVC</td>
                        </tr>
                        <tr>
                           <td>&#20027;&#20174;&#26381;&#21153;&#22120;&#22797;&#21046;</td>
                           <td>Transparent write-proxying available from slave to master</td>
                           <td>&#21482;&#33021;&#21019;&#24314;&#21482;&#35835;&#20174;&#26381;&#21153;&#22120;</td>
                           <td>&#21482;&#33021;&#21019;&#24314;&#21482;&#35835;&#20174;&#26381;&#21153;&#22120;</td>
                        </tr>
                        <tr>
                           <td>&#36895;&#24230;</td>
                           <td>&#26377;&#20123;&#24930;</td>
                           <td>&#24555;&#19968;&#28857;</td>
                           <td>&#24555;&#19968;&#28857;</td>
                        </tr>
                        <tr>
                           <td>&#21021;&#22987;&#35774;&#32622;</td>
                           <td>&#26377;&#20123;&#22797;&#26434;</td>
                           <td>Extremely simple</td>
                           <td>&#30456;&#23545;&#31616;&#21333;</td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div><br class="table-break"></div>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.serverconfig.choosing"></a>6.2.&nbsp;&#36873;&#25321;&#19968;&#20010;&#26381;&#21153;&#22120;&#37197;&#32622;
                     </h2>
                  </div>
               </div>
            </div>
            <p>&#37027;&#20320;&#24212;&#35813;&#29992;&#20160;&#20040;&#26381;&#21153;&#22120;&#65311;&#20160;&#20040;&#26368;&#22909;&#65311;</p>
            <p>&#26174;&#28982;&#65292;&#23545;&#36825;&#20010;&#38382;&#39064;&#27809;&#26377;&#27491;&#30830;&#30340;&#31572;&#26696;&#12290;&#27599;&#20010;&#22242;&#38431;&#37117;&#26377;&#19981;&#21516;&#30340;&#38656;&#35201;&#65292;&#19981;&#21516;&#30340;&#26381;&#21153;&#22120;&#37117;&#26377;&#21508;&#33258;&#30340;&#20195;&#20215;&#12290;Subversion &#39033;&#30446;&#27809;&#26377;&#26356;&#21152;&#35748;&#21487;&#21738;&#31181;&#26381;&#21153;&#65292;&#25110;&#35748;&#20026;&#21738;&#20010;&#26381;&#21153;&#26356;&#21152;&#8220;<span class="quote">&#27491;&#24335;</span>&#8221;&#19968;&#28857;&#12290;
            </p>
            <p>&#19979;&#38754;&#26159;&#20320;&#36873;&#25321;&#25110;&#32773;&#19981;&#36873;&#25321;&#26576;&#19968;&#20010;&#37096;&#32626;&#26041;&#24335;&#30340;&#21407;&#22240;&#12290;</p>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.serverconfig.choosing.svnserve"></a>6.2.1.&nbsp;svnserve &#26381;&#21153;&#22120;
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="variablelist">
                  <dl>
                     <dt><span class="term">&#20026;&#20160;&#20040;&#20320;&#20250;&#24076;&#26395;&#20351;&#29992;&#23427;&#65306;</span></dt>
                     <dd>
                        <div class="itemizedlist">
                           <ul type="disc">
                              <li>
                                 <p>&#35774;&#32622;&#24555;&#36895;&#31616;&#21333;&#12290;</p>
                              </li>
                              <li>
                                 <p>&#32593;&#32476;&#21327;&#35758;&#26159;&#26377;&#29366;&#24577;&#30340;&#65292;&#27604;WebDAV&#24555;&#24456;&#22810;&#12290;</p>
                              </li>
                              <li>
                                 <p>&#19981;&#38656;&#35201;&#22312;&#26381;&#21153;&#22120;&#21019;&#24314;&#31995;&#32479;&#24080;&#21495;&#12290;</p>
                              </li>
                              <li>
                                 <p>&#19981;&#20250;&#22312;&#32593;&#32476;&#20256;&#36755;&#23494;&#30721;&#12290;</p>
                              </li>
                           </ul>
                        </div>
                     </dd>
                     <dt><span class="term">&#20026;&#20160;&#20040;&#20320;&#20250;&#24076;&#26395;&#36991;&#20813;&#23427;&#65306;</span></dt>
                     <dd>
                        <div class="itemizedlist">
                           <ul type="disc">
                              <li>
                                 <p>By default, only one authentication method
                                                    is available, the network protocol is not encrypted,
                                                    and the server stores clear text passwords.  (All these
                                                    things can be changed by configuring SASL, but it's a
                                                    bit more work to do.)
                                 </p>
                              </li>
                              <li>
                                 <p>&#27809;&#26377;&#20219;&#20309;&#31867;&#22411;&#30340;&#26085;&#24535;&#65292;&#29978;&#33267;&#26159;&#38169;&#35823;&#12290;</p>
                              </li>
                              <li>
                                 <p>No built-in web browsing.  (You'd have to
                                                    install a separate web server and repository browsing software to
                                                    add this.)
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.serverconfig.choosing.svn-ssh"></a>6.2.2.&nbsp;&#31359;&#36234; SSH &#38567;&#36947;&#30340; svnserve &#26381;&#21153;&#22120;
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="variablelist">
                  <dl>
                     <dt><span class="term">&#20026;&#20160;&#20040;&#20320;&#20250;&#24076;&#26395;&#20351;&#29992;&#23427;&#65306;</span></dt>
                     <dd>
                        <div class="itemizedlist">
                           <ul type="disc">
                              <li>
                                 <p>The network protocol is stateful and
                                                    noticeably faster than WebDAV.
                                 </p>
                              </li>
                              <li>
                                 <p>&#20320;&#21487;&#20197;&#21033;&#29992;&#29616;&#26377;&#30340;SSH&#24080;&#21495;&#21644;&#29992;&#25143;&#22522;&#30784;&#12290;</p>
                              </li>
                              <li>
                                 <p>&#25152;&#26377;&#32593;&#32476;&#20256;&#36755;&#26159;&#21152;&#23494;&#30340;&#12290;</p>
                              </li>
                           </ul>
                        </div>
                     </dd>
                     <dt><span class="term">&#20026;&#20160;&#20040;&#20320;&#20250;&#24076;&#26395;&#36991;&#20813;&#23427;&#65306;</span></dt>
                     <dd>
                        <div class="itemizedlist">
                           <ul type="disc">
                              <li>
                                 <p>Only one choice of authentication
                                                    method is available.
                                 </p>
                              </li>
                              <li>
                                 <p>There is no logging of any kind, not even
                                                    errors.
                                 </p>
                              </li>
                              <li>
                                 <p>It requires users to be in the same system group, or
                                                    use a shared SSH key.
                                 </p>
                              </li>
                              <li>
                                 <p>If used improperly, it can lead to file permission
                                                    problems.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.serverconfig.choosing.apache"></a>6.2.3.&nbsp;Apache &#30340; HTTP &#26381;&#21153;&#22120;
                        </h3>
                     </div>
                  </div>
               </div>
               <div class="variablelist">
                  <dl>
                     <dt><span class="term">&#20026;&#20160;&#20040;&#20320;&#20250;&#24076;&#26395;&#20351;&#29992;&#23427;&#65306;</span></dt>
                     <dd>
                        <div class="itemizedlist">
                           <ul type="disc">
                              <li>
                                 <p>It allows Subversion to use any of the
                                                      numerous authentication systems already integrated
                                                      with Apache.
                                 </p>
                              </li>
                              <li>
                                 <p>There is no need to create system accounts on
                                                      the server.
                                 </p>
                              </li>
                              <li>
                                 <p>Full Apache logging is available.</p>
                              </li>
                              <li>
                                 <p>&#32593;&#32476;&#20256;&#36755;&#21487;&#20197;&#36890;&#36807;SSL&#21152;&#23494;&#12290;</p>
                              </li>
                              <li>
                                 <p>HTTP(S) &#36890;&#24120;&#21487;&#20197;&#31359;&#36234;&#20844;&#21496;&#38450;&#28779;&#22681;&#12290;</p>
                              </li>
                              <li>
                                 <p>Built-in repository browsing is
                                                      available via web browser.
                                 </p>
                              </li>
                              <li>
                                 <p>The repository can be mounted as a network
                                                      drive for transparent version control (see
                                                      <a class="xref" href="svn.webdav.html#svn.webdav.autoversioning" title="C.2.&nbsp;&#33258;&#21160;&#29256;&#26412;&#21270;">&#31532;&nbsp;C.2&nbsp;&#33410; &#8220;&#33258;&#21160;&#29256;&#26412;&#21270;&#8221;</a>).
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </dd>
                     <dt><span class="term">&#20026;&#20160;&#20040;&#20320;&#20250;&#24076;&#26395;&#36991;&#20813;&#23427;&#65306;</span></dt>
                     <dd>
                        <div class="itemizedlist">
                           <ul type="disc">
                              <li>
                                 <p>&#27604;<span class="command"><strong>svnserve</strong></span>&#24930;&#24456;&#22810;&#65292;&#22240;&#20026;HTTP&#26159;&#26080;&#29366;&#24577;&#30340;&#21327;&#35758;&#65292;&#38656;&#35201;&#26356;&#22810;&#30340;&#20256;&#36882;&#12290;
                                 </p>
                              </li>
                              <li>
                                 <p>&#21021;&#22987;&#35774;&#32622;&#21487;&#33021;&#22797;&#26434;</p>
                              </li>
                           </ul>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.serverconfig.choosing.recommendations"></a>6.2.4.&nbsp;&#25512;&#33616;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>In general, the authors of this book recommend a vanilla
                          <span class="command"><strong>svnserve</strong></span> installation for small teams just
                          trying to get started with a Subversion server; it's the
                          simplest to set up and has the fewest maintenance issues.
                          You can always switch to a more complex server
                          deployment as your needs change.
               </p>
               <p>&#19979;&#38754;&#26159;&#19968;&#20123;&#24120;&#35265;&#30340;&#24314;&#35758;&#21644;&#23567;&#25216;&#24039;&#65292;&#22522;&#20110;&#22810;&#24180;&#23545;&#29992;&#25143;&#30340;&#25903;&#25345;&#65306;</p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>If you're trying to set up the simplest possible
                                       server for your group, a
                                       vanilla <span class="command"><strong>svnserve</strong></span> installation is the
                                       easiest, fastest route.  Note, however, that your
                                       repository data will be transmitted in the clear over the
                                       network.  If your deployment is entirely within your
                                       company's LAN or VPN, this isn't an issue.  If the
                                       repository is exposed to the wide-open Internet, you
                                       might want to make sure that either the repository's
                                       contents aren't sensitive (e.g., it contains only
                                       open source code), or that you go the extra mile in
                                       configuring SASL to encrypt network communications.
                        </p>
                     </li>
                     <li>
                        <p>If you need to integrate with existing legacy identity
                                       systems (LDAP, Active Directory, NTLM, X.509, etc.),
                                       you must use either the Apache-based server
                                       or <span class="command"><strong>svnserve</strong></span> configured with SASL.  If
                                       you absolutely need server-side logs of either server
                                       errors or client activities, an Apache-based server
                                       is your only option.
                        </p>
                     </li>
                     <li>
                        <p>&#22914;&#26524;&#20320;&#24050;&#32463;&#20915;&#23450;&#20351;&#29992;Apache&#25110;<span class="command"><strong>svnserve</strong></span>&#65292;&#24212;&#35813;&#21333;&#29420;&#21019;&#24314;&#19968;&#20010;&#36816;&#34892;&#26381;&#21153;&#22120;&#36827;&#31243;&#30340;<code class="literal">svn</code>&#29992;&#25143;&#65292;&#20063;&#38656;&#35201;&#30830;&#23450;&#29256;&#26412;&#24211;&#30446;&#24405;&#23646;&#20110;<code class="literal">svn</code>&#29992;&#25143;&#12290;&#20174;&#23433;&#20840;&#30340;&#35282;&#24230;&#65292;&#36825;&#26679;&#24456;&#22909;&#30340;&#21033;&#29992;&#20102;&#25805;&#20316;&#31995;&#32479;&#30340;&#25991;&#20214;&#31995;&#32479;&#35768;&#21487;&#20445;&#25252;&#20102;&#29256;&#26412;&#24211;&#25968;&#25454;&#65292;&#21482;&#26377;Subversion&#26381;&#21153;&#36827;&#31243;&#21487;&#20197;&#20462;&#25913;&#20854;&#20869;&#23481;&#12290;
                        </p>
                     </li>
                     <li>
                        <p>If you have an existing infrastructure that is heavily based
                                       on SSH accounts, and if your users already have system
                                       accounts on your server machine, it makes sense to
                                       deploy an <span class="command"><strong>svnserve</strong></span>-over-SSH solution.
                                       Otherwise, we don't widely recommend this option to the
                                       public.  It's generally considered safer to have your
                                       users access the repository via (imaginary) accounts
                                       managed by <span class="command"><strong>svnserve</strong></span> or Apache, rather
                                       than by full-blown system accounts.  If your deep desire
                                       for encrypted communication still draws you to this
                                       option, we recommend using Apache with SSL or
                                       <span class="command"><strong>svnserve</strong></span> with SASL encryption
                                       instead.
                        </p>
                     </li>
                     <li>
                        <p>Do <span class="emphasis"><em>not</em></span> be seduced by the simple
                                       idea of having all of your users access a repository
                                       directly via <code class="literal">file://</code> URLs.  Even if the
                                       repository is readily available to everyone via a network
                                       share, this is a bad idea.  It removes any layers of
                                       protection between the users and the repository: users can
                                       accidentally (or intentionally) corrupt the repository
                                       database, it becomes hard to take the repository offline
                                       for inspection or upgrade, and it can lead to a mess of
                                       file permission problems (see <a class="xref" href="svn.serverconfig.html#svn.serverconfig.multimethod" title="6.6.&nbsp;&#25903;&#25345;&#22810;&#31181;&#29256;&#26412;&#24211;&#35775;&#38382;&#26041;&#27861;">&#31532;&nbsp;6.6&nbsp;&#33410; &#8220;&#25903;&#25345;&#22810;&#31181;&#29256;&#26412;&#24211;&#35775;&#38382;&#26041;&#27861;&#8221;</a>).  Note that this
                                       is also one of the reasons we warn against accessing
                                       repositories via <code class="literal">svn+ssh://</code>
                                       URLs&#8212;from a security standpoint, it's effectively
                                       the same as local users accessing via
                                       <code class="literal">file://</code>, and it can entail all the same
                                       problems if the administrator isn't careful.
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.serverconfig.svnserve"></a>6.3.&nbsp;svnserve - &#23450;&#21046;&#30340;&#26381;&#21153;&#22120; 
                     </h2>
                  </div>
               </div>
            </div>
            <p><span class="command"><strong>svnserve</strong></span>&#26159;&#19968;&#20010;&#36731;&#22411;&#30340;&#26381;&#21153;&#22120;&#65292;&#21487;&#20197;&#21516;&#23458;&#25143;&#31471;&#36890;&#36807;&#22312;TCP/IP&#22522;&#30784;&#19978;&#30340;&#33258;&#23450;&#20041;&#26377;&#29366;&#24577;&#21327;&#35758;&#36890;&#35759;&#65292;&#23458;&#25143;&#31471;&#36890;&#36807;&#20351;&#29992;&#24320;&#22836;&#20026;<code class="literal">svn://</code>&#25110;&#32773;<code class="literal">svn+ssh://</code><span class="command"><strong>svnserve</strong></span>&#30340;URL&#26469;&#35775;&#38382;&#19968;&#20010;<span class="command"><strong>svnserve</strong></span>&#26381;&#21153;&#22120;&#12290;&#36825;&#19968;&#23567;&#33410;&#23558;&#20250;&#35299;&#37322;&#36816;&#34892;<span class="command"><strong>svnserve</strong></span>&#30340;&#19981;&#21516;&#26041;&#24335;&#65292;&#23458;&#25143;&#31471;&#24590;&#26679;&#23454;&#29616;&#26381;&#21153;&#22120;&#30340;&#35748;&#35777;&#65292;&#24590;&#26679;&#37197;&#32622;&#29256;&#26412;&#24211;&#24688;&#24403;&#30340;&#35775;&#38382;&#25511;&#21046;&#12290;
            </p>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.serverconfig.svnserve.invoking"></a>6.3.1.&nbsp;&#35843;&#29992;&#26381;&#21153;&#22120;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#26377;&#35768;&#22810;&#19981;&#21516;&#26041;&#27861;&#36816;&#34892;<span class="command"><strong>svnserve</strong></span>&#65306;
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>&#20316;&#20026;&#19968;&#20010;&#29420;&#31435;&#23432;&#25252;&#36827;&#31243;&#21551;&#21160;<span class="command"><strong>svnserve</strong></span>&#65292;&#30417;&#21548;&#35831;&#27714;&#12290;
                        </p>
                     </li>
                     <li>
                        <p>&#24403;&#29305;&#23450;&#31471;&#21475;&#25910;&#21040;&#19968;&#20010;&#35831;&#27714;&#65292;&#23601;&#20250;&#20351;UNIX&#30340;<span class="command"><strong>inetd</strong></span>&#23432;&#25252;&#36827;&#31243;&#20020;&#26102;&#35843;&#29992;<span class="command"><strong>svnserve</strong></span>&#22788;&#29702;&#12290;
                        </p>
                     </li>
                     <li>
                        <p>&#20351;&#29992;SSH&#22312;&#21152;&#23494;&#36890;&#36947;&#21457;&#36215;&#20020;&#26102;<span class="command"><strong>svnserve</strong></span>&#26381;&#21153;&#12290;
                        </p>
                     </li>
                     <li>
                        <p>&#20197;Windows service&#26381;&#21153;&#26041;&#24335;&#36816;&#34892;<span class="command"><strong>svnserve</strong></span>&#12290;
                        </p>
                     </li>
                  </ul>
               </div>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.svnserve.invoking.daemon"></a>6.3.1.1.&nbsp;svnserve &#19982;&#23432;&#25252;&#36827;&#31243;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>&#20351;&#29992;<span class="command"><strong>svnserve</strong></span>&#26368;&#31616;&#21333;&#30340;&#26041;&#24335;&#26159;&#20316;&#20026;&#29420;&#31435;&#8220;<span class="quote">&#23432;&#25252;</span>&#8221;&#36827;&#31243;&#36816;&#34892;&#65292;&#20351;&#29992;<code class="option">-d</code>&#36873;&#39033;&#65306;
                  </p><pre class="screen">
$ svnserve -d
$               # svnserve is now running, listening on port 3690
</pre><p>When running <span class="command"><strong>svnserve</strong></span> in daemon mode,
                               you can use the <code class="option">--listen-port</code> and
                               <code class="option">--listen-host</code> options to customize the
                               exact port and hostname to &#8220;<span class="quote">bind</span>&#8221; to.
                  </p>
                  <p>Once we successfully start <span class="command"><strong>svnserve</strong></span> as
                             explained previously, it makes every repository on your system
                             available to the network.  A client needs to specify an
                             <span class="emphasis"><em>absolute</em></span> path in the repository URL.  For
                             example, if a repository is located at
                             <code class="filename">/var/svn/project1</code>, a client would
                             reach it via
                             <code class="uri">svn://host.example.com/var/svn/project1</code>.  To
                             increase security, you can pass the <code class="option">-r</code> option
                             to <span class="command"><strong>svnserve</strong></span>, which restricts it to
                             exporting only repositories below that path.  For
                             example:
                  </p><pre class="screen">
$ svnserve -d -r /var/svn
&#8230;
</pre><p>&#20351;&#29992;<code class="option">-r</code>&#21487;&#20197;&#26377;&#25928;&#22320;&#25913;&#21464;&#25991;&#20214;&#31995;&#32479;&#30340;&#26681;&#20301;&#32622;&#65292;&#23458;&#25143;&#31471;&#21487;&#20197;&#20351;&#29992;&#21435;&#25481;&#21069;&#21322;&#37096;&#20998;&#30340;&#36335;&#24452;&#65292;&#30041;&#19979;&#30340;&#35201;&#30701;&#19968;&#20123;&#30340;(&#26356;&#21152;&#26377;&#25552;&#31034;&#24615;)URL&#65306;
                  </p><pre class="screen">
$ svn checkout svn://host.example.com/project1
&#8230;
</pre></div>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.svnserve.invoking.inetd"></a>6.3.1.2.&nbsp;&#36890;&#36807; inetd &#35843;&#29992; svnserve
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>If you want <span class="command"><strong>inetd</strong></span> to launch the
                               process, you need to pass the <code class="option">-i</code>
                               (<code class="option">--inetd</code>) option.  In the following
                               example, we've shown the output from running
                               <code class="literal">svnserve -i</code> at the command line, but note
                               that this isn't how you actually start the daemon; see the
                               paragraphs following the example for how to configure
                               <span class="command"><strong>inetd</strong></span> to start
                               <span class="command"><strong>svnserve</strong></span>.
                  </p><pre class="screen">
$ svnserve -i
( success ( 1 2 ( ANONYMOUS ) ( edit-pipeline ) ) )
</pre><p>When invoked with the <code class="option">--inetd</code> option,
                             <span class="command"><strong>svnserve</strong></span> attempts to speak with a
                             Subversion client via <code class="filename">stdin</code> and
                             <code class="filename">stdout</code> using a custom protocol.  This is
                             the standard behavior for a program being run via
                             <span class="command"><strong>inetd</strong></span>.  The IANA has reserved port 3690 for
                             the Subversion protocol, so on a Unix-like system you can add
                             lines to <code class="filename">/etc/services</code> such as these (if
                             they don't already exist):
                  </p><pre class="screen">
svn           3690/tcp   # Subversion
svn           3690/udp   # Subversion
</pre><p>&#22914;&#26524;&#31995;&#32479;&#26159;&#20351;&#29992;&#32463;&#20856;&#30340;&#31867;Unix&#30340;<span class="command"><strong>inetd</strong></span>&#23432;&#25252;&#36827;&#31243;&#65292;&#20320;&#21487;&#20197;&#22312;<code class="filename">/etc/inetd.conf</code>&#28155;&#21152;&#36825;&#20960;&#34892;&#65306;
                  </p><pre class="screen">
svn stream tcp nowait svnowner /usr/bin/svnserve svnserve -i
</pre><p>&#30830;&#23450;&#8220;<span class="quote">svnowner</span>&#8221;&#29992;&#25143;&#25317;&#26377;&#35775;&#38382;&#29256;&#26412;&#24211;&#30340;&#36866;&#24403;&#26435;&#38480;&#65292;&#29616;&#22312;&#22914;&#26524;&#19968;&#20010;&#23458;&#25143;&#36830;&#25509;&#26469;&#21040;&#20320;&#30340;&#26381;&#21153;&#22120;&#30340;&#31471;&#21475;3690&#65292;<span class="command"><strong>inetd</strong></span>&#20250;&#20135;&#29983;&#19968;&#20010;<span class="command"><strong>svnserve</strong></span>&#36827;&#31243;&#26469;&#20570;&#26381;&#21153;&#12290;&#24403;&#28982;&#65292;&#20320;&#20063;&#21487;&#20197;&#28155;&#21152;<code class="option">-r</code>&#21040;&#21629;&#20196;&#34892;&#65292;&#38480;&#21046;&#26292;&#38706;&#20986;&#30340;&#29256;&#26412;&#24211;&#12290;
                  </p>
               </div>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.svnserve.invoking.tunnel"></a>6.3.1.3.&nbsp;&#36890;&#36807;&#38567;&#36947;&#35843;&#29992; svnserve
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>A third way to invoke <span class="command"><strong>svnserve</strong></span> is in
                               tunnel mode, using the <code class="option">-t</code> option.  This
                               mode assumes that a remote-service program such as
                               <span class="command"><strong>rsh</strong></span> or <span class="command"><strong>ssh</strong></span> has
                               successfully authenticated a user and is now invoking a
                               private <span class="command"><strong>svnserve</strong></span> process <span class="emphasis"><em>as
                                     that user</em></span>.  (Note that you, the user, will
                               rarely, if ever, have reason to invoke
                               <span class="command"><strong>svnserve</strong></span> with the <code class="option">-t</code> at
                               the command line; instead, the SSH daemon
                               does so for you.)  The <span class="command"><strong>svnserve</strong></span> program
                               behaves normally (communicating via
                               <code class="filename">stdin</code> and <code class="filename">stdout</code>)
                               and assumes that the traffic is being automatically
                               redirected over some sort of tunnel back to the client.
                               When <span class="command"><strong>svnserve</strong></span> is invoked by a tunnel
                               agent like this, be sure that the authenticated user has
                               full read and write access to the repository database files.
                               It's essentially the same as a local user accessing the
                               repository via <code class="literal">file://</code> URLs.
                  </p>
                  <p>&#36825;&#20010;&#36873;&#39033;&#23558;&#22312;<a class="xref" href="svn.serverconfig.html#svn.serverconfig.svnserve.sshauth" title="6.3.4.&nbsp;&#31359;&#36234; SSH &#38567;&#36947;">&#31532;&nbsp;6.3.4&nbsp;&#33410; &#8220;&#31359;&#36234; SSH &#38567;&#36947;&#8221;</a>&#35814;&#32454;&#35752;&#35770;&#12290;
                  </p>
               </div>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.svnserve.invoking.winservice"></a>6.3.1.4.&nbsp;svnserve &#19982; Windows &#26381;&#21153;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>If your Windows system is a descendant of Windows NT
                               (2000, 2003, XP, or Vista), you can
                               run <span class="command"><strong>svnserve</strong></span> as a standard Windows
                               service.  This is typically a much nicer experience than
                               running it as a standalone daemon with the <code class="option">--daemon
                                  (-d)</code> option.  Using daemon mode requires launching
                               a console, typing a command, and then leaving the console
                               window running indefinitely.  A Windows service, however,
                               runs in the background, can start at boot time
                               automatically, and can be started and stopped using the same
                               consistent administration interface as other
                               Windows services. 
                  </p>
                  <p>&#20320;&#38656;&#35201;&#20351;&#29992;&#21629;&#20196;&#34892;&#24037;&#20855;<span class="command"><strong>SC.EXE</strong></span>&#23450;&#20041;&#26032;&#30340;&#26381;&#21153;&#65292;&#23601;&#20687;<span class="command"><strong>inetd</strong></span>&#30340;&#37197;&#32622;&#34892;&#65292;&#20320;&#24517;&#39035;&#22312;Windows&#21551;&#21160;&#26102;&#25351;&#26126;<span class="command"><strong>svnserve</strong></span>&#30340;&#35843;&#29992;&#65306;
                  </p><pre class="screen">
C:\&gt; sc create svn
        binpath= "C:\svn\bin\svnserve.exe --service -r C:\repos"
        displayname= "Subversion Server"
        depend= Tcpip
        start= auto
</pre><p>&#36825;&#26679;&#23450;&#20041;&#20102;&#19968;&#20010;&#26032;&#30340;Windows&#26381;&#21153;&#65292;&#21483;&#20570;&#8220;<span class="quote">svn</span>&#8221;&#65292;&#20250;&#22312;&#21551;&#21160;&#26102;(&#22312;&#36825;&#20010;&#20363;&#23376;&#37324;&#65292;&#26681;&#30446;&#24405;&#26159;<code class="filename">C:\repos</code>&#12290;)&#25191;&#34892;&#29305;&#23450;&#30340;<span class="command"><strong>svnserve.exe</strong></span>&#65292;&#21487;&#26159;&#21069;&#38754;&#36825;&#20010;&#20363;&#23376;&#20135;&#29983;&#20102;&#19968;&#20123;&#38169;&#35823;&#12290;
                  </p>
                  <p>First, notice that the <span class="command"><strong>svnserve.exe</strong></span>
                               program must always be invoked with the
                               <code class="option">--service</code> option.  Any other options to
                               <span class="command"><strong>svnserve</strong></span> must then be specified on the
                               same line, but you cannot add conflicting options such as
                               <code class="option">--daemon (-d)</code>, <code class="option">--tunnel</code>,
                               or <code class="option">--inetd (-i)</code>.  Options such as
                               <code class="option">-r</code> or <code class="option">--listen-port</code> are
                               fine, though.  Second, be careful about spaces when invoking
                               the <span class="command"><strong>SC.EXE</strong></span> command: the <code class="literal">key=
                                  value</code> patterns must have no spaces between
                               <code class="literal">key=</code> and must have exactly one space
                               before the <code class="literal">value</code>.  Lastly, be careful
                               about spaces in your command line to be invoked.  If a
                               directory name contains spaces (or other characters that
                               need escaping), place the entire inner value of
                               <code class="literal">binpath</code> in double quotes, by escaping
                               them:
                  </p><pre class="screen">
C:\&gt; sc create svn
        binpath= "\"C:\program files\svn\bin\svnserve.exe\" --service -r C:\repos"
        displayname= "Subversion Server"
        depend= Tcpip
        start= auto
</pre><p>Also note that the word <code class="literal">binpath</code> is
                               misleading&#8212;its value is a <span class="emphasis"><em>command
                                     line</em></span>, not the path to an executable.  That's why
                               you need to surround it with quotes if it contains
                               embedded spaces.
                  </p>
                  <p>&#19968;&#26086;&#23450;&#20041;&#20102;&#26381;&#21153;&#65292;&#23601;&#21487;&#20197;&#20351;&#29992;&#26631;&#20934;GUI&#24037;&#20855;(&#26381;&#21153;&#31649;&#29702;&#25511;&#21046;&#38754;&#26495;)&#36827;&#34892;&#20572;&#27490;&#12289;&#21551;&#21160;&#21644;&#26597;&#35810;&#65292;&#25110;&#32773;&#26159;&#36890;&#36807;&#21629;&#20196;&#34892;&#65306;</p><pre class="screen">
C:\&gt; net stop svn
C:\&gt; net start svn
</pre><p>The service can also be uninstalled (i.e., undefined) by
                               deleting its definition:  <strong class="userinput"><code>sc delete svn</code></strong>.
                               Just be sure to stop the service first!
                               The <span class="command"><strong>SC.EXE</strong></span> program has many other
                               subcommands and options; run <strong class="userinput"><code>sc /?</code></strong> to
                               learn more about it.
                  </p>
               </div>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.serverconfig.svnserve.auth"></a>6.3.2.&nbsp;&#20869;&#32622;&#30340;&#35748;&#35777;&#21644;&#25480;&#26435;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#22914;&#26524;&#19968;&#20010;&#23458;&#25143;&#31471;&#36830;&#25509;&#21040;<span class="command"><strong>svnserve</strong></span>&#36827;&#31243;&#65292;&#22914;&#19979;&#20107;&#24773;&#20250;&#21457;&#29983;&#65306;
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>&#23458;&#25143;&#31471;&#36873;&#25321;&#29305;&#23450;&#30340;&#29256;&#26412;&#24211;&#12290;</p>
                     </li>
                     <li>
                        <p>&#26381;&#21153;&#22120;&#22788;&#29702;&#29256;&#26412;&#24211;&#30340;<code class="filename">conf/svnserve.conf</code>&#25991;&#20214;&#65292;&#24182;&#19988;&#25191;&#34892;&#37324;&#38754;&#23450;&#20041;&#30340;&#25152;&#26377;&#35748;&#35777;&#21644;&#25480;&#26435;&#25919;&#31574;&#12290;
                        </p>
                     </li>
                     <li>
                        <p>Depending on the defined policies, one of the
                                   following may occur:
                        </p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p>&#22914;&#26524;&#27809;&#26377;&#25910;&#21040;&#35748;&#35777;&#35831;&#27714;&#65292;&#23458;&#25143;&#31471;&#21487;&#33021;&#34987;&#20801;&#35768;&#21311;&#21517;&#35775;&#38382;&#12290;</p>
                              </li>
                              <li>
                                 <p>&#23458;&#25143;&#31471;&#21487;&#20197;&#22312;&#20219;&#20309;&#35748;&#35777;&#26102;&#34987;&#35201;&#27714;&#12290;</p>
                              </li>
                              <li>
                                 <p>&#22914;&#26524;&#25805;&#20316;&#22312;&#8220;<span class="quote">&#36890;&#36947;&#27169;&#24335;</span>&#8221;&#65292;&#23458;&#25143;&#31471;&#20250;&#23459;&#24067;&#33258;&#24049;&#24050;&#32463;&#22312;&#22806;&#37096;&#24471;&#21040;&#35748;&#35777;(&#36890;&#24120;&#36890;&#36807;SSH)&#12290;
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ul>
               </div>
               <p><span class="command"><strong>svnserve</strong></span>&#26381;&#21153;&#22120;&#32570;&#30465;&#21482;&#30693;&#36947;&#21457;&#36865;CRAM-MD5<sup>[<a name="d0e11925" href="#ftn.d0e11925" class="footnote">41</a>]</sup>&#35748;&#35777;&#35831;&#27714;&#65292;&#26412;&#36136;&#19978;&#35762;&#65292;&#23601;&#26159;&#26381;&#21153;&#22120;&#21457;&#36865;&#19968;&#20123;&#25968;&#25454;&#21040;&#23458;&#25143;&#31471;&#65292;&#23458;&#25143;&#31471;&#20351;&#29992;MD5&#21704;&#24076;&#31639;&#27861;&#21019;&#24314;&#36825;&#20123;&#25968;&#25454;&#32452;&#21512;&#23494;&#30721;&#30340;&#25351;&#32441;&#65292;&#28982;&#21518;&#36820;&#22238;&#25351;&#32441;&#65292;&#26381;&#21153;&#22120;&#25191;&#34892;&#21516;&#26679;&#30340;&#35745;&#31639;&#24182;&#19988;&#26469;&#35745;&#31639;&#32467;&#26524;&#30340;&#19968;&#33268;&#24615;&#65292;<span class="emphasis"><em>&#30495;&#27491;&#30340;&#23494;&#30721;&#24182;&#27809;&#26377;&#22312;&#20114;&#32852;&#32593;&#19978;&#20256;&#36882;&#12290;</em></span></p>
               <p>If your <span class="command"><strong>svnserve</strong></span> server was built with
                          SASL support, it not only knows how to send CRAM-MD5 challenges,
                          but also likely knows a whole host of other authentication
                          mechanisms.  See <a class="xref" href="svn.serverconfig.html#svn.serverconfig.svnserve.sasl" title="6.3.3.&nbsp;&#35753; svnserve &#20351;&#29992; SASL">&#31532;&nbsp;6.3.3&nbsp;&#33410; &#8220;&#35753; svnserve &#20351;&#29992; SASL&#8221;</a> later in this
                          chapter to learn how to configure SASL authentication and
                          encryption.
               </p>
               <p>It's also possible, of course, for the client to be
                          externally authenticated via a tunnel agent, such as
                          <span class="command"><strong>ssh</strong></span>.  In that case, the server simply
                          examines the user it's running as, and uses this name as the
                          authenticated username.  For more on this, see the later
                          section, <a class="xref" href="svn.serverconfig.html#svn.serverconfig.svnserve.sshauth" title="6.3.4.&nbsp;&#31359;&#36234; SSH &#38567;&#36947;">&#31532;&nbsp;6.3.4&nbsp;&#33410; &#8220;&#31359;&#36234; SSH &#38567;&#36947;&#8221;</a>.
               </p>
               <p>As you've already guessed, a repository's
                          <code class="filename">svnserve.conf</code> file is the central
                          mechanism for controlling authentication and authorization
                          policies.  The file has the same format as other configuration
                          files (see <a class="xref" href="svn.customization.html#svn.advanced.confarea" title="7.1.&nbsp;&#36816;&#34892;&#37197;&#32622;&#21306;">&#31532;&nbsp;7.1&nbsp;&#33410; &#8220;&#36816;&#34892;&#37197;&#32622;&#21306;&#8221;</a>):
                          section names are marked by square brackets
                          (<code class="literal">[</code> and <code class="literal">]</code>), comments
                          begin with hashes (<code class="literal">#</code>), and each section
                          contains specific variables that can be set (<code class="literal">variable
                             = value</code>).  Let's walk through these files and learn
                          how to use them.
               </p>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.svnserve.auth.users"></a>6.3.2.1.&nbsp;&#21019;&#24314;&#19968;&#20010;&#29992;&#25143;&#25991;&#20214;&#21644;&#35748;&#35777;&#22495;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>For now, the <code class="literal">[general]</code> section of
                               <code class="filename">svnserve.conf</code> has all the variables you
                               need.  Begin by changing the values of those variables:
                               choose a name for a file that will contain your usernames
                               and passwords and choose an authentication realm:
                  </p><pre class="screen">
[general]
password-db = userfile
realm = example realm
</pre><p><code class="literal">realm</code>&#26159;&#20320;&#23450;&#20041;&#30340;&#21517;&#31216;&#65292;&#36825;&#21578;&#35785;&#23458;&#25143;&#31471;&#36830;&#25509;&#30340;&#8220;<span class="quote">&#35748;&#35777;&#21629;&#21517;&#31354;&#38388;</span>&#8221;&#65292;Subversion&#20250;&#22312;&#35748;&#35777;&#25552;&#31034;&#37324;&#26174;&#31034;&#65292;&#24182;&#19988;&#20316;&#20026;&#20973;&#35777;&#32531;&#23384;(&#35265;<a class="xref" href="svn.advanced.html#svn.serverconfig.netmodel.credcache" title="3.11.2.&nbsp;&#23458;&#25143;&#31471;&#20973;&#35777;&#32531;&#23384;">&#31532;&nbsp;3.11.2&nbsp;&#33410; &#8220;&#23458;&#25143;&#31471;&#20973;&#35777;&#32531;&#23384;&#8221;</a>&#12290;)&#30340;&#20851;&#38190;&#23383;(&#36824;&#26377;&#26381;&#21153;&#22120;&#30340;&#20027;&#26426;&#21517;&#21644;&#31471;&#21475;)&#65292;<code class="literal">password-db</code>&#21442;&#25968;&#25351;&#20986;&#20102;&#20445;&#23384;&#29992;&#25143;&#21644;&#23494;&#30721;&#21015;&#34920;&#25991;&#20214;&#65292;&#36825;&#20010;&#25991;&#20214;&#20351;&#29992;&#21516;&#26679;&#29087;&#24713;&#30340;&#26684;&#24335;&#65292;&#20030;&#20010;&#20363;&#23376;&#65306;
                  </p><pre class="screen">
[users]
harry = foopassword
sally = barpassword
</pre><p>The value of <code class="literal">password-db</code> can be an
                               absolute or relative path to the users file.  For many
                               admins, it's easy to keep the file right in the
                               <code class="filename">conf/</code> area of the repository, alongside
                               <code class="filename">svnserve.conf</code>.  On the other hand, it's
                               possible you may want to have two or more repositories share
                               the same users file; in that case, the file should probably
                               live in a more public place.  The repositories sharing the
                               users file should also be configured to have the same realm,
                               since the list of users essentially defines an
                               authentication realm.  Wherever the file lives, be sure to
                               set the file's read and write permissions appropriately.  If
                               you know which user(s) <span class="command"><strong>svnserve</strong></span> will run
                               as, restrict read access to the users file as necessary.
                  </p>
               </div>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.svnserve.auth.general"></a>6.3.2.2.&nbsp;&#35774;&#32622;&#35775;&#38382;&#25511;&#21046;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>There are two more variables to set in the
                               <code class="filename">svnserve.conf</code> file: they determine what
                               unauthenticated (anonymous) and authenticated users are
                               allowed to do.  The variables <code class="literal">anon-access</code>
                               and <code class="literal">auth-access</code> can be set to the value
                               <code class="literal">none</code>, <code class="literal">read</code>, or
                               <code class="literal">write</code>.  Setting the value to
                               <code class="literal">none</code> prohibits both reading and writing;
                               <code class="literal">read</code> allows read-only access to the
                               repository, and <code class="literal">write</code> allows complete
                               read/write access to the repository.  For example:
                  </p><pre class="screen">
[general]
password-db = userfile
realm = example realm

# anonymous users can only read the repository
anon-access = read

# authenticated users can both read and write
auth-access = write
</pre><p>&#23454;&#20363;&#20013;&#30340;&#35774;&#32622;&#23454;&#38469;&#19978;&#26159;&#21442;&#25968;&#30340;&#32570;&#30465;&#20540;&#65292;&#20320;&#19968;&#23450;&#19981;&#35201;&#24536;&#20102;&#35774;&#32622;&#23427;&#20204;&#65292;&#22914;&#26524;&#20320;&#24076;&#26395;&#26356;&#20445;&#23432;&#19968;&#28857;&#65292;&#20320;&#21487;&#20197;&#23436;&#20840;&#23553;&#38145;&#21311;&#21517;&#35775;&#38382;&#65306;</p><pre class="screen">
[general]
password-db = userfile
realm = example realm

# anonymous users aren't allowed
anon-access = none

# authenticated users can both read and write
auth-access = write
</pre><p>The server process understands not only
                             these &#8220;<span class="quote">blanket</span>&#8221; access controls to the
                             repository, but also finer-grained access restrictions placed
                             on specific files and directories within the repository.  To
                             make use of this feature, you need to define a file containing
                             more detailed rules, and then set
                             the <code class="literal">authz-db</code> variable to point to it:
                  </p><pre class="screen">
[general]
password-db = userfile
realm = example realm

# Specific access rules for specific locations
authz-db = authzfile
</pre><p>We discuss the syntax of the <code class="filename">authzfile</code> file
                               in detail later in this chapter, in
                               <a class="xref" href="svn.serverconfig.html#svn.serverconfig.pathbasedauthz" title="6.5.&nbsp;&#22522;&#20110;&#36335;&#24452;&#30340;&#25480;&#26435;">&#31532;&nbsp;6.5&nbsp;&#33410; &#8220;&#22522;&#20110;&#36335;&#24452;&#30340;&#25480;&#26435;&#8221;</a>.  Note
                               that the <code class="literal">authz-db</code> variable isn't mutually
                               exclusive with the <code class="literal">anon-access</code>
                               and <code class="literal">auth-access</code> variables;  if all the
                               variables are defined at once, <span class="emphasis"><em>all</em></span>
                               of the rules must be satisfied before access is allowed.
                  </p>
               </div>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.serverconfig.svnserve.sasl"></a>6.3.3.&nbsp;&#35753; svnserve &#20351;&#29992; SASL
                        </h3>
                     </div>
                  </div>
               </div>
               <p>For many teams, the built-in CRAM-MD5 authentication is
                          all they need from <span class="command"><strong>svnserve</strong></span>.  However, if
                          your server (and your Subversion clients) were built with the
                          Cyrus Simple Authentication and Security Layer (SASL) library,
                          you have a number of authentication and encryption
                          options available to you.
               </p>
               <div class="sidebar">
                  <p class="title"><b>&#20160;&#20040;&#26159; SASL&#65311;</b></p>
                  <p>The Cyrus Simple Authentication and Security Layer is
                               open source software written by Carnegie Mellon University.
                               It adds generic authentication and encryption capabilities
                               to any network protocol, and as of Subversion 1.5 and later,
                               both the <span class="command"><strong>svnserve</strong></span> server
                               and <span class="command"><strong>svn</strong></span> client know how to make use of
                               this library.  It may or may not be available to you: if
                               you're building Subversion yourself, you'll need to have at
                               least version 2.1 of SASL installed on your system, and
                               you'll need to make sure that it's detected during
                               Subversion's build process.  If you're using a prebuilt
                               Subversion binary package, you'll have to check with the
                               package maintainer as to whether SASL support was compiled
                               in.  SASL comes with a number of pluggable modules that
                               represent different authentication systems: Kerberos
                               (GSSAPI), NTLM, One-Time-Passwords (OTP), DIGEST-MD5, LDAP,
                               Secure-Remote-Password (SRP), and others.  Certain
                               mechanisms may or may not be available to you; be sure to
                               check which modules are provided.
                  </p>
                  <p>You can download Cyrus SASL (both code and
                               documentation) from
                               <a class="ulink" href="http://asg.web.cmu.edu/sasl/sasl-library.html" target="_top">http://asg.web.cmu.edu/sasl/sasl-library.html</a>.
                  </p>
               </div>
               <p>Normally, when a subversion client connects to
                          <span class="command"><strong>svnserve</strong></span>, the server sends a greeting that
                          advertises a list of the capabilities it supports, and the
                          client responds with a similar list of capabilities.  If the
                          server is configured to require authentication, it then sends
                          a challenge that lists the authentication mechanisms
                          available; the client responds by choosing one of the
                          mechanisms, and then authentication is carried out in some
                          number of round-trip messages.  Even when SASL capabilities
                          aren't present, the client and server inherently know how to
                          use the CRAM-MD5 and ANONYMOUS mechanisms (see
                          <a class="xref" href="svn.serverconfig.html#svn.serverconfig.svnserve.auth" title="6.3.2.&nbsp;&#20869;&#32622;&#30340;&#35748;&#35777;&#21644;&#25480;&#26435;">&#31532;&nbsp;6.3.2&nbsp;&#33410; &#8220;&#20869;&#32622;&#30340;&#35748;&#35777;&#21644;&#25480;&#26435;&#8221;</a>).  If server
                          and client were linked against SASL, a number of other
                          authentication mechanisms may also be available.  However,
                          you'll need to explicitly configure SASL on the server side to
                          advertise them.
               </p>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.svnserve.sasl.authn"></a>6.3.3.1.&nbsp;&#20351;&#29992; SASL &#35748;&#35777;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>To activate specific SASL mechanisms on the server,
                               you'll need to do two things.  First, create
                               a <code class="literal">[sasl]</code> section in your
                               repository's <code class="filename">svnserve.conf</code> file with an
                               initial key-value pair:
                  </p><pre class="programlisting">
          [sasl]
          use-sasl = true
</pre><p>Second, create a main SASL configuration file
                               called <code class="filename">svn.conf</code> in a place where the
                               SASL library can find it&#8212;typically in the directory
                               where SASL plug-ins are located.  You'll have to locate the
                               plug-in directory on your particular system, such
                               as <code class="filename">/usr/lib/sasl2/</code>
                               or <code class="filename">/etc/sasl2/</code>.  (Note that this
                               is <span class="emphasis"><em>not</em></span>
                               the <code class="filename">svnserve.conf</code> file that lives
                               within a repository!)
                  </p>
                  <p>On a Windows server, you'll also have to edit the system
                               registry (using a tool such as <span class="command"><strong>regedit</strong></span>)
                               to tell SASL where to find things.  Create a registry key
                               named <code class="literal">[HKEY_LOCAL_MACHINE\SOFTWARE\Carnegie
                                  Mellon\Project Cyrus\SASL Library]</code>, and place two
                               keys inside it: a key called <code class="literal">SearchPath</code>
                               (whose value is a path to the directory containing the SASL
                               <code class="filename">sasl*.dll</code> plug-in libraries), and a key
                               called
                               <code class="literal">ConfFile</code> (whose value is a path to the
                               parent directory containing
                               the <code class="filename">svn.conf</code> file you created).
                  </p>
                  <p>Because SASL provides so many different kinds of
                               authentication mechanisms, it would be foolish (and far
                               beyond the scope of this book) to try to describe every
                               possible server-side configuration.  Instead, we recommend
                               that you read the documentation supplied in the
                               <code class="filename">doc/</code> subdirectory of the SASL source
                               code.  It goes into great detail about every mechanism and
                               how to configure the server appropriately for each.  For the
                               purposes of this discussion, we'll just demonstrate a simple
                               example of configuring the DIGEST-MD5 mechanism.  For
                               example, if your <code class="filename">subversion.conf</code>
                               (or <code class="filename">svn.conf</code>) file contains the
                               following:
                  </p><pre class="screen">
pwcheck_method: auxprop
auxprop_plugin: sasldb
sasldb_path: /etc/my_sasldb
mech_list: DIGEST-MD5
</pre><p>you've told SASL to advertise the DIGEST-MD5
                               mechanism to clients and to check user passwords against a
                               private password database located
                               at <code class="filename">/etc/my_sasldb</code>.  A system
                               administrator can then use
                               the <span class="command"><strong>saslpasswd2</strong></span> program to add or modify
                               usernames and passwords in the database:
                  </p><pre class="screen">
$ saslpasswd2 -c -f /etc/my_sasldb -u realm username
</pre><p>A few words of warning: first, make sure the
                               &#8220;<span class="quote">realm</span>&#8221; argument
                               to <span class="command"><strong>saslpasswd2</strong></span> matches the same realm
                               you've defined in your
                               repository's <code class="filename">svnserve.conf</code> file; if
                               they don't match, authentication will fail.  Also, due to a
                               shortcoming in SASL, the common realm must be a string with
                               no space characters.  Finally, if you decide to go with the
                               standard SASL password database, make sure
                               the <span class="command"><strong>svnserve</strong></span> program has read access to
                               the file (and possibly write access as well, if you're using
                               a mechanism such as OTP).
                  </p>
                  <p>This is just one simple way of configuring SASL.  Many
                               other authentication mechanisms are available, and passwords
                               can be stored in other places such as in LDAP or a SQL
                               database.  Consult the full SASL documentation for
                               details.
                  </p>
                  <p>Remember that if you configure your server to only allow
                               certain SASL authentication mechanisms, this forces all
                               connecting clients to have SASL support as well.  Any
                               Subversion client built without SASL support (which includes
                               all pre-1.5 clients) will be unable to authenticate.  On the
                               one hand, this sort of restriction may be exactly what you
                               want (&#8220;<span class="quote">My clients must all use Kerberos!</span>&#8221;).
                               However, if you still want non-SASL clients to be able to
                               authenticate, be sure to advertise the CRAM-MD5 mechanism as
                               an option.  All clients are able to use CRAM-MD5, whether
                               they have SASL capabilities or not.
                  </p>
               </div>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.svnserve.sasl.encryption"></a>6.3.3.2.&nbsp;SASL &#21152;&#23494;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>SASL is also able to perform data encryption if a
                               particular mechanism supports it.  The built-in CRAM-MD5
                               mechanism doesn't support encryption, but DIGEST-MD5 does,
                               and mechanisms such as SRP actually require use of the
                               OpenSSL library.  To enable or disable different levels of
                               encryption, you can set two values in your repository's
                               <code class="filename">svnserve.conf</code> file:
                  </p><pre class="screen">
[sasl]
use-sasl = true
min-encryption = 128
max-encryption = 256
</pre><p>The <code class="literal">min-encryption</code> and
                               <code class="literal">max-encryption</code> variables control the
                               level of encryption demanded by the server.  To disable
                               encryption completely, set both values to 0.  To enable
                               simple checksumming of data (i.e., prevent tampering and
                               guarantee data integrity without encryption), set both
                               values to 1.  If you wish to allow&#8212;but not
                               require&#8212;encryption, set the minimum value to 0, and
                               the maximum value to some bit length.  To require encryption
                               unconditionally, set both values to numbers greater than 1.
                               In our previous example, we require clients to do at least
                               128-bit encryption, but no more than 256-bit
                               encryption.
                  </p>
               </div>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.serverconfig.svnserve.sshauth"></a>6.3.4.&nbsp;&#31359;&#36234; SSH &#38567;&#36947;
                        </h3>
                     </div>
                  </div>
               </div>
               <p><span class="command"><strong>svnserve</strong></span>&#30340;&#20869;&#32622;&#35748;&#35777;(&#21644;SASL&#25903;&#25345;)&#21487;&#20197;&#38750;&#24120;&#23481;&#26131;&#24471;&#21040;&#65292;&#22240;&#20026;&#23427;&#36991;&#20813;&#20102;&#21019;&#24314;&#30495;&#23454;&#30340;&#31995;&#32479;&#24080;&#21495;&#65292;&#21478;&#19968;&#26041;&#38754;&#65292;&#19968;&#20123;&#31649;&#29702;&#21592;&#24050;&#32463;&#21019;&#24314;&#22909;&#20102;SSH&#35748;&#35777;&#26694;&#26550;&#65292;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#25152;&#26377;&#30340;&#39033;&#30446;&#29992;&#25143;&#24050;&#32463;&#25317;&#26377;&#20102;&#31995;&#32479;&#24080;&#21495;&#21644;&#26377;&#33021;&#21147;&#8220;<span class="quote">SSH&#21040;</span>&#8221;&#26381;&#21153;&#22120;&#12290;
               </p>
               <p>SSH&#19982;<span class="command"><strong>svnserve</strong></span>&#32467;&#21512;&#24456;&#31616;&#21333;&#65292;&#23458;&#25143;&#31471;&#21482;&#38656;&#35201;&#20351;&#29992;<code class="literal">svn+ssh://</code>&#30340;URL&#27169;&#24335;&#26469;&#36830;&#25509;&#65306;
               </p><pre class="screen">
$ whoami
harry

$ svn list svn+ssh://host.example.com/repos/project
harryssh@host.example.com's password:  *****

foo
bar
baz
&#8230;
</pre><p>In this example, the Subversion client is invoking a local
                          <span class="command"><strong>ssh</strong></span> process, connecting to
                          <code class="literal">host.example.com</code>, authenticating as the
                          user <code class="literal">harryssh</code> (according to SSH user
                          configuration), then spawning a private
                          <span class="command"><strong>svnserve</strong></span> process on the remote machine
                          running as the user <code class="literal">harryssh</code>.  The
                          <span class="command"><strong>svnserve</strong></span> command is being invoked in tunnel
                          mode (<code class="option">-t</code>), and its network protocol is being
                          &#8220;<span class="quote">tunneled</span>&#8221; over the encrypted connection by
                          <span class="command"><strong>ssh</strong></span>, the tunnel agent.
                          If the client performs a commit, the authenticated username
                          <code class="literal">harryssh</code> will be used as the author
                          of the new revision.
               </p>
               <p>&#36825;&#37324;&#35201;&#29702;&#35299;&#30340;&#26368;&#37325;&#35201;&#30340;&#20107;&#24773;&#26159;Subversion&#23458;&#25143;&#31471;<span class="emphasis"><em>&#19981;</em></span>&#26159;&#36830;&#25509;&#21040;&#36816;&#34892;&#20013;&#30340;<span class="command"><strong>svnserve</strong></span>&#23432;&#25252;&#36827;&#31243;&#65292;&#36825;&#31181;&#35775;&#38382;&#26041;&#27861;&#19981;&#38656;&#35201;&#19968;&#20010;&#36816;&#34892;&#30340;&#23432;&#25252;&#36827;&#31243;&#65292;&#20063;&#19981;&#38656;&#35201;&#22312;&#24517;&#35201;&#26102;&#21796;&#37266;&#19968;&#20010;&#65292;&#23427;&#20381;&#36182;&#20110;<span class="command"><strong>ssh</strong></span>&#26469;&#21457;&#36215;&#19968;&#20010;<span class="command"><strong>svnserve</strong></span>&#36827;&#31243;&#65292;&#28982;&#21518;&#32593;&#32476;&#26029;&#24320;&#21518;&#32456;&#27490;&#36827;&#31243;&#12290;
               </p>
               <p>&#24403;&#20351;&#29992;<code class="literal">svn+ssh://</code>&#30340;URL&#35775;&#38382;&#29256;&#26412;&#24211;&#26102;&#65292;&#35760;&#20303;&#26159;<span class="command"><strong>ssh</strong></span>&#25552;&#31034;&#35831;&#27714;&#35748;&#35777;&#65292;&#32780;<span class="emphasis"><em>&#19981;</em></span>&#26159;<span class="command"><strong>svn</strong></span>&#23458;&#25143;&#31471;&#31243;&#24207;&#12290;&#36825;&#24847;&#21619;&#30528;&#23494;&#30721;&#19981;&#20250;&#26377;&#33258;&#21160;&#32531;&#23384;(&#35265;<a class="xref" href="svn.advanced.html#svn.serverconfig.netmodel.credcache" title="3.11.2.&nbsp;&#23458;&#25143;&#31471;&#20973;&#35777;&#32531;&#23384;">&#31532;&nbsp;3.11.2&nbsp;&#33410; &#8220;&#23458;&#25143;&#31471;&#20973;&#35777;&#32531;&#23384;&#8221;</a>)&#65292;Subversion&#23458;&#25143;&#31471;&#36890;&#24120;&#20250;&#24314;&#31435;&#22810;&#20010;&#29256;&#26412;&#24211;&#30340;&#36830;&#25509;&#65292;&#20294;&#29992;&#25143;&#36890;&#24120;&#20250;&#22240;&#20026;&#23494;&#30721;&#32531;&#23384;&#29305;&#24615;&#32780;&#27809;&#26377;&#27880;&#24847;&#21040;&#36825;&#19968;&#28857;&#65292;&#24403;&#20351;&#29992;<code class="literal">svn+ssh://</code>&#30340;URL&#26102;&#65292;&#29992;&#25143;&#20250;&#20026;<span class="command"><strong>ssh</strong></span>&#22312;&#27599;&#27425;&#24314;&#31435;&#36830;&#25509;&#26102;&#37325;&#22797;&#30340;&#35810;&#38382;&#23494;&#30721;&#24863;&#21040;&#35752;&#21388;&#65292;&#35299;&#20915;&#26041;&#26696;&#26159;&#29992;&#19968;&#20010;&#29420;&#31435;&#30340;SSH&#23494;&#30721;&#32531;&#23384;&#24037;&#20855;&#65292;&#20687;&#31867;Unix&#31995;&#32479;&#30340;<span class="command"><strong>ssh-agent</strong></span>&#25110;&#32773;&#26159;Windows&#19979;&#30340;<span class="command"><strong>pageant</strong></span>&#12290;
               </p>
               <p>When running over a tunnel, authorization is primarily
                          controlled by operating system permissions to the repository's
                          database files; it's very much the same as if Harry were
                          accessing the repository directly via a
                          <code class="literal">file://</code> URL.  If multiple system users are
                          going to be accessing the repository directly, you may want to
                          place them into a common group, and you'll need to be careful
                          about umasks (be sure to read <a class="xref" href="svn.serverconfig.html#svn.serverconfig.multimethod" title="6.6.&nbsp;&#25903;&#25345;&#22810;&#31181;&#29256;&#26412;&#24211;&#35775;&#38382;&#26041;&#27861;">&#31532;&nbsp;6.6&nbsp;&#33410; &#8220;&#25903;&#25345;&#22810;&#31181;&#29256;&#26412;&#24211;&#35775;&#38382;&#26041;&#27861;&#8221;</a> later in this
                          chapter).  But even in the case of tunneling, you can still use the
                          <code class="filename">svnserve.conf</code> file to block access, by
                          simply setting <code class="literal">auth-access = read</code>
                          or <code class="literal">auth-access = none</code>.
                          <sup>[<a name="d0e12328" href="#ftn.d0e12328" class="footnote">42</a>]</sup>
                        
               </p>
               <p>&#20320;&#20250;&#35748;&#20026;SSH&#31649;&#36947;&#30340;&#25925;&#20107;&#35813;&#32467;&#26463;&#20102;&#65292;&#20294;&#36824;&#19981;&#26159;&#65292;Subversion&#20801;&#35768;&#20320;&#22312;&#36816;&#34892;&#37197;&#32622;&#25991;&#20214;<code class="filename">config</code>(&#35265;<a class="xref" href="svn.customization.html#svn.advanced.confarea" title="7.1.&nbsp;&#36816;&#34892;&#37197;&#32622;&#21306;">&#31532;&nbsp;7.1&nbsp;&#33410; &#8220;&#36816;&#34892;&#37197;&#32622;&#21306;&#8221;</a>)&#21019;&#24314;&#19968;&#20010;&#33258;&#23450;&#20041;&#30340;&#31649;&#36947;&#34892;&#20026;&#26041;&#24335;&#65292;&#20030;&#20010;&#20363;&#23376;&#65292;&#20551;&#23450;&#20320;&#24076;&#26395;&#20351;&#29992;RSH&#32780;&#19981;&#26159;SSH&#65292;&#22312;<code class="filename">config</code>&#25991;&#20214;&#30340;<code class="literal">[tunnels]</code>&#37096;&#20998;&#20316;&#22914;&#19979;&#23450;&#20041;&#65306;
               </p><pre class="screen">
[tunnels]
rsh = rsh
</pre><p>And now, you can use this new tunnel definition by using a
                          URL scheme that matches the name of your new variable:
                          <code class="literal">svn+rsh://host/path</code>.  When using the new
                          URL scheme, the Subversion client will actually be running the
                          command <strong class="userinput"><code>rsh host svnserve -t</code></strong> behind the
                          scenes.  If you include a username in the URL (e.g.,
                          <code class="literal">svn+rsh://username@host/path</code>), the client
                          will also include that in its command (<strong class="userinput"><code>rsh
                                username@host svnserve -t</code></strong>).  But you can define new
                          tunneling schemes to be much more clever than that:
               </p><pre class="screen">
[tunnels]
joessh = $JOESSH /opt/alternate/ssh -p 29934
</pre><p>This example demonstrates a couple of things.  First, it
                          shows how to make the Subversion client launch a very specific
                          tunneling binary (the one located at
                          <code class="filename">/opt/alternate/ssh</code>) with specific
                          options.  In this case, accessing an
                          <code class="literal">svn+joessh://</code> URL would invoke the
                          particular SSH binary with <code class="option">-p 29934</code> as
                          arguments&#8212;useful if you want the tunnel program to
                          connect to a nonstandard port.
               </p>
               <p>Second, it shows how to define a custom environment
                          variable that can override the name of the tunneling program.
                          Setting the <code class="literal">SVN_SSH</code> environment variable is
                          a convenient way to override the default SSH tunnel agent.
                          But if you need to have several different overrides for
                          different servers, each perhaps contacting a different port or
                          passing a different set of options to SSH, you can use the
                          mechanism demonstrated in this example.  Now if we were to set
                          the <code class="literal">JOESSH</code> environment variable, its value
                          would override the entire value of the tunnel
                          variable&#8212;<span class="command"><strong>$JOESSH</strong></span> would be executed
                          instead of <strong class="userinput"><code>/opt/alternate/ssh -p
                                29934</code></strong>.
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.serverconfig.svnserve.sshtricks"></a>6.3.5.&nbsp;SSH &#37197;&#32622;&#25216;&#24039;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>It's possible to control not only the way in which the
                          client invokes <span class="command"><strong>ssh</strong></span>, but also to control
                          the behavior of <span class="command"><strong>sshd</strong></span> on your server
                          machine.  In this section, we'll show how to control the
                          exact <span class="command"><strong>svnserve</strong></span> command executed
                          by <span class="command"><strong>sshd</strong></span>, as well as how to have multiple
                          users share a single system account.
               </p>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.svnserve.sshtricks.setup"></a>6.3.5.1.&nbsp;&#21021;&#22987;&#35774;&#32622;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>&#20316;&#20026;&#24320;&#22987;&#65292;&#23450;&#20301;&#21040;&#20320;&#21551;&#21160;<span class="command"><strong>svnserve</strong></span>&#30340;&#24080;&#21495;&#30340;&#20027;&#30446;&#24405;&#65292;&#30830;&#23450;&#36825;&#20010;&#36134;&#25143;&#24050;&#32463;&#23433;&#35013;&#20102;&#19968;&#22871;SSH&#20844;&#24320;/&#31169;&#26377;&#23494;&#38053;&#23545;&#65292;&#29992;&#25143;&#21487;&#20197;&#36890;&#36807;&#20844;&#24320;&#23494;&#38053;&#35748;&#35777;&#65292;&#22240;&#20026;&#25152;&#26377;&#22914;&#19979;&#30340;&#25216;&#24039;&#22260;&#32469;&#30528;&#20351;&#29992;SSH<code class="filename">authorized_keys</code>&#25991;&#20214;&#65292;&#23494;&#30721;&#35748;&#35777;&#22312;&#36825;&#37324;&#19981;&#20250;&#24037;&#20316;&#12290;
                  </p>
                  <p>&#22914;&#26524;&#36825;&#20010;&#25991;&#20214;&#36824;&#19981;&#23384;&#22312;&#65292;&#21019;&#24314;&#19968;&#20010;<code class="filename">authorized_keys</code>&#25991;&#20214;(&#22312;UNIX&#19979;&#36890;&#24120;&#26159;<code class="filename">~/.ssh/authorized_keys</code>)&#65292;&#36825;&#20010;&#25991;&#20214;&#30340;&#27599;&#19968;&#34892;&#25551;&#36848;&#20102;&#19968;&#20010;&#20801;&#35768;&#36830;&#25509;&#30340;&#20844;&#38053;&#65292;&#36825;&#20123;&#34892;&#36890;&#24120;&#26159;&#19979;&#38754;&#30340;&#24418;&#24335;&#65306;
                  </p><pre class="screen">
  ssh-dsa AAAABtce9euch&#8230; user@example.com
</pre><p>&#31532;&#19968;&#20010;&#23383;&#27573;&#25551;&#36848;&#20102;&#23494;&#38053;&#30340;&#31867;&#22411;&#65292;&#31532;&#20108;&#20010;&#23383;&#27573;&#26159;&#26410;&#21152;&#23494;&#30340;&#23494;&#38053;&#26412;&#36523;&#65292;&#31532;&#19977;&#20010;&#23383;&#27573;&#26159;&#27880;&#37322;&#12290;&#28982;&#32780;&#65292;&#36825;&#26159;&#19968;&#20010;&#24456;&#23569;&#20154;&#30693;&#36947;&#30340;&#20107;&#23454;&#65292;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;<code class="literal">command</code>&#26469;&#22788;&#29702;&#25972;&#34892;&#65306;
                  </p><pre class="screen">
  command="program" ssh-dsa AAAABtce9euch&#8230; user@example.com
</pre><p>When the <code class="literal">command</code> field is set, the
                               SSH daemon will run the named program instead of the
                               typical tunnel-mode <span class="command"><strong>svnserve</strong></span> invocation that the
                               Subversion client asks for.  This opens the door to a number
                               of server-side tricks.  In the following examples, we
                               abbreviate the lines of the file as:
                  </p><pre class="screen">
  command="program" TYPE KEY COMMENT
</pre></div>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.svnserve.sshtricks.fixedcmd"></a>6.3.5.2.&nbsp;&#25511;&#21046;&#35843;&#29992;&#30340;&#21629;&#20196;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>&#22240;&#20026;&#25105;&#20204;&#21487;&#20197;&#25351;&#23450;&#26381;&#21153;&#22120;&#31471;&#25191;&#34892;&#30340;&#21629;&#20196;&#65292;&#25105;&#20204;&#24456;&#23481;&#26131;&#26469;&#36873;&#25321;&#36816;&#34892;&#19968;&#20010;&#29305;&#23450;&#30340;<span class="command"><strong>svnserve</strong></span>&#31243;&#24207;&#26469;&#24182;&#19988;&#20256;&#36882;&#32473;&#23427;&#39069;&#22806;&#30340;&#21442;&#25968;&#65306;
                  </p><pre class="screen">
  command="/path/to/svnserve -t -r /virtual/root" TYPE KEY COMMENT
</pre><p>&#22312;&#36825;&#20010;&#20363;&#23376;&#37324;&#65292;<code class="filename">/path/to/svnserve</code>&#20063;&#35768;&#20250;&#26159;&#19968;&#20010;<span class="command"><strong>svnserve</strong></span>&#31243;&#24207;&#30340;&#21253;&#35065;&#33050;&#26412;&#65292;&#20250;&#26469;&#35774;&#32622;umask(&#35265;<a class="xref" href="svn.serverconfig.html#svn.serverconfig.multimethod" title="6.6.&nbsp;&#25903;&#25345;&#22810;&#31181;&#29256;&#26412;&#24211;&#35775;&#38382;&#26041;&#27861;">&#31532;&nbsp;6.6&nbsp;&#33410; &#8220;&#25903;&#25345;&#22810;&#31181;&#29256;&#26412;&#24211;&#35775;&#38382;&#26041;&#27861;&#8221;</a>)&#12290;&#23427;&#20063;&#23637;&#31034;&#20102;&#24590;&#26679;&#22312;&#34394;&#25311;&#26681;&#30446;&#24405;&#23450;&#20301;&#19968;&#20010;<span class="command"><strong>svnserve</strong></span>&#65292;&#23601;&#20687;&#25105;&#20204;&#32463;&#24120;&#22312;&#20351;&#29992;&#23432;&#25252;&#36827;&#31243;&#27169;&#24335;&#19979;&#36816;&#34892;<span class="command"><strong>svnserve</strong></span>&#19968;&#26679;&#12290;&#36825;&#26679;&#20570;&#19981;&#20165;&#21487;&#20197;&#25226;&#35775;&#38382;&#38480;&#21046;&#22312;&#31995;&#32479;&#30340;&#19968;&#37096;&#20998;&#65292;&#20063;&#21487;&#20197;&#20351;&#29992;&#25143;&#19981;&#38656;&#35201;&#22312;<code class="literal">svn+ssh://</code>URL&#37324;&#36755;&#20837;&#32477;&#23545;&#36335;&#24452;&#12290;
                  </p>
                  <p>It's also possible to have multiple users share a single
                               account.  Instead of creating a separate system account for
                               each user, generate a public/private key pair for each
                               person.  Then place each public key into
                               the <code class="filename">authorized_users</code> file, one per
                               line, and use the <code class="option">--tunnel-user</code>
                               option:
                  </p><pre class="screen">
  command="svnserve -t --tunnel-user=harry" TYPE1 KEY1 harry@example.com
  command="svnserve -t --tunnel-user=sally" TYPE2 KEY2 sally@example.com
</pre><p>This example allows both Harry and Sally to connect to
                               the same account via public key authentication.  Each of
                               them has a custom command that will be executed;
                               the <code class="option">--tunnel-user</code> option 
                               tells <span class="command"><strong>svnserve</strong></span> to assume that the named
                               argument is the authenticated user.  Without
                               <code class="option">--tunnel-user</code>, it would appear as though
                               all commits were coming from the one shared system
                               account.
                  </p>
                  <p>A final word of caution: giving a user access to the
                               server via public-key in a shared account might still allow
                               other forms of SSH access, even if you've set
                               the <code class="literal">command</code> value
                               in <code class="filename">authorized_keys</code>.  For example, the
                               user may still get shell access through SSH or be able to
                               perform X11 or general port forwarding through your server.
                               To give the user as little permission as possible, you may
                               want to specify a number of restrictive options immediately
                               after the <code class="literal">command</code>:
                  </p><pre class="screen">
  command="svnserve -t --tunnel-user=harry",no-port-forwarding,no-agent-forw
arding,no-X11-forwarding,no-pty TYPE1 KEY1 harry@example.com
</pre><p>Note that this all must be on one line&#8212;truly on
                               one line&#8212;since SSH <code class="filename">authorized_keys</code> 
                               files do not even allow the conventional backslash character
                               (<code class="literal">\</code>) for line continuation.  The only
                               reason we've shown it with a line break is to fit it on
                               the physical page of a book.
                  </p>
               </div>
            </div>
         </div>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.serverconfig.httpd"></a>6.4.&nbsp;httpd - Apache &#30340; HTTP &#26381;&#21153;&#22120;
                     </h2>
                  </div>
               </div>
            </div>
            <p>The Apache HTTP Server is a &#8220;<span class="quote">heavy-duty</span>&#8221;
                     network server that Subversion can leverage.  Via a custom
                     module, <span class="command"><strong>httpd</strong></span> makes Subversion repositories
                     available to clients via the WebDAV/DeltaV protocol, which is an
                     extension to HTTP 1.1 (see <a class="ulink" href="http://www.webdav.org/" target="_top">http://www.webdav.org/</a>
                     for more information).  This protocol takes the ubiquitous HTTP
                     protocol that is the core of the World Wide Web, and adds
                     writing&#8212;specifically, versioned
                     writing&#8212;capabilities.  The result is a standardized,
                     robust system that is conveniently packaged as part of the
                     Apache 2.0 software, supported by numerous operating systems
                     and third-party products, and doesn't require network
                     administrators to open up yet another custom port.
                     <sup>[<a name="d0e12536" href="#ftn.d0e12536" class="footnote">43</a>]</sup>
                     While an Apache-Subversion server has more features than
                     <span class="command"><strong>svnserve</strong></span>, it's also a bit more difficult
                     to set up.  With flexibility often comes more complexity.
            </p>
            <p>Much of the following discussion includes references to
                     Apache configuration directives.  While some examples are given
                     of the use of these directives, describing them in full is
                     outside the scope of this chapter.  The Apache team maintains
                     excellent documentation, publicly available on their web site at
                     <a class="ulink" href="http://httpd.apache.org" target="_top">http://httpd.apache.org</a>.  For example, a general
                     reference for the configuration directives is located at
                     <a class="ulink" href="       http://httpd.apache.org/docs-2.0/mod/directives.html" target="_top">       http://httpd.apache.org/docs-2.0/mod/directives.html</a>.
            </p>
            <p>&#21516;&#26679;&#65292;&#24403;&#20320;&#20462;&#25913;&#20320;&#30340;Apache&#35774;&#32622;&#65292;&#24456;&#26377;&#21487;&#33021;&#20250;&#20986;&#29616;&#19968;&#20123;&#38169;&#35823;&#65292;&#22914;&#26524;&#20320;&#36824;&#19981;&#29087;&#24713;Apache&#30340;&#26085;&#24535;&#23376;&#31995;&#32479;&#65292;&#20320;&#19968;&#23450;&#38656;&#35201;&#35748;&#35782;&#21040;&#36825;&#19968;&#28857;&#12290;&#22312;&#20320;&#30340;&#25991;&#20214;<code class="filename">httpd.conf</code>&#37324;&#20250;&#25351;&#23450;Apache&#29983;&#25104;&#30340;&#35775;&#38382;&#21644;&#38169;&#35823;&#26085;&#24535;(<code class="literal">CustomLog</code>&#21644;<code class="literal">ErrorLog</code>&#25351;&#31034;)&#30340;&#30913;&#30424;&#20301;&#32622;&#12290;Subversion&#30340;mod_dav_svn&#20351;&#29992;Apache&#30340;&#38169;&#35823;&#26085;&#24535;&#25509;&#21475;&#65292;&#20320;&#21487;&#20197;&#27983;&#35272;&#36825;&#20010;&#25991;&#20214;&#30340;&#20869;&#23481;&#26597;&#30475;&#20449;&#24687;&#26469;&#26597;&#25214;&#38590;&#20110;&#21457;&#29616;&#30340;&#38382;&#39064;&#26681;&#28304;&#12290;
            </p>
            <div class="sidebar">
               <p class="title"><b>&#20026;&#20160;&#20040;&#26159; Apache 2&#65311;</b></p>
               <p>If you're a system administrator, it's very likely that
                          you're already running the Apache web server and have some
                          prior experience with it.  At the time of this writing, Apache 1.3
                          is the more popular version of Apache.  The world has
                          been somewhat slow to upgrade to the Apache 2.x series for
                          various reasons: some people fear change, especially changing
                          something as critical as a web server.  Other people depend on
                          plug-in modules that work only against the Apache 1.3 API, and
                          they are waiting for a 2.x port.  Whatever the reason, many
                          people begin to worry when they first discover that
                          Subversion's Apache module is written specifically for the
                          Apache 2 API.
               </p>
               <p>&#23545;&#27492;&#38382;&#39064;&#30340;&#36866;&#24403;&#21453;&#24212;&#26159;&#65306;&#19981;&#38656;&#35201;&#25285;&#24515;&#65292;&#21516;&#26102;&#36816;&#34892;Apache 1.3&#21644;Apache 2&#38750;&#24120;&#31616;&#21333;&#65292;&#21482;&#38656;&#35201;&#23433;&#35013;&#21040;&#19981;&#21516;&#30340;&#20301;&#32622;&#65292;&#29992;Apache 2&#20316;&#20026;Subversion&#30340;&#19987;&#29992;&#26381;&#21153;&#22120;&#65292;&#24182;&#19988;&#19981;&#20351;&#29992;80&#31471;&#21475;&#65292;&#23458;&#25143;&#31471;&#21487;&#20197;&#35775;&#38382;&#29256;&#26412;&#24211;&#26102;&#22312;URL&#37324;&#25351;&#23450;&#31471;&#21475;&#65306;</p><pre class="screen">
$ svn checkout http://host.example.com:7382/repos/project
</pre></div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.serverconfig.httpd.prereqs"></a>6.4.1.&nbsp;&#20808;&#20915;&#26465;&#20214;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#20026;&#20102;&#35753;&#20320;&#30340;&#29256;&#26412;&#24211;&#20351;&#29992;HTTP&#32593;&#32476;&#65292;&#20320;&#22522;&#26412;&#19978;&#38656;&#35201;&#20004;&#20010;&#21253;&#37324;&#30340;&#22235;&#20010;&#37096;&#20998;&#12290;&#20320;&#38656;&#35201;Apache <span class="command"><strong>httpd</strong></span>2.0&#21644;&#21253;&#25324;&#30340;<span class="command"><strong>mod_dav</strong></span> DAV&#27169;&#22359;&#65292;Subversion&#21644;&#19982;&#20043;&#19968;&#21516;&#20998;&#21457;&#30340;<span class="command"><strong>mod_dav_svn</strong></span>&#25991;&#20214;&#31995;&#32479;&#25552;&#20379;&#32773;&#27169;&#22359;&#65292;&#22914;&#26524;&#20320;&#26377;&#20102;&#36825;&#20123;&#32452;&#20214;&#65292;&#32593;&#32476;&#21270;&#20320;&#30340;&#29256;&#26412;&#24211;&#23558;&#38750;&#24120;&#31616;&#21333;&#65292;&#22914;&#65306;
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>&#37197;&#32622;&#22909;httpd 2.0&#65292;&#24182;&#19988;&#20351;&#29992;<span class="command"><strong>mod_dav</strong></span>&#21551;&#21160;
                        </p>
                     </li>
                     <li>
                        <p>Installing the <span class="command"><strong>mod_dav_svn</strong></span> backend
                                       to <span class="command"><strong>mod_dav</strong></span>, which uses Subversion's
                                       libraries to access the repository
                        </p>
                     </li>
                     <li>
                        <p>&#37197;&#32622;&#20320;&#30340;<code class="filename">httpd.conf</code>&#26469;&#36755;&#20986;(&#25110;&#32773;&#35828;&#26292;&#38706;)&#29256;&#26412;&#24211;
                        </p>
                     </li>
                  </ul>
               </div>
               <p>&#20320;&#21487;&#20197;&#36890;&#36807;&#20174;&#28304;&#20195;&#30721;&#32534;&#35793;<span class="command"><strong>httpd</strong></span>&#21644;Subversion&#26469;&#23436;&#25104;&#21069;&#20004;&#20010;&#39033;&#30446;&#65292;&#20063;&#21487;&#20197;&#36890;&#36807;&#20320;&#30340;&#31995;&#32479;&#19978;&#30340;&#24050;&#32463;&#32534;&#35793;&#22909;&#30340;&#20108;&#36827;&#21046;&#21253;&#26469;&#23433;&#35013;&#12290;&#26368;&#26032;&#30340;&#20351;&#29992;Apache HTTP&#30340;Subversion&#30340;&#32534;&#35793;&#26041;&#27861;&#21644;Apache&#30340;&#37197;&#32622;&#26041;&#24335;&#21487;&#20197;&#30475;Subversion&#28304;&#20195;&#30721;&#26641;&#26681;&#30446;&#24405;&#30340;<code class="filename">INSTALL</code>&#25991;&#20214;&#12290;
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.serverconfig.httpd.basic"></a>6.4.2.&nbsp;&#22522;&#26412;&#30340; Apache &#37197;&#32622;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#19968;&#26086;&#20320;&#23433;&#35013;&#20102;&#24517;&#39035;&#30340;&#32452;&#20214;&#65292;&#21097;&#19979;&#30340;&#24037;&#20316;&#23601;&#26159;&#22312;<code class="filename">httpd.conf</code>&#37324;&#37197;&#32622;Apache&#65292;&#20351;&#29992;<code class="literal">LoadModule</code>&#26469;&#21152;&#36733;mod_dav_svn&#27169;&#22359;&#65292;&#36825;&#20010;&#25351;&#31034;&#24517;&#39035;&#20808;&#19982;&#20854;&#23427;Subversion&#30456;&#20851;&#30340;&#20854;&#23427;&#37197;&#32622;&#20986;&#29616;&#65292;&#22914;&#26524;&#20320;&#30340;Apache&#20351;&#29992;&#32570;&#30465;&#24067;&#23616;&#23433;&#35013;&#65292;&#20320;&#30340;<span class="command"><strong>mod_dav_svn</strong></span>&#27169;&#22359;&#19968;&#23450;&#22312;Apache&#23433;&#35013;&#30446;&#24405;(&#36890;&#24120;&#26159;&#22312;<code class="filename">/usr/local/apache2</code>)&#30340;<code class="filename">modules</code>&#23376;&#30446;&#24405;&#65292;<code class="literal">LoadModule</code>&#25351;&#31034;&#30340;&#35821;&#27861;&#24456;&#31616;&#21333;&#65292;&#24433;&#23556;&#19968;&#20010;&#21517;&#23383;&#21040;&#23427;&#30340;&#20849;&#20139;&#24211;&#30340;&#29289;&#29702;&#20301;&#32622;&#65306;
               </p><pre class="screen">
LoadModule dav_svn_module     modules/mod_dav_svn.so
</pre><p>&#27880;&#24847;&#65292;&#22914;&#26524;<span class="command"><strong>mod_dav</strong></span>&#26159;&#20316;&#20026;&#20849;&#20139;&#23545;&#35937;&#32534;&#35793;(&#32780;&#19981;&#26159;&#38745;&#24577;&#38142;&#25509;&#21040;<span class="command"><strong>httpd</strong></span>&#31243;&#24207;)&#65292;&#20320;&#38656;&#35201;&#20026;&#23427;&#20351;&#29992;<code class="literal">LoadModule</code>&#35821;&#21477;&#65292;&#19968;&#23450;&#30830;&#23450;&#23427;&#22312;<span class="command"><strong>mod_dav_svn</strong></span>&#20043;&#21069;&#65306;
               </p><pre class="screen">
LoadModule dav_module         modules/mod_dav.so
LoadModule dav_svn_module     modules/mod_dav_svn.so
</pre><p>&#22312;&#20320;&#30340;&#37197;&#32622;&#25991;&#20214;&#21518;&#38754;&#30340;&#20301;&#32622;&#65292;&#20320;&#38656;&#35201;&#21578;&#35785;Apache&#20320;&#22312;&#20160;&#20040;&#22320;&#26041;&#20445;&#23384;Subversion&#29256;&#26412;&#24211;(&#20063;&#35768;&#26159;&#22810;&#20010;)&#65292;<code class="literal">&#20301;&#32622;</code>&#25351;&#31034;&#26377;&#19968;&#20010;&#24456;&#20687;XML&#30340;&#31526;&#21495;&#65292;&#24320;&#22987;&#20110;&#19968;&#20010;&#24320;&#22987;&#26631;&#31614;&#65292;&#20197;&#19968;&#20010;&#32467;&#26463;&#26631;&#31614;&#32467;&#26463;&#65292;&#37197;&#21512;&#20013;&#38388;&#35768;&#22810;&#30340;&#20854;&#23427;&#37197;&#32622;&#12290;<code class="literal">Location</code>&#25351;&#31034;&#30340;&#30446;&#30340;&#26159;&#21578;&#35785;Apache&#22312;&#29305;&#23450;&#30340;URL&#20197;&#21450;&#23376;URL&#19979;&#38656;&#35201;&#29305;&#27530;&#30340;&#22788;&#29702;&#65292;&#22914;&#26524;&#26159;&#20026;Subversion&#20934;&#22791;&#30340;&#65292;&#20320;&#24076;&#26395;&#21487;&#20197;&#36890;&#36807;&#21578;&#35785;Apache&#29305;&#23450;URL&#26159;&#25351;&#21521;&#29256;&#26412;&#21270;&#30340;&#36164;&#28304;&#65292;&#20174;&#32780;&#25226;&#25903;&#25345;&#36716;&#20132;&#32473;DAV&#23618;&#65292;&#20320;&#21487;&#20197;&#21578;&#35785;Apache&#23558;&#25152;&#26377;&#36335;&#24452;&#37096;&#20998;(URL&#20013;&#26381;&#21153;&#22120;&#21517;&#31216;&#21644;&#31471;&#21475;&#20043;&#21518;&#30340;&#37096;&#20998;)&#20197;<code class="filename">/repos/</code>&#24320;&#22836;&#30340;URL&#20132;&#30001;DAV&#26381;&#21153;&#25552;&#20379;&#32773;&#22788;&#29702;&#12290;&#19968;&#20010;DAV&#26381;&#21153;&#25552;&#20379;&#32773;&#30340;&#29256;&#26412;&#24211;&#20301;&#20110;<code class="filename">/absolute/path/to/repository</code>&#65292;&#21487;&#20197;&#20351;&#29992;&#22914;&#19979;&#30340;<code class="filename">httpd.conf</code>&#35821;&#27861;&#65306;
               </p><pre class="screen">
&lt;Location /repos&gt;
  DAV svn
  SVNPath /var/svn/repository
&lt;/Location&gt;
</pre><p>&#22914;&#26524;&#20320;&#35745;&#21010;&#25903;&#25345;&#22810;&#20010;&#20855;&#22791;&#30456;&#21516;&#29238;&#30446;&#24405;&#30340;Subversion&#29256;&#26412;&#24211;&#65292;&#20320;&#26377;&#21478;&#22806;&#30340;&#36873;&#25321;&#65292;<code class="literal">SVNParentPath</code>&#25351;&#31034;&#65292;&#26469;&#34920;&#31034;&#20849;&#21516;&#30340;&#29238;&#30446;&#24405;&#12290;&#20030;&#20010;&#20363;&#23376;&#65292;&#22914;&#26524;&#20320;&#30693;&#36947;&#20250;&#22312;<code class="filename">/usr/local/svn</code>&#19979;&#21019;&#24314;&#22810;&#20010;Subversion&#29256;&#26412;&#24211;&#65292;&#24182;&#19988;&#36890;&#36807;&#31867;&#20284;<code class="uri">http://my.server.com/svn/repos1</code>&#65292;<code class="uri">http://my.server.com/svn/repos2</code>&#30340;URL&#35775;&#38382;&#65292;&#20320;&#21487;&#20197;&#29992;&#21518;&#38754;&#20363;&#23376;&#20013;&#30340;<code class="filename">httpd.conf</code>&#37197;&#32622;&#35821;&#27861;&#65306;
               </p><pre class="screen">
&lt;Location /svn&gt;
  DAV svn

  # any "/svn/foo" URL will map to a repository /var/svn/foo
  SVNParentPath /var/svn
&lt;/Location&gt;
</pre><p>Using the previous syntax, Apache will delegate the
                          handling of all URLs whose path portions begin with
                          <code class="filename">/svn/</code> to the Subversion DAV provider,
                          which will then assume that any items in the directory
                          specified by the <code class="literal">SVNParentPath</code> directive
                          are actually Subversion repositories.  This is a particularly
                          convenient syntax in that, unlike the use of the
                          <code class="literal">SVNPath</code> directive, you don't have to
                          restart Apache to create and network new repositories.
               </p>
               <p>&#35831;&#30830;&#23450;&#24403;&#20320;&#23450;&#20041;&#26032;&#30340;<code class="literal">Location</code>&#65292;&#19981;&#20250;&#19982;&#20854;&#23427;&#36755;&#20986;&#30340;&#20301;&#32622;&#37325;&#21472;&#12290;&#20363;&#22914;&#20320;&#30340;&#20027;&#35201;<code class="literal">DocumentRoot</code>&#26159;<code class="filename">/www</code>&#65292;&#19981;&#35201;&#25226;Subversion&#29256;&#26412;&#24211;&#36755;&#20986;&#21040;<code class="literal">&lt;Location /www/repos&gt;</code>&#65292;&#22914;&#26524;&#19968;&#20010;&#35831;&#27714;&#30340;URI&#26159;<code class="filename">/www/repos/foo.c</code>&#65292;Apache&#19981;&#30693;&#36947;&#26159;&#30452;&#25509;&#21040;<code class="filename">repos/foo.c</code>&#35775;&#38382;&#36825;&#20010;&#25991;&#20214;&#36824;&#26159;&#35753;<span class="command"><strong>mod_dav_svn</strong></span>&#20195;&#29702;&#20174;Subversion&#29256;&#26412;&#24211;&#36820;&#22238;<code class="filename">foo.c</code>&#12290;&#26381;&#21153;&#22120;&#36820;&#22238;&#30340;&#32467;&#26524;&#36890;&#24120;&#26159;<code class="literal">301 Moved Permanently</code>&#12290;
               </p>
               <div class="sidebar">
                  <p class="title"><b>&#26381;&#21153;&#22120;&#21517;&#31216;&#21644;&#22797;&#21046;&#35831;&#27714;</b></p>
                  <p>Subversion&#21033;&#29992;<code class="literal">COPY</code>&#35831;&#27714;&#31867;&#22411;&#26469;&#25191;&#34892;&#26381;&#21153;&#22120;&#31471;&#30340;&#25991;&#20214;&#21644;&#30446;&#24405;&#25335;&#36125;&#65292;&#20316;&#20026;&#19968;&#20010;&#20581;&#20840;&#30340;Apache&#27169;&#22359;&#30340;&#19968;&#37096;&#20998;&#65292;&#25335;&#36125;&#28304;&#21644;&#25335;&#36125;&#30340;&#30446;&#26631;&#36890;&#24120;&#22352;&#33853;&#22312;&#21516;&#19968;&#20010;&#26426;&#22120;&#19978;&#65292;&#20026;&#20102;&#28385;&#36275;&#36825;&#20010;&#38656;&#27714;&#65292;&#20320;&#25110;&#35768;&#38656;&#35201;&#21578;&#35785;mod_dav&#26381;&#21153;&#22120;&#20027;&#26426;&#30340;&#21517;&#31216;&#65292;&#36890;&#24120;&#20320;&#21487;&#20197;&#20351;&#29992;<code class="filename">httpd.conf</code>&#30340;<code class="literal">ServerName</code>&#25351;&#31034;&#26469;&#23436;&#25104;&#27492;&#30446;&#30340;&#12290;
                  </p><pre class="screen">
ServerName svn.example.com
</pre><p>If you are using Apache's virtual hosting support via
                               the <code class="literal">NameVirtualHost</code> directive, you may
                               need to use the <code class="literal">ServerAlias</code> directive to
                               specify additional names by which your server is known.
                               Again, refer to the Apache documentation for full
                               details.
                  </p>
               </div>
               <p>&#22312;&#26412;&#38454;&#27573;&#65292;&#20320;&#19968;&#23450;&#35201;&#32771;&#34385;&#35775;&#38382;&#26435;&#38480;&#38382;&#39064;&#65292;&#22914;&#26524;&#20320;&#24050;&#32463;&#20316;&#20026;&#26222;&#36890;&#30340;web&#26381;&#21153;&#22120;&#36816;&#34892;&#36807;Apache&#65292;&#20320;&#19968;&#23450;&#26377;&#20102;&#19968;&#20123;&#20869;&#23481;&#8212;&#32593;&#39029;&#12289;&#33050;&#26412;&#21644;&#20854;&#20182;&#12290;&#36825;&#20123;&#39033;&#30446;&#24050;&#32463;&#37197;&#32622;&#20102;&#35768;&#22810;&#22312;Apache&#19979;&#21487;&#20197;&#24037;&#20316;&#30340;&#35775;&#38382;&#35768;&#21487;&#65292;&#25110;&#32773;&#26356;&#20934;&#30830;&#19968;&#28857;&#65292;&#20801;&#35768;Apache&#19982;&#36825;&#20123;&#25991;&#20214;&#19968;&#36215;&#24037;&#20316;&#12290;Apache&#24403;&#20316;&#20026;Subversion&#26381;&#21153;&#22120;&#36816;&#34892;&#26102;&#65292;&#21516;&#26679;&#38656;&#35201;&#27491;&#30830;&#30340;&#35775;&#38382;&#35768;&#21487;&#26469;&#35835;&#20889;&#20320;&#30340;Subversion&#29256;&#26412;&#24211;&#12290;</p>
               <p>&#20320;&#20250;&#38656;&#35201;&#26816;&#39564;&#26435;&#38480;&#31995;&#32479;&#30340;&#35774;&#32622;&#28385;&#36275;Subversion&#30340;&#38656;&#27714;&#65292;&#21516;&#26102;&#19981;&#20250;&#25226;&#20197;&#21069;&#30340;&#39029;&#38754;&#21644;&#33050;&#26412;&#25630;&#20081;&#12290;&#36825;&#25110;&#35768;&#24847;&#21619;&#30528;&#20462;&#25913;Subversion&#30340;&#35775;&#38382;&#35768;&#21487;&#26469;&#37197;&#21512;Apache&#26381;&#21153;&#22120;&#24050;&#32463;&#20351;&#29992;&#30340;&#24037;&#20855;&#65292;&#25110;&#32773;&#21487;&#33021;&#24847;&#21619;&#30528;&#38656;&#35201;&#20351;&#29992;<code class="filename">httpd.conf</code>&#30340;<code class="literal">User</code>&#21644;<code class="literal">Group</code>&#25351;&#31034;&#26469;&#25351;&#23450;Apache&#20316;&#20026;&#36816;&#34892;&#30340;&#29992;&#25143;&#21644;Subversion&#29256;&#26412;&#24211;&#30340;&#32452;&#12290;&#24182;&#19981;&#26159;&#21482;&#26377;&#19968;&#26465;&#27491;&#30830;&#30340;&#26041;&#24335;&#26469;&#35774;&#32622;&#35768;&#21487;&#65292;&#27599;&#20010;&#31649;&#29702;&#21592;&#37117;&#26377;&#19981;&#21516;&#30340;&#21407;&#22240;&#26469;&#20197;&#29305;&#23450;&#30340;&#26041;&#24335;&#25805;&#20316;&#65292;&#21482;&#38656;&#35201;&#24847;&#35782;&#21040;&#35768;&#21487;&#20851;&#32852;&#30340;&#38382;&#39064;&#32463;&#24120;&#22312;&#20026;Apache&#37197;&#32622;Subversion&#29256;&#26412;&#24211;&#30340;&#36807;&#31243;&#20013;&#34987;&#30095;&#24573;&#12290;
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.serverconfig.httpd.authn"></a>6.4.3.&nbsp;&#35748;&#35777;&#36873;&#39033;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>At this point, if you configured
                          <code class="filename">httpd.conf</code> to contain something such as the
                          following:
               </p><pre class="screen">
&lt;Location /svn&gt;
  DAV svn
  SVNParentPath /var/svn
&lt;/Location&gt;
</pre><p>your repository is &#8220;<span class="quote">anonymously</span>&#8221;
                          accessible to the world.  Until you configure some
                          authentication and authorization policies, the Subversion
                          repositories that you make available via the
                          <code class="literal">Location</code> directive will be generally
                          accessible to everyone.  In other words:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>&#20219;&#20309;&#20154;&#21487;&#20197;&#20351;&#29992;Subversion&#23458;&#25143;&#31471;&#26469;&#20174;&#29256;&#26412;&#24211;URL&#21462;&#20986;&#19968;&#20010;&#24037;&#20316;&#21103;&#26412;(&#25110;&#32773;&#26159;&#23427;&#30340;&#23376;&#30446;&#24405;)&#12290;</p>
                     </li>
                     <li>
                        <p>&#20219;&#20309;&#20154;&#21487;&#20197;&#22312;&#27983;&#35272;&#22120;&#36755;&#20837;&#29256;&#26412;&#24211;URL&#20132;&#20114;&#27983;&#35272;&#30340;&#26041;&#24335;&#26469;&#26597;&#30475;&#29256;&#26412;&#24211;&#30340;&#26368;&#26032;&#20462;&#35746;&#29256;&#26412;&#12290;</p>
                     </li>
                     <li>
                        <p>&#20219;&#20309;&#20154;&#21487;&#20197;&#25552;&#20132;&#21040;&#29256;&#26412;&#24211;&#12290;</p>
                     </li>
                  </ul>
               </div>
               <p>Of course, you might have already set up
                          a <code class="filename">pre-commit</code> hook script to prevent
                          commits (see <a class="xref" href="svn.reposadmin.html#svn.reposadmin.create.hooks" title="5.3.2.&nbsp;&#23454;&#29616;&#29256;&#26412;&#24211;&#38057;&#23376;">&#31532;&nbsp;5.3.2&nbsp;&#33410; &#8220;&#23454;&#29616;&#29256;&#26412;&#24211;&#38057;&#23376;&#8221;</a>).
                          But as you read on, you'll see that it's also possible to use
                          Apache's built-in methods to restrict access in specific
                          ways.
               </p>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.httpd.authn.basic"></a>6.4.3.1.&nbsp;&#37197;&#32622; HTTP &#35748;&#35777;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>&#26368;&#31616;&#21333;&#30340;&#23458;&#25143;&#31471;&#35748;&#35777;&#26041;&#24335;&#26159;&#36890;&#36807;HTTP&#22522;&#26412;&#35748;&#35777;&#26426;&#21046;&#65292;&#31616;&#21333;&#30340;&#20351;&#29992;&#29992;&#25143;&#21517;&#21644;&#23494;&#30721;&#26469;&#39564;&#35777;&#19968;&#20010;&#29992;&#25143;&#25152;&#33258;&#31216;&#30340;&#36523;&#20221;&#65292;Apache&#25552;&#20379;&#20102;&#19968;&#20010;<span class="command"><strong>htpasswd</strong></span>&#24037;&#20855;&#26469;&#31649;&#29702;&#21487;&#25509;&#21463;&#30340;&#29992;&#25143;&#21517;&#21644;&#23494;&#30721;&#65292;&#36825;&#20123;&#23601;&#26159;&#20320;&#24076;&#26395;&#36171;&#20104;Subversion&#29305;&#21035;&#26435;&#38480;&#30340;&#29992;&#25143;&#65292;&#35753;&#25105;&#20204;&#32473;Sally&#21644;Harry&#36171;&#20104;&#25552;&#20132;&#26435;&#38480;&#65292;&#39318;&#20808;&#65292;&#25105;&#20204;&#38656;&#35201;&#28155;&#21152;&#20182;&#20204;&#21040;&#23494;&#30721;&#25991;&#20214;&#65306;
                  </p><pre class="screen">
$ ### First time: use -c to create the file
$ ### Use -m to use MD5 encryption of the password, which is more secure
$ htpasswd -cm /etc/svn-auth-file harry
New password: *****
Re-type new password: *****
Adding password for user harry
$ htpasswd -m /etc/svn-auth-file sally
New password: *******
Re-type new password: *******
Adding password for user sally
$
</pre><p>Next, you need to add some more
                               <code class="filename">httpd.conf</code> directives inside your
                               <code class="literal">Location</code> block to tell Apache what to do
                               with your new password file.  The
                               <code class="literal">AuthType</code> directive specifies the type of
                               authentication system to use.  In this case, we want to
                               specify the <code class="literal">Basic</code> authentication system.
                               <code class="literal">AuthName</code> is an arbitrary name that you
                               give for the authentication domain.  Most browsers will
                               display this name in the pop-up dialog box when the browser
                               is querying the user for her name and password.  Finally,
                               use the <code class="literal">AuthUserFile</code> directive to specify
                               the location of the password file you created using
                               <span class="command"><strong>htpasswd</strong></span>.
                  </p>
                  <p>&#28155;&#21152;&#23436;&#36825;&#19977;&#20010;&#25351;&#31034;&#65292;&#20320;&#30340;<code class="literal">&lt;Location&gt;</code>&#21306;&#22359;&#19968;&#23450;&#20687;&#36825;&#20010;&#26679;&#23376;&#65306;
                  </p><pre class="screen">
&lt;Location /svn&gt;
  DAV svn
  SVNParentPath /var/svn
  AuthType Basic
  AuthName "Subversion repository"
  AuthUserFile /etc/svn-auth-file
&lt;/Location&gt;
</pre><p>&#36825;&#20010;<code class="literal">&lt;Location&gt;</code>&#21306;&#22359;&#36824;&#27809;&#26377;&#32467;&#26463;&#65292;&#36824;&#19981;&#33021;&#20570;&#20219;&#20309;&#26377;&#29992;&#30340;&#20107;&#24773;&#65292;&#23427;&#21482;&#26159;&#21578;&#35785;Apache&#24403;&#38656;&#35201;&#25480;&#26435;&#26102;&#65292;&#35201;&#21435;&#21521;Subversion&#23458;&#25143;&#31471;&#32034;&#35201;&#29992;&#25143;&#21517;&#21644;&#23494;&#30721;&#12290;&#25105;&#20204;&#36825;&#37324;&#36951;&#28431;&#30340;&#65292;&#26159;&#19968;&#20123;&#21578;&#35785;Apache<span class="emphasis"><em>&#20160;&#20040;&#26679;</em></span>&#23458;&#25143;&#31471;&#38656;&#35201;&#25480;&#26435;&#30340;&#25351;&#31034;&#12290;&#21738;&#37324;&#38656;&#35201;&#25480;&#26435;&#65292;Apache&#23601;&#20250;&#22312;&#21738;&#37324;&#35201;&#27714;&#35748;&#35777;&#65292;&#26368;&#31616;&#21333;&#30340;&#26041;&#24335;&#26159;&#20445;&#25252;&#25152;&#26377;&#30340;&#35831;&#27714;&#65292;&#28155;&#21152;<code class="literal">Require valid-user</code>&#26469;&#21578;&#35785;Apache&#20219;&#20309;&#35831;&#27714;&#38656;&#35201;&#35748;&#35777;&#30340;&#29992;&#25143;&#65306;
                  </p><pre class="screen">
&lt;Location /svn&gt;
  DAV svn
  SVNParentPath /var/svn
  AuthType Basic
  AuthName "Subversion repository"
  AuthUserFile /etc/svn-auth-file
  Require valid-user
&lt;/Location&gt;
</pre><p>&#19968;&#23450;&#35201;&#38405;&#35835;&#21518;&#38754;&#30340;&#37096;&#20998;(<a class="xref" href="svn.serverconfig.html#svn.serverconfig.httpd.authz" title="6.4.4.&nbsp;&#25480;&#26435;&#36873;&#39033;">&#31532;&nbsp;6.4.4&nbsp;&#33410; &#8220;&#25480;&#26435;&#36873;&#39033;&#8221;</a>)&#26469;&#24471;&#21040;<code class="literal">Require</code>&#30340;&#32454;&#33410;&#65292;&#21644;&#25480;&#26435;&#25919;&#31574;&#30340;&#20854;&#20182;&#35774;&#32622;&#26041;&#27861;&#12290;
                  </p>
                  <p>One word of warning: HTTP Basic Auth passwords pass in
                               very nearly plain text over the network, and thus are
                               extremely insecure.
                  </p>
                  <p>Another option is to not use Basic authentication, but to
                               use Digest authentication instead.  Digest authentication
                               allows the server to verify the client's
                               identity <span class="emphasis"><em>without</em></span> passing the plain-text
                               password over the network.  Assuming that the client and
                               server both know the user's password, they can verify that
                               the password is the same by using it to apply a hashing
                               function to a one-time bit of information.  The server sends
                               a small random-ish string to the client; the client uses the
                               user's password to hash the string; the server then looks to
                               see whether the hashed value is what it expected.
                  </p>
                  <p>Configuring Apache for Digest authentication is also
                               fairly easy, and only a small variation on our prior
                               example.  Be sure to consult Apache's documentation for full
                               details.
                  </p><pre class="screen">
&lt;Location /svn&gt;
  DAV svn
  SVNParentPath /var/svn
  AuthType Digest
  AuthName "Subversion repository"
  AuthDigestDomain /svn/
  AuthUserFile /etc/svn-auth-file
  Require valid-user
&lt;/Location&gt;
</pre><p>If you're looking for maximum security, public key
                               cryptography is the best solution.  It may be best to use
                               some sort of SSL encryption, so that clients authenticate
                               via <code class="literal">https://</code> instead
                               of <code class="literal">http://</code>; at a bare minimum, you can
                               configure Apache to use a self-signed server certificate.
                               <sup>[<a name="d0e12887" href="#ftn.d0e12887" class="footnote">44</a>]</sup>
                               Consult Apache's documentation (and OpenSSL documentation)
                               about how to do that.
                  </p>
               </div>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.httpd.authn.sslcerts"></a>6.4.3.2.&nbsp;SSL &#35777;&#20070;&#31649;&#29702;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>&#21830;&#19994;&#24212;&#29992;&#38656;&#35201;&#36234;&#36807;&#20844;&#21496;&#38450;&#28779;&#22681;&#30340;&#29256;&#26412;&#24211;&#35775;&#38382;&#65292;&#38450;&#28779;&#22681;&#38656;&#35201;&#23567;&#24515;&#30340;&#32771;&#34385;&#38750;&#35748;&#35777;&#29992;&#25143;&#8220;<span class="quote">&#21560;&#21462;</span>&#8221;&#20182;&#20204;&#30340;&#32593;&#32476;&#27969;&#37327;&#30340;&#24773;&#20917;&#65292;SSL&#35753;&#37027;&#31181;&#24418;&#24335;&#30340;&#20851;&#27880;&#26356;&#19981;&#23481;&#26131;&#23548;&#33268;&#25935;&#24863;&#25968;&#25454;&#27844;&#38706;&#12290;
                  </p>
                  <p>If a Subversion client is compiled to use OpenSSL,
                               it gains the ability to speak to an Apache server via
                               <code class="literal">https://</code> URLs.  The Neon library used by
                               the Subversion client is not only able to verify server
                               certificates, but can also supply client certificates when
                               challenged.  When the client and server have exchanged SSL
                               certificates and successfully authenticated one another, all
                               further communication is encrypted via a session key.
                  </p>
                  <p>It's beyond the scope of this book to describe how to
                               generate client and server certificates and how to
                               configure Apache to use them.  Many other books, including
                               Apache's own documentation, describe this task.  But what we
                               <span class="emphasis"><em>can</em></span> cover here is how to manage
                               server and client certificates from an ordinary Subversion
                               client.
                  </p>
                  <p>&#24403;&#36890;&#36807;<code class="literal">https://</code>&#19982;Apache&#36890;&#35759;&#26102;&#65292;&#19968;&#20010;Subversion&#23458;&#25143;&#31471;&#21487;&#20197;&#25509;&#25910;&#20004;&#31181;&#31867;&#22411;&#30340;&#20449;&#24687;&#65306;
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p>&#19968;&#20010;&#26381;&#21153;&#22120;&#35777;&#20070;</p>
                        </li>
                        <li>
                           <p>&#19968;&#20010;&#23458;&#25143;&#31471;&#35777;&#20070;&#30340;&#35201;&#27714;</p>
                        </li>
                     </ul>
                  </div>
                  <p>If the client receives a server certificate, it needs to
                               verify that it trusts the certificate: is the server really
                               who it claims to be?  The OpenSSL library does this by
                               examining the signer of the server certificate, or
                               <em class="firstterm">certificate authority</em> (CA).  If
                               OpenSSL is unable to automatically trust the CA, or if some
                               other problem occurs (such as an expired certificate or
                               hostname mismatch), the Subversion command-line client will
                               ask you whether you want to trust the server certificate
                               anyway:
                  </p><pre class="screen">
$ svn list https://host.example.com/repos/project

Error validating server certificate for 'https://host.example.com:443':
 - The certificate is not issued by a trusted authority. Use the
   fingerprint to validate the certificate manually!
Certificate information:
 - Hostname: host.example.com
 - Valid: from Jan 30 19:23:56 2004 GMT until Jan 30 19:23:56 2006 GMT
 - Issuer: CA, example.com, Sometown, California, US
 - Fingerprint: 7d:e1:a9:34:33:39:ba:6a:e9:a5:c4:22:98:7b:76:5c:92:a0:9c:7b

(R)eject, accept (t)emporarily or accept (p)ermanently?
</pre><p>This dialogue should look familiar; it's essentially the
                               same question you've probably seen coming from your web
                               browser (which is just another HTTP client like Subversion).
                               If you choose the <code class="literal">(p)</code>ermanent option, the server certificate
                               will be cached in your private runtime
                               <code class="filename">auth/</code> area in just the same way your
                               username and password are cached (see <a class="xref" href="svn.advanced.html#svn.serverconfig.netmodel.credcache" title="3.11.2.&nbsp;&#23458;&#25143;&#31471;&#20973;&#35777;&#32531;&#23384;">&#31532;&nbsp;3.11.2&nbsp;&#33410; &#8220;&#23458;&#25143;&#31471;&#20973;&#35777;&#32531;&#23384;&#8221;</a>).  If cached,
                               Subversion will automatically trust this certificate
                               in future negotiations.
                  </p>
                  <p>&#20320;&#30340;&#36816;&#34892;&#20013;<code class="filename">servers</code>&#25991;&#20214;&#20063;&#20250;&#32473;&#20320;&#33021;&#21147;&#21487;&#20197;&#35753;Subversion&#23458;&#25143;&#31471;&#33258;&#21160;&#20449;&#20219;&#29305;&#23450;&#30340;CA&#65292;&#21253;&#25324;&#20840;&#23616;&#30340;&#25110;&#26159;&#27599;&#20027;&#26426;&#20026;&#22522;&#30784;&#30340;&#65292;&#21482;&#38656;&#35201;&#35774;&#32622;<code class="literal">ssl-authority-files</code>&#20026;&#19968;&#32452;&#36887;&#21495;&#38548;&#24320;&#30340;PEM&#21152;&#23494;&#30340;CA&#35777;&#20070;&#21015;&#34920;&#65306;
                  </p><pre class="screen">
[global]
ssl-authority-files = /path/to/CAcert1.pem;/path/to/CAcert2.pem
</pre><p>&#35768;&#22810;OpenSSL&#23433;&#35013;&#21253;&#25324;&#19968;&#20123;&#39044;&#20808;&#23450;&#20041;&#22909;&#30340;&#21487;&#20197;&#26222;&#36941;&#20449;&#20219;&#30340;&#8220;<span class="quote">&#32570;&#30465;&#30340;</span>&#8221;CA&#65292;&#20026;&#20102;&#35753;Subversion&#23458;&#25143;&#31471;&#33258;&#21160;&#20449;&#20219;&#36825;&#20123;&#26631;&#20934;&#26435;&#23041;&#65292;&#35774;&#32622;<code class="literal">ssl-trust-default-ca</code>&#20026;<code class="literal">true</code>&#12290;
                  </p>
                  <p>When talking to Apache, a Subversion client might also
                               receive a challenge for a client certificate.  Apache is
                               asking the client to identify itself: is the client really
                               who it says it is?  If all goes correctly, the Subversion
                               client sends back a private certificate signed by a CA that
                               Apache trusts.  A client certificate is usually stored on
                               disk in encrypted format, protected by a local password.
                               When Subversion receives this challenge, it will ask you for
                               a path to the certificate and the password that
                               protects it:
                  </p><pre class="screen">
$ svn list https://host.example.com/repos/project

Authentication realm: https://host.example.com:443
Client certificate filename: /path/to/my/cert.p12
Passphrase for '/path/to/my/cert.p12':  ********
&#8230;
</pre><p>&#27880;&#24847;&#36825;&#20010;&#23458;&#25143;&#31471;&#35777;&#20070;&#26159;&#19968;&#20010;&#8220;<span class="quote">p12</span>&#8221;&#25991;&#20214;&#65292;&#20026;&#20102;&#35753;Subversion&#20351;&#29992;&#23458;&#25143;&#31471;&#35777;&#20070;&#65292;&#23427;&#24517;&#39035;&#26159;&#36816;&#36755;&#26631;&#20934;&#30340;PKCS#12&#26684;&#24335;&#65292;&#22823;&#22810;&#25968;&#27983;&#35272;&#22120;&#21487;&#20197;&#23548;&#20837;&#21644;&#23548;&#20986;&#36825;&#31181;&#26684;&#24335;&#30340;&#35777;&#20070;&#65292;&#21478;&#19968;&#20010;&#36873;&#25321;&#26159;&#29992;OpenSSL&#21629;&#20196;&#34892;&#24037;&#20855;&#26469;&#36716;&#21270;&#23384;&#22312;&#30340;&#35777;&#20070;&#20026;PKCS#12&#26684;&#24335;&#12290;
                  </p>
                  <p>&#20877;&#27425;&#65292;&#36816;&#34892;&#20013;<code class="filename">servers</code>&#25991;&#20214;&#20801;&#35768;&#20320;&#20026;&#27599;&#20010;&#20027;&#26426;&#33258;&#21160;&#21709;&#24212;&#36825;&#31181;&#35201;&#27714;&#65292;&#21333;&#20010;&#25110;&#20004;&#26465;&#20449;&#24687;&#21487;&#20197;&#29992;&#36816;&#34892;&#21442;&#25968;&#26469;&#25551;&#36848;&#65306;
                  </p><pre class="screen">
[groups]
examplehost = host.example.com

[examplehost]
ssl-client-cert-file = /path/to/my/cert.p12
ssl-client-cert-password = somepassword
</pre><p>&#19968;&#26086;&#20320;&#35774;&#32622;&#20102;<code class="literal">ssl-client-cert-file</code>&#21644; <code class="literal">ssl-client-cert-password</code>&#21442;&#25968;&#65292;Subversion&#23458;&#25143;&#31471;&#21487;&#20197;&#33258;&#21160;&#21709;&#24212;&#23458;&#25143;&#31471;&#35777;&#20070;&#35831;&#27714;&#32780;&#19981;&#20250;&#25171;&#25200;&#20320;&#12290;<sup>[<a name="d0e12987" href="#ftn.d0e12987" class="footnote">45</a>]</sup></p>
               </div>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.serverconfig.httpd.authz"></a>6.4.4.&nbsp;&#25480;&#26435;&#36873;&#39033;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#27492;&#21051;&#65292;&#20320;&#24050;&#32463;&#37197;&#32622;&#20102;&#35748;&#35777;&#65292;&#20294;&#26159;&#27809;&#26377;&#37197;&#32622;&#25480;&#26435;&#65292;Apache&#21487;&#20197;&#35201;&#27714;&#29992;&#25143;&#35748;&#35777;&#24182;&#19988;&#30830;&#23450;&#36523;&#20221;&#65292;&#20294;&#26159;&#24182;&#27809;&#26377;&#35828;&#26126;&#36825;&#20010;&#36523;&#20221;&#30340;&#24590;&#26679;&#20801;&#35768;&#21644;&#38480;&#21046;&#65292;&#36825;&#20010;&#37096;&#20998;&#25551;&#36848;&#20102;&#20004;&#31181;&#25511;&#21046;&#35775;&#38382;&#29256;&#26412;&#24211;&#30340;&#31574;&#30053;&#12290;</p>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.httpd.authz.blanket"></a>6.4.4.1.&nbsp;&#25972;&#20307;&#35775;&#38382;&#25511;&#21046;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>&#26368;&#31616;&#21333;&#30340;&#35775;&#38382;&#25511;&#21046;&#24418;&#24335;&#26159;&#25480;&#26435;&#29305;&#23450;&#29992;&#25143;&#20026;&#21482;&#35835;&#29256;&#26412;&#24211;&#35775;&#38382;&#25110;&#32773;&#26159;&#35835;/&#20889;&#35775;&#38382;&#29256;&#26412;&#24211;&#12290;</p>
                  <p>&#20320;&#21487;&#20197;&#36890;&#36807;&#22312;<code class="literal">&lt;Location&gt;</code>&#21306;&#22359;&#28155;&#21152;<code class="literal">Require valid-user</code>&#25351;&#31034;&#26469;&#38480;&#21046;&#25152;&#26377;&#30340;&#29256;&#26412;&#24211;&#25805;&#20316;&#65292;&#20351;&#29992;&#25105;&#20204;&#21069;&#38754;&#30340;&#20363;&#23376;&#65292;&#36825;&#24847;&#21619;&#30528;&#21482;&#26377;&#23458;&#25143;&#31471;&#21482;&#21487;&#20197;&#26159;<code class="literal">harry</code>&#25110;&#32773;<code class="literal">sally</code>&#65292;&#32780;&#19988;&#20182;&#20204;&#24517;&#39035;&#25552;&#20379;&#27491;&#30830;&#30340;&#29992;&#25143;&#21517;&#21450;&#23545;&#24212;&#23494;&#30721;&#65292;&#36825;&#26679;&#20801;&#35768;&#23545;Subversion&#29256;&#26412;&#24211;&#20570;&#20219;&#20309;&#20107;&#65306;
                  </p><pre class="screen">
&lt;Location /svn&gt;
  DAV svn
  SVNParentPath /var/svn

  # how to authenticate a user
  AuthType Basic
  AuthName "Subversion repository"
  AuthUserFile /path/to/users/file

  # only authenticated users may access the repository
  Require valid-user
&lt;/Location&gt;
</pre><p>Sometimes you don't need to run such a tight ship.  For
                               example, Subversion's own source code repository at
                               <a class="ulink" href="http://svn.collab.net/repos/svn" target="_top">http://svn.collab.net/repos/svn</a> allows anyone
                               in the world to perform read-only repository tasks (such as
                               checking out working copies and browsing the repository with
                               a web browser), but restricts all write operations to
                               authenticated users.  To do this type of selective
                               restriction, you can use the <code class="literal">Limit</code> and
                               <code class="literal">LimitExcept</code> configuration directives.
                               Like the <code class="literal">Location</code> directive, these blocks
                               have starting and ending tags, and you would nest them
                               inside your <code class="literal">&lt;Location&gt;</code>
                               block.
                  </p>
                  <p>&#22312;<code class="literal">Limit</code>&#21644;<code class="literal">LimitExcept</code>&#20013;&#20351;&#29992;&#30340;&#21442;&#25968;&#26159;&#21487;&#20197;&#34987;&#36825;&#20010;&#21306;&#22359;&#24433;&#21709;&#30340;HTTP&#35831;&#27714;&#31867;&#22411;&#65292;&#20030;&#20010;&#20363;&#23376;&#65292;&#22914;&#26524;&#20320;&#24076;&#26395;&#31105;&#27490;&#25152;&#26377;&#30340;&#29256;&#26412;&#24211;&#35775;&#38382;&#65292;&#21482;&#26159;&#20445;&#30041;&#24403;&#21069;&#25903;&#25345;&#30340;&#21482;&#35835;&#25805;&#20316;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;<code class="literal">LimitExcept</code>&#25351;&#31034;&#65292;&#24182;&#19988;&#20351;&#29992;<code class="literal">GET</code>&#65292;<code class="literal">PROPFIND</code>&#65292;<code class="literal">OPTIONS</code>&#21644;<code class="literal">REPORT</code>&#35831;&#27714;&#31867;&#22411;&#21442;&#25968;&#65292;&#28982;&#21518;&#21069;&#38754;&#25552;&#21040;&#36807;&#30340;<code class="literal">Require valid-user</code>&#25351;&#31034;&#23558;&#20250;&#22312;<code class="literal">&lt;LimitExcept&gt;</code>&#21306;&#22359;&#20013;&#32780;&#19981;&#26159;&#22312;<code class="literal">&lt;Location&gt;</code>&#21306;&#22359;&#12290;
                  </p><pre class="screen">
&lt;Location /svn&gt;
  DAV svn
  SVNParentPath /var/svn

  # how to authenticate a user
  AuthType Basic
  AuthName "Subversion repository"
  AuthUserFile /path/to/users/file

  # For any operations other than these, require an authenticated user.
  &lt;LimitExcept GET PROPFIND OPTIONS REPORT&gt;
    Require valid-user
  &lt;/LimitExcept&gt;
&lt;/Location&gt;
</pre><p>These are only a few simple examples.  For more in-depth
                               information about Apache access control and the
                               <code class="literal">Require</code> directive, take a look at the
                               <code class="literal">Security</code> section of the Apache
                               documentation's tutorials collection at <a class="ulink" href="http://httpd.apache.org/docs-2.0/misc/tutorials.html" target="_top">http://httpd.apache.org/docs-2.0/misc/tutorials.html</a>.
                  </p>
               </div>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.httpd.authz.perdir"></a>6.4.4.2.&nbsp;&#27599;&#30446;&#24405;&#35775;&#38382;&#25511;&#21046;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>&#20063;&#21487;&#20197;&#20351;&#29992;Apache&#30340;httpd&#27169;&#22359;<span class="command"><strong>mod_authz_svn</strong></span>&#26356;&#21152;&#32454;&#33268;&#30340;&#35774;&#32622;&#35775;&#38382;&#26435;&#38480;&#65292;&#36825;&#20010;&#27169;&#22359;&#25910;&#38598;&#23458;&#25143;&#31471;&#20256;&#36882;&#36807;&#26469;&#30340;&#19981;&#21516;&#30340;&#26214;&#28073;&#30340;URL&#20449;&#24687;&#65292;&#35810;&#38382;<span class="command"><strong>mod_dav_svn</strong></span>&#26469;&#35299;&#30721;&#65292;&#28982;&#21518;&#26681;&#25454;&#22312;&#37197;&#32622;&#25991;&#20214;&#23450;&#20041;&#30340;&#35775;&#38382;&#25919;&#31574;&#26469;&#35009;&#20915;&#35831;&#27714;&#12290;
                  </p>
                  <p>&#22914;&#26524;&#20320;&#20174;&#28304;&#20195;&#30721;&#21019;&#24314;Subversion&#65292;<span class="command"><strong>mod_authz_svn</strong></span>&#20250;&#33258;&#21160;&#38468;&#21152;&#21040;<span class="command"><strong>mod_dav_svn</strong></span>&#65292;&#35768;&#22810;&#20108;&#36827;&#21046;&#20998;&#21457;&#29256;&#26412;&#20063;&#20250;&#33258;&#21160;&#23433;&#35013;&#65292;&#20026;&#20102;&#39564;&#35777;&#23427;&#26159;&#23433;&#35013;&#27491;&#30830;&#65292;&#30830;&#23450;&#23427;&#26159;&#22312;<code class="filename">httpd.conf</code>&#30340;<code class="literal">LoadModule</code>&#25351;&#31034;&#20013;&#30340;<span class="command"><strong>mod_dav_svn</strong></span>&#21518;&#38754;&#65306;
                  </p><pre class="screen">
LoadModule dav_module         modules/mod_dav.so
LoadModule dav_svn_module     modules/mod_dav_svn.so
LoadModule authz_svn_module   modules/mod_authz_svn.so
</pre><p>&#20026;&#20102;&#28608;&#27963;&#36825;&#20010;&#27169;&#22359;&#65292;&#20320;&#38656;&#35201;&#37197;&#32622;&#20320;&#30340;<code class="literal">Location</code>&#21306;&#22359;&#30340;<code class="literal">AuthzSVNAccessFile</code>&#25351;&#31034;&#65292;&#25351;&#23450;&#20445;&#23384;&#36335;&#24452;&#20013;&#30340;&#29256;&#26412;&#24211;&#35775;&#38382;&#25919;&#31574;&#30340;&#25991;&#20214;&#12290;(&#19968;&#20250;&#20799;&#25105;&#20204;&#23558;&#20250;&#35752;&#35770;&#36825;&#20010;&#25991;&#20214;&#30340;&#26684;&#24335;&#12290;)
                  </p>
                  <p>Apache&#38750;&#24120;&#30340;&#28789;&#27963;&#65292;&#20320;&#21487;&#20197;&#20174;&#19977;&#31181;&#27169;&#24335;&#37324;&#36873;&#25321;&#19968;&#31181;&#26469;&#37197;&#32622;&#20320;&#30340;&#21306;&#22359;&#65292;&#20316;&#20026;&#24320;&#22987;&#65292;&#20320;&#36873;&#25321;&#19968;&#31181;&#22522;&#26412;&#30340;&#37197;&#32622;&#27169;&#24335;&#12290;(&#19979;&#38754;&#30340;&#20363;&#23376;&#38750;&#24120;&#31616;&#21333;&#65307;&#35265;Apache&#33258;&#24049;&#30340;&#25991;&#26723;&#20013;&#30340;&#35748;&#35777;&#21644;&#25480;&#26435;&#36873;&#39033;&#26469;&#26597;&#30475;&#26356;&#22810;&#30340;&#32454;&#33410;&#12290;)</p>
                  <p>&#26368;&#31616;&#21333;&#30340;&#21306;&#22359;&#26159;&#20801;&#35768;&#20219;&#20309;&#20154;&#21487;&#20197;&#35775;&#38382;&#65292;&#22312;&#36825;&#20010;&#22330;&#26223;&#37324;&#65292;Apache&#20915;&#19981;&#20250;&#21457;&#36865;&#35748;&#35777;&#35831;&#27714;&#65292;&#25152;&#26377;&#30340;&#29992;&#25143;&#20316;&#20026;&#8220;<span class="quote">&#21311;&#21517;</span>&#8221;&#23545;&#24453;(&#35265;<a class="xref" href="svn.serverconfig.html#svn.serverconfig.httpd.authz.perdir.ex-1" title="&#20363;&nbsp;6.1.&nbsp;&#21311;&#21517;&#35775;&#38382;&#30340;&#37197;&#32622;&#26679;&#20363;">&#20363;&nbsp;6.1 &#8220;&#21311;&#21517;&#35775;&#38382;&#30340;&#37197;&#32622;&#26679;&#20363;&#8221;</a>&#12290;)
                  </p>
                  <div class="example"><a name="svn.serverconfig.httpd.authz.perdir.ex-1"></a><p class="title"><b>&#20363;&nbsp;6.1.&nbsp;&#21311;&#21517;&#35775;&#38382;&#30340;&#37197;&#32622;&#26679;&#20363;</b></p>
                     <div class="example-contents"><pre class="programlisting">
&lt;Location /repos&gt;
  DAV svn
  SVNParentPath /var/svn

  # our access control policy
  AuthzSVNAccessFile /path/to/access/file
&lt;/Location&gt;
          </pre></div>
                  </div><br class="example-break"><p>&#22312;&#21478;&#19968;&#20010;&#26497;&#31471;&#65292;&#20320;&#21487;&#20197;&#37197;&#32622;&#20026;&#25298;&#32477;&#25152;&#26377;&#20154;&#30340;&#35748;&#35777;&#65292;&#25152;&#26377;&#23458;&#25143;&#31471;&#24517;&#39035;&#25552;&#20379;&#35777;&#26126;&#33258;&#24049;&#36523;&#20221;&#30340;&#35777;&#20070;&#65292;&#20320;&#36890;&#36807;<code class="literal">Require valid-user</code>&#25351;&#31034;&#26469;&#38459;&#27490;&#26080;&#26465;&#20214;&#30340;&#35748;&#35777;&#65292;&#24182;&#19988;&#23450;&#20041;&#19968;&#31181;&#35748;&#35777;&#30340;&#25163;&#27573;&#12290;(&#35265;<a class="xref" href="svn.serverconfig.html#svn.serverconfig.httpd.authz.perdir.ex-2" title="&#20363;&nbsp;6.2.&nbsp;&#35748;&#35777;&#35775;&#38382;&#30340;&#37197;&#32622;&#26679;&#20363;">&#20363;&nbsp;6.2 &#8220;&#35748;&#35777;&#35775;&#38382;&#30340;&#37197;&#32622;&#26679;&#20363;&#8221;</a>&#12290;)
                  </p>
                  <div class="example"><a name="svn.serverconfig.httpd.authz.perdir.ex-2"></a><p class="title"><b>&#20363;&nbsp;6.2.&nbsp;&#35748;&#35777;&#35775;&#38382;&#30340;&#37197;&#32622;&#26679;&#20363;</b></p>
                     <div class="example-contents"><pre class="programlisting">
&lt;Location /repos&gt;
  DAV svn
  SVNParentPath /var/svn

  # our access control policy
  AuthzSVNAccessFile /path/to/access/file

  # only authenticated users may access the repository
  Require valid-user

  # how to authenticate a user
  AuthType Basic
  AuthName "Subversion repository"
  AuthUserFile /path/to/users/file
&lt;/Location&gt;
          </pre></div>
                  </div><br class="example-break"><p>&#31532;&#19977;&#31181;&#27969;&#34892;&#30340;&#27169;&#24335;&#26159;&#20801;&#35768;&#35748;&#35777;&#21644;&#21311;&#21517;&#29992;&#25143;&#30340;&#32452;&#21512;&#65292;&#20030;&#20010;&#20363;&#23376;&#65292;&#35768;&#22810;&#31649;&#29702;&#21592;&#24076;&#26395;&#20801;&#35768;&#21311;&#21517;&#29992;&#25143;&#35835;&#21462;&#29305;&#23450;&#30340;&#29256;&#26412;&#24211;&#36335;&#24452;&#65292;&#20294;&#24076;&#26395;&#21482;&#26377;&#35748;&#35777;&#29992;&#25143;&#21487;&#20197;&#35835;(&#25110;&#32773;&#20889;)&#26356;&#22810;&#25935;&#24863;&#30340;&#21306;&#22495;&#65292;&#22312;&#36825;&#20010;&#35774;&#32622;&#37324;&#65292;&#25152;&#26377;&#30340;&#29992;&#25143;&#24320;&#22987;&#26102;&#29992;&#21311;&#21517;&#29992;&#25143;&#35775;&#38382;&#29256;&#26412;&#24211;&#65292;&#22914;&#26524;&#20320;&#30340;&#35775;&#38382;&#25511;&#21046;&#31574;&#30053;&#22312;&#20219;&#20309;&#26102;&#20505;&#35201;&#27714;&#19968;&#20010;&#30495;&#23454;&#30340;&#29992;&#25143;&#21517;&#65292;Apache&#23558;&#20250;&#35201;&#27714;&#35748;&#35777;&#23458;&#25143;&#31471;&#65292;&#20026;&#27492;&#65292;&#20320;&#21487;&#20197;&#21516;&#26102;&#20351;&#29992;<code class="literal">Satisfy Any</code>&#21644;<code class="literal">Require valid-user</code>&#25351;&#31034;&#12290;(&#35265;<a class="xref" href="svn.serverconfig.html#svn.serverconfig.httpd.authz.perdir.ex-3" title="&#20363;&nbsp;6.3.&nbsp;&#28151;&#21512;&#35748;&#35777;/&#21311;&#21517;&#35775;&#38382;&#30340;&#37197;&#32622;&#26679;&#20363;">&#20363;&nbsp;6.3 &#8220;&#28151;&#21512;&#35748;&#35777;/&#21311;&#21517;&#35775;&#38382;&#30340;&#37197;&#32622;&#26679;&#20363;&#8221;</a>&#12290;)
                  </p>
                  <div class="example"><a name="svn.serverconfig.httpd.authz.perdir.ex-3"></a><p class="title"><b>&#20363;&nbsp;6.3.&nbsp;&#28151;&#21512;&#35748;&#35777;/&#21311;&#21517;&#35775;&#38382;&#30340;&#37197;&#32622;&#26679;&#20363;</b></p>
                     <div class="example-contents"><pre class="programlisting">
&lt;Location /repos&gt;
  DAV svn
  SVNParentPath /var/svn

  # our access control policy
  AuthzSVNAccessFile /path/to/access/file

  # try anonymous access first, resort to real
  # authentication if necessary.
  Satisfy Any
  Require valid-user

  # how to authenticate a user
  AuthType Basic
  AuthName "Subversion repository"
  AuthUserFile /path/to/users/file
&lt;/Location&gt;
          </pre></div>
                  </div><br class="example-break"><p>Once you've settled on one of these three
                               basic <code class="filename">httpd.conf</code> templates, you need to
                               create your file containing access rules for particular
                               paths within the repository.  We describe this later in
                               this chapter, in
                               <a class="xref" href="svn.serverconfig.html#svn.serverconfig.pathbasedauthz" title="6.5.&nbsp;&#22522;&#20110;&#36335;&#24452;&#30340;&#25480;&#26435;">&#31532;&nbsp;6.5&nbsp;&#33410; &#8220;&#22522;&#20110;&#36335;&#24452;&#30340;&#25480;&#26435;&#8221;</a>.
                  </p>
               </div>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.httpd.authz.pathauthzoff"></a>6.4.4.3.&nbsp;&#31105;&#29992;&#22522;&#20110;&#36335;&#24452;&#30340;&#26816;&#26597;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>The <span class="command"><strong>mod_dav_svn</strong></span> module goes through a
                               lot of work to make sure that data you've marked
                               &#8220;<span class="quote">unreadable</span>&#8221; doesn't get accidentally leaked.
                               This means it needs to closely monitor all of the paths
                               and file-contents returned by commands such as <span class="command"><strong>svn
                                     checkout</strong></span> and <span class="command"><strong>svn update</strong></span>.
                               If these commands encounter a path that isn't
                               readable according to some authorization policy, the
                               path is typically omitted altogether.  In the case of
                               history or rename tracing&#8212;for example, running a command such
                               as <strong class="userinput"><code>svn cat -r OLD foo.c</code></strong> on a file that
                               was renamed long ago&#8212;the rename tracking will simply
                               halt if one of the object's former names is determined to be
                               read-restricted.
                  </p>
                  <p>All of this path checking can sometimes be quite
                               expensive, especially in the case of <span class="command"><strong>svn
                                     log</strong></span>.  When retrieving a list of revisions, the
                               server looks at every changed path in each revision and
                               checks it for readability.  If an unreadable path is
                               discovered, it's omitted from the list of the
                               revision's changed paths (normally seen with
                               the <code class="option">--verbose</code> option), and the whole log
                               message is suppressed.  Needless to say, this can be
                               time-consuming on revisions that affect a large number of
                               files.  This is the cost of security: even if you haven't
                               configured a module such as
                               <span class="command"><strong>mod_authz_svn</strong></span> at all, the
                               <span class="command"><strong>mod_dav_svn</strong></span> module is still asking Apache
                               <span class="command"><strong>httpd</strong></span> to run authorization checks on
                               every path.  The <span class="command"><strong>mod_dav_svn</strong></span> module has
                               no idea what authorization modules have been installed, so
                               all it can do is ask Apache to invoke whatever might be
                               present.
                  </p>
                  <p>On the other hand, there's also an escape hatch of
                               sorts, which allows you to trade security features for
                               speed.  If you're not enforcing any sort of per-directory
                               authorization (i.e., not using
                               <span class="command"><strong>mod_authz_svn</strong></span> or similar module),
                               you can disable all of this path checking.  In your
                               <code class="filename">httpd.conf</code> file, use the
                               <code class="literal">SVNPathAuthz</code> directive as shown in
                               <a class="xref" href="svn.serverconfig.html#svn.serverconfig.httpd.authz.pathauthzoff.ex-1" title="&#20363;&nbsp;6.4.&nbsp;&#31105;&#29992;&#25152;&#26377;&#30340;&#36335;&#24452;&#26816;&#26597;">&#20363;&nbsp;6.4 &#8220;&#31105;&#29992;&#25152;&#26377;&#30340;&#36335;&#24452;&#26816;&#26597;&#8221;</a>.
                             
                  </p>
                  <div class="example"><a name="svn.serverconfig.httpd.authz.pathauthzoff.ex-1"></a><p class="title"><b>&#20363;&nbsp;6.4.&nbsp;&#31105;&#29992;&#25152;&#26377;&#30340;&#36335;&#24452;&#26816;&#26597;</b></p>
                     <div class="example-contents"><pre class="programlisting">
&lt;Location /repos&gt;
  DAV svn
  SVNParentPath /var/svn

  SVNPathAuthz off
&lt;/Location&gt;
          </pre></div>
                  </div><br class="example-break"><p>The <code class="literal">SVNPathAuthz</code> directive
                               is &#8220;<span class="quote">on</span>&#8221; by default.  When
                               set to &#8220;<span class="quote">off,</span>&#8221; all path-based authorization
                               checking is disabled;
                               <span class="command"><strong>mod_dav_svn</strong></span> stops invoking authorization
                               checks on every path it discovers.
                  </p>
               </div>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.serverconfig.httpd.extra"></a>6.4.5.&nbsp;&#39069;&#22806;&#30340;&#31958;&#26524;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#25105;&#20204;&#24050;&#32463;&#35206;&#30422;&#20102;&#20851;&#20110;&#35748;&#35777;&#21644;&#25480;&#26435;&#30340;Apache&#21644; <span class="command"><strong>mod_dav_svn</strong></span>&#30340;&#22823;&#22810;&#25968;&#36873;&#39033;&#65292;&#20294;&#26159;Apache&#36824;&#25552;&#20379;&#20102;&#35768;&#22810;&#24456;&#22909;&#30340;&#29305;&#24615;&#12290;
               </p>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.httpd.extra.browsing"></a>6.4.5.1.&nbsp;&#29256;&#26412;&#24211;&#27983;&#35272;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>&#20351;&#29992;Apache/WebDAV&#37197;&#32622;Subversion&#29256;&#26412;&#24211;&#26102;&#19968;&#20010;&#38750;&#24120;&#26377;&#29992;&#30340;&#22909;&#22788;&#26159;&#21487;&#20197;&#29992;&#26222;&#36890;&#30340;&#27983;&#35272;&#22120;&#23519;&#30475;&#26368;&#26032;&#30340;&#29256;&#26412;&#24211;&#25991;&#20214;&#65292;&#22240;&#20026;Subversion&#20351;&#29992;URL&#26469;&#37492;&#21035;&#29256;&#26412;&#24211;&#29256;&#26412;&#21270;&#30340;&#36164;&#28304;&#65292;&#29256;&#26412;&#24211;&#20351;&#29992;&#30340;HTTP&#20026;&#22522;&#30784;&#30340;URL&#20063;&#21487;&#20197;&#30452;&#25509;&#36755;&#20837;&#21040;Web&#27983;&#35272;&#22120;&#20013;&#65292;&#20320;&#30340;&#27983;&#35272;&#22120;&#20250;&#21457;&#36865;&#19968;&#20010;<code class="literal">GET</code>&#35831;&#27714;&#21040;URL&#65292;&#26681;&#25454;&#35775;&#38382;&#30340;URL&#26159;&#25351;&#21521;&#19968;&#20010;&#29256;&#26412;&#21270;&#30340;&#30446;&#24405;&#36824;&#26159;&#25991;&#20214;&#65292;mod_dav_svn&#20250;&#36127;&#36131;&#21015;&#20986;&#30446;&#24405;&#21015;&#34920;&#25110;&#32773;&#26159;&#25991;&#20214;&#20869;&#23481;&#12290;
                  </p>
                  <p>&#22240;&#20026;URL&#19981;&#33021;&#30830;&#23450;&#20320;&#25152;&#24076;&#26395;&#30475;&#21040;&#30340;&#36164;&#28304;&#30340;&#29256;&#26412;&#65292;<span class="command"><strong>mod_dav_svn</strong></span>&#20250;&#19968;&#30452;&#36820;&#22238;&#26368;&#26032;&#30340;&#29256;&#26412;&#65292;&#36825;&#26679;&#20250;&#26377;&#19968;&#20123;&#32654;&#22937;&#30340;&#21103;&#20316;&#29992;&#65292;&#20320;&#21487;&#20197;&#30452;&#25509;&#25226;Subversion&#30340;URL&#20256;&#36882;&#32473;&#25991;&#26723;&#20316;&#20026;&#24341;&#29992;&#65292;&#36825;&#20123;URL&#20250;&#19968;&#30452;&#25351;&#21521;&#25991;&#26723;&#26368;&#26032;&#30340;&#26448;&#26009;&#65292;&#24403;&#28982;&#65292;&#20320;&#20063;&#21487;&#20197;&#22312;&#21035;&#30340;&#32593;&#31449;&#20316;&#20026;&#36229;&#38142;&#20351;&#29992;&#36825;&#20123;URL&#12290;
                  </p>
                  <div class="sidebar">
                     <p class="title"><b>&#25105;&#21487;&#20197;&#30475;&#21040;&#32769;&#30340;&#20462;&#35746;&#29256;&#26412;&#21527;&#65311;</b></p>
                     <p>&#36890;&#36807;&#19968;&#20010;&#26222;&#36890;&#30340;&#27983;&#35272;&#22120;&#65311;&#19968;&#21477;&#35805;&#65306;&#19981;&#21487;&#20197;&#65292;&#33267;&#23569;&#26159;&#24403;&#20320;&#21482;&#20351;&#29992;<span class="command"><strong>mod_dav_svn</strong></span>&#20316;&#20026;&#21807;&#19968;&#30340;&#24037;&#20855;&#26102;&#12290;
                     </p>
                     <p>&#20320;&#30340;Web&#27983;&#35272;&#22120;&#21482;&#20250;&#35828;&#26222;&#36890;&#30340;HTTP&#65292;&#20063;&#23601;&#26159;&#35828;&#23427;&#21482;&#20250;GET&#20844;&#20849;&#30340;URL&#65292;&#36825;&#20010;URL&#20195;&#34920;&#20102;&#26368;&#26032;&#29256;&#26412;&#30340;&#25991;&#20214;&#21644;&#30446;&#24405;&#65292;&#26681;&#25454;WebDAV/DeltaV&#35268;&#33539;&#65292;&#27599;&#31181;&#26381;&#21153;&#22120;&#23450;&#20041;&#20102;&#19968;&#31181;&#31169;&#26377;&#30340;URL&#35821;&#27861;&#26469;&#20195;&#34920;&#32769;&#30340;&#36164;&#28304;&#30340;&#29256;&#26412;&#65292;&#36825;&#20010;&#35821;&#27861;&#23545;&#23458;&#25143;&#31471;&#26159;&#19981;&#36879;&#26126;&#30340;&#65292;&#20026;&#20102;&#24471;&#21040;&#32769;&#30340;&#29256;&#26412;&#65292;&#19968;&#20010;&#23458;&#25143;&#31471;&#24517;&#39035;&#36890;&#36807;&#19968;&#31181;&#35268;&#33539;&#36807;&#31243;&#26469;&#8220;<span class="quote">&#21457;&#29616;</span>&#8221;&#27491;&#30830;&#30340;URL&#65307;&#36825;&#20010;&#36807;&#31243;&#21253;&#25324;&#25191;&#34892;&#19968;&#31995;&#21015;WebDAV PROPFIND&#35831;&#27714;&#21644;&#29702;&#35299;DeltaV&#27010;&#24565;&#65292;&#36825;&#20123;&#20107;&#24773;&#19968;&#33324;&#26159;&#20320;&#30340;web&#27983;&#35272;&#22120;&#20570;&#19981;&#20102;&#30340;&#12290;
                     </p>
                     <p>So, to answer the question, one obvious way to see
                                    older revisions of files and directories is by passing the
                                    <code class="option">--revision</code> (<code class="option">-r</code>) argument
                                    to the <span class="command"><strong>svn list</strong></span> and <span class="command"><strong>svn
                                          cat</strong></span> commands.  To browse old revisions with your
                                    web browser, however, you can use third-party software.  A
                                    good example of this is ViewVC (<a class="ulink" href="http://viewvc.tigris.org/" target="_top">http://viewvc.tigris.org/</a>).  ViewVC was originally
                                    written to display CVS repositories through the Web,
                                    <sup>[<a name="d0e13293" href="#ftn.d0e13293" class="footnote">46</a>]</sup>
                                    and the latest releases are able to understand Subversion
                                    repositories as well.
                     </p>
                  </div>
                  <div class="sect4" lang="zh-cn">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h5 class="title"><a name="svn.serverconfig.httpd.extra.browsing.mimetype"></a>6.4.5.1.1.&nbsp;&#27491;&#30830;&#30340; MIME &#31867;&#22411;
                              </h5>
                           </div>
                        </div>
                     </div>
                     <p>&#24403;&#27983;&#35272;Subversion&#29256;&#26412;&#24211;&#26102;&#65292;web&#27983;&#35272;&#22120;&#36890;&#36807;&#20174;Apache&#30340;HTTP GET&#36820;&#22238;&#20869;&#23481;&#20013;&#26597;&#30475;<code class="literal">Content-Type:</code>&#22836;&#21487;&#20197;&#30693;&#36947;&#22914;&#20309;&#28210;&#26579;&#25991;&#20214;&#30340;&#32447;&#32034;&#65292;&#36825;&#20010;&#20540;&#26159;&#19968;&#31181;MIME&#31867;&#22411;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;Apache&#21578;&#35785;&#27983;&#35272;&#22120;&#25152;&#26377;&#30340;&#29256;&#26412;&#24211;&#25991;&#20214;&#37117;&#26159;&#32570;&#30465;&#30340;MIME&#31867;&#22411;&#65292;&#36890;&#24120;&#26159;<code class="literal">text/plain</code>&#65292;&#36825;&#26679;&#26377;&#26102;&#20505;&#20250;&#35753;&#20154;&#27822;&#20007;&#65292;&#22914;&#26524;&#19968;&#20010;&#29992;&#25143;&#24076;&#26395;&#29256;&#26412;&#24211;&#25991;&#20214;&#33021;&#22815;&#26356;&#26377;&#24847;&#20041;&#30340;&#28210;&#26579;&#8212;&#20363;&#22914;&#19968;&#20010;<code class="filename">foo.html</code>&#65292;&#22312;&#27983;&#35272;&#26102;&#26368;&#22909;&#33021;&#22815;&#25353;&#29031;HTML&#26041;&#24335;&#28210;&#26579;&#12290;
                     </p>
                     <p>To make this happen, you need only to make sure that
                                    your files have the
                                    proper <code class="literal">svn:mime-type</code> set.  We discuss this 
                                    in more detail in
                                    <a class="xref" href="svn.advanced.html#svn.advanced.props.special.mime-type" title="3.3.1.&nbsp;&#25991;&#20214;&#20869;&#23481;&#31867;&#22411;">&#31532;&nbsp;3.3.1&nbsp;&#33410; &#8220;&#25991;&#20214;&#20869;&#23481;&#31867;&#22411;&#8221;</a>,
                                    and you can even configure your client to automatically
                                    attach proper <code class="literal">svn:mime-type</code> properties
                                    to files entering the repository for the first time; see
                                    <a class="xref" href="svn.advanced.html#svn.advanced.props.auto" title="3.2.4.&nbsp;&#33258;&#21160;&#35774;&#32622;&#23646;&#24615;">&#31532;&nbsp;3.2.4&nbsp;&#33410; &#8220;&#33258;&#21160;&#35774;&#32622;&#23646;&#24615;&#8221;</a>.
                     </p>
                     <p>So in our example, if one were to set
                                  the <code class="literal">svn:mime-type</code> property
                                  to <code class="literal">text/html</code> on
                                  file <code class="filename">foo.html</code>, Apache would
                                  properly tell your web browser to render the file as HTML.
                                  One could also attach proper <code class="literal">image/*</code>
                                  MIME-type properties to image files and ultimately get an
                                  entire web site to be viewable directly from a repository!
                                  There's generally no problem with this, as long as the web
                                  site doesn't contain any dynamically generated
                                  content.
                     </p>
                  </div>
                  <div class="sect4" lang="zh-cn">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h5 class="title"><a name="svn.serverconfig.httpd.extra.browsing.xslt"></a>6.4.5.1.2.&nbsp;&#23450;&#21046;&#22806;&#35266;
                              </h5>
                           </div>
                        </div>
                     </div>
                     <p>&#20320;&#36890;&#24120;&#20250;&#22312;&#29256;&#26412;&#21270;&#30340;&#25991;&#20214;&#30340;URL&#20043;&#22806;&#24471;&#21040;&#26356;&#22810;&#22320;&#29992;&#22788;&#8212;&#27605;&#31455;&#37027;&#37324;&#26159;&#26377;&#36259;&#30340;&#20869;&#23481;&#23384;&#22312;&#30340;&#22320;&#26041;&#65292;&#20294;&#26159;&#20320;&#20250;&#20598;&#23572;&#27983;&#35272;&#19968;&#20010;Subversion&#30340;&#30446;&#24405;&#21015;&#34920;&#65292;&#20320;&#20250;&#24456;&#24555;&#21457;&#29616;&#23637;&#31034;&#21015;&#34920;&#29983;&#25104;&#30340;HTML&#38750;&#24120;&#22522;&#26412;&#65292;&#24182;&#19988;&#19968;&#23450;&#27809;&#26377;&#22312;&#22806;&#35266;&#19978;(&#25110;&#32773;&#26159;&#26377;&#36259;&#19978;)&#19979;&#21151;&#22827;&#65292;&#20026;&#20102;&#33258;&#23450;&#20041;&#36825;&#20123;&#30446;&#24405;&#26174;&#31034;&#65292;Subversion&#25552;&#20379;&#20102;&#19968;&#20010;XML&#30446;&#24405;&#29305;&#24615;&#65292;&#19968;&#20010;&#21333;&#29420;&#30340;<code class="literal">SVNIndexXSLT</code>&#25351;&#31034;&#22312;&#20320;&#30340;<code class="filename">httpd.conf</code>&#25991;&#20214;&#29256;&#26412;&#24211;&#30340;<code class="literal">Location</code>&#22359;&#37324;&#65292;&#23427;&#23558;&#20250;&#25351;&#23548;mod_dav_svn&#22312;&#26174;&#31034;&#30446;&#24405;&#21015;&#34920;&#30340;&#26102;&#20505;&#29983;&#25104;XML&#36755;&#20986;&#65292;&#24182;&#19988;&#24341;&#29992;&#20320;&#36873;&#25321;&#30340;XSLT&#26679;&#24335;&#34920;&#25991;&#20214;&#65306;
                     </p><pre class="screen">
&lt;Location /svn&gt;
  DAV svn
  SVNParentPath /var/svn
  SVNIndexXSLT "/svnindex.xsl"
  &#8230;
&lt;/Location&gt;
</pre><p>Using the <code class="literal">SVNIndexXSLT</code> directive and
                                   a creative XSLT stylesheet, you can make your directory
                                   listings match the color schemes and imagery used in other
                                   parts of your web site.  Or, if you'd prefer, you can use
                                   the sample stylesheets provided in the Subversion source
                                   distribution's <code class="filename">tools/xslt/</code> directory.
                                   Keep in mind that the path provided to the
                                   <code class="literal">SVNIndexXSLT</code> directory is actually a URL
                                   path&#8212;browsers need to be able to read your
                                   stylesheets to make use of them!
                     </p>
                  </div>
                  <div class="sect4" lang="zh-cn">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h5 class="title"><a name="svn.serverconfig.httpd.extra.browsing.reposlisting"></a>6.4.5.1.3.&nbsp;&#21015;&#20986;&#29256;&#26412;&#24211;
                              </h5>
                           </div>
                        </div>
                     </div>
                     <p>&#22914;&#26524;&#20320;&#36890;&#36807; <code class="literal">SVNParentPath</code>&#25351;&#31034;&#20174;&#19968;&#20010;URL&#32500;&#25252;&#19968;&#32452;&#29256;&#26412;&#24211;&#65292;&#20063;&#21487;&#20197;&#35753;Apache&#22312;&#27983;&#35272;&#22120;&#26174;&#31034;&#25152;&#26377;&#23384;&#22312;&#30340;&#29256;&#26412;&#24211;&#65292;&#21482;&#38656;&#35201;&#36890;&#36807;<code class="literal">SVNListParentPath</code>&#25351;&#31034;&#28608;&#27963;&#65306;
                     </p><pre class="screen">
&lt;Location /svn&gt;
  DAV svn
  SVNParentPath /var/svn
  SVNListParentPath on
  &#8230;
&lt;/Location&gt;
</pre><p>&#22914;&#26524;&#19968;&#20010;&#29992;&#25143;&#23558;&#27983;&#35272;&#22120;&#25351;&#21521;<code class="literal">http://host.example.com/svn/</code>&#65292;&#22905;&#19968;&#23450;&#20250;&#30475;&#21040;<code class="filename">/var/svn</code>&#19979;&#25152;&#26377;&#30340;Subversion&#29256;&#26412;&#24211;&#65292;&#24456;&#26126;&#26174;&#36825;&#26159;&#19968;&#20214;&#23433;&#20840;&#38382;&#39064;&#65292;&#25152;&#20197;&#36825;&#20010;&#29305;&#24615;&#40664;&#35748;&#26159;&#20851;&#38381;&#30340;&#12290;
                     </p>
                  </div>
               </div>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.httpd.extra.logging"></a>6.4.5.2.&nbsp;Apache &#26085;&#24535;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>Because Apache is an HTTP server at heart, it contains
                               fantastically flexible logging features.  It's beyond the
                               scope of this book to discuss all of the ways logging can be
                               configured, but we should point out that even the most
                               generic <code class="filename">httpd.conf</code> file will cause
                               Apache to produce two logs:
                               <code class="filename">error_log</code>
                               and <code class="filename">access_log</code>.  These logs may appear
                               in different places, but are typically created in the
                               logging area of your Apache installation.  (On Unix, they
                               often live
                               in <code class="filename">/usr/local/apache2/logs/</code>.)
                  </p>
                  <p><code class="filename">error_log</code>&#25551;&#36848;&#20102;&#25152;&#26377;Apache&#36816;&#34892;&#20013;&#30340;&#20869;&#37096;&#38169;&#35823;&#65292;<code class="filename">access_log</code>&#35760;&#24405;&#20102;Apache&#25509;&#25910;&#21040;&#30340;&#25152;&#26377;HTTP&#35831;&#27714;&#65292;&#36825;&#20010;&#26085;&#24535;&#24456;&#23481;&#26131;&#26597;&#30475;&#65292;&#20363;&#22914;&#21253;&#25324;Subversion&#23458;&#25143;&#31471;&#30340;IP&#22320;&#22336;&#65292;&#21738;&#20123;&#29992;&#25143;&#27491;&#30830;&#35748;&#35777;&#21644;&#35831;&#27714;&#25104;&#21151;&#36824;&#26159;&#22833;&#36133;&#12290;
                  </p>
                  <p>&#19981;&#24184;&#30340;&#26159;&#65292;&#22240;&#20026;HTTP&#26159;&#26080;&#29366;&#24577;&#21327;&#35758;&#65292;&#21363;&#20351;&#26368;&#31616;&#21333;&#30340;Subversion&#23458;&#25143;&#31471;&#25805;&#20316;&#20250;&#20135;&#29983;&#22810;&#20010;&#32593;&#32476;&#35831;&#27714;&#65292;&#24456;&#38590;&#36890;&#36807;&#26597;&#30475;<code class="filename">access_log</code>&#26469;&#30830;&#23450;&#29992;&#25143;&#30340;&#25805;&#20316;&#8212;&#22823;&#22810;&#25968;&#25805;&#20316;&#30475;&#36215;&#26469;&#20687;&#26159;&#19968;&#31995;&#21015;&#31070;&#31192;&#30340;<code class="literal">PROPPATCH</code>&#12289;<code class="literal">GET</code>&#12289;<code class="literal">PUT</code>&#21644;<code class="literal">REPORT</code>&#35831;&#27714;&#12290;&#26356;&#31967;&#31957;&#30340;&#26159;&#65292;&#35768;&#22810;&#23458;&#25143;&#27573;&#25805;&#20316;&#20250;&#21457;&#36865;&#20960;&#20046;&#23436;&#20840;&#30456;&#21516;&#30340;&#19968;&#31995;&#21015;&#35831;&#27714;&#65292;&#25152;&#20197;&#26356;&#21152;&#38590;&#20197;&#21306;&#20998;&#12290;
                  </p>
                  <p><code class="literal">mod_dav_svn</code>&#20250;&#25104;&#20026;&#19968;&#20010;&#36741;&#21161;&#65292;&#36890;&#36807;&#28608;&#27963;&#8220;<span class="quote">operational logging</span>&#8221;&#23646;&#24615;&#65292;&#20320;&#21487;&#20197;&#21578;&#35785;<code class="literal">mod_dav_svn</code>&#21019;&#24314;&#21478;&#22806;&#30340;&#26085;&#24535;&#25991;&#20214;&#65292;&#26469;&#25551;&#36848;&#20320;&#30340;&#23458;&#25143;&#31471;&#37117;&#20570;&#20102;&#21738;&#20123;&#39640;&#32423;&#25805;&#20316;&#12290;
                  </p>
                  <p>To do this, you need to make use of
                               Apache's <code class="literal">CustomLog</code> directive (which is
                               explained in more detail in Apache's own documentation).
                               Be sure to invoke this
                               directive <span class="emphasis"><em>outside</em></span> your
                               Subversion <code class="literal">Location</code> block:
                  </p><pre class="screen">
&lt;Location /svn&gt;
  DAV svn
  &#8230;
&lt;/Location&gt;

CustomLog logs/svn_logfile "%t %u %{SVN-ACTION}e" env=SVN-ACTION
</pre><p>In this example, we're asking Apache to create a special
                               logfile, <code class="filename">svn_logfile</code>, in the standard
                               Apache <code class="filename">logs</code> directory.
                               The <code class="literal">%t</code> and <code class="literal">%u</code>
                               variables are replaced by the time and username of the
                               request, respectively.  The really important parts are the
                               two instances of <code class="literal">SVN-ACTION</code>.
                               When Apache sees that variable, it substitutes the value of
                               the <code class="literal">SVN-ACTION</code> environment variable,
                               which is automatically set by <span class="command"><strong>mod_dav_svn</strong></span>
                               whenever it detects a high-level client action.
                  </p>
                  <p>So, instead of having to interpret a
                               traditional <code class="filename">access_log</code> like
                               this:
                  </p><pre class="screen">
[26/Jan/2007:22:25:29 -0600] "PROPFIND /svn/calc/!svn/vcc/default HTTP/1.1" 207 398
[26/Jan/2007:22:25:29 -0600] "PROPFIND /svn/calc/!svn/bln/59 HTTP/1.1" 207 449
[26/Jan/2007:22:25:29 -0600] "PROPFIND /svn/calc HTTP/1.1" 207 647
[26/Jan/2007:22:25:29 -0600] "REPORT /svn/calc/!svn/vcc/default HTTP/1.1" 200 607
[26/Jan/2007:22:25:31 -0600] "OPTIONS /svn/calc HTTP/1.1" 200 188
[26/Jan/2007:22:25:31 -0600] "MKACTIVITY /svn/calc/!svn/act/e6035ef7-5df0-4ac0-b811-4be7c823f998 HTTP/1.1" 201 227
&#8230;
</pre><p>you can peruse a much more
                               intelligible <code class="filename">svn_logfile</code> like
                               this:
                  </p><pre class="screen">
[26/Jan/2007:22:24:20 -0600] - get-dir /tags r1729 props
[26/Jan/2007:22:24:27 -0600] - update /trunk r1729 depth=infinity send-copyfrom-args
[26/Jan/2007:22:25:29 -0600] - status /trunk/foo r1729 depth=infinity
[26/Jan/2007:22:25:31 -0600] sally commit r1730
</pre><p>&#23436;&#20840;&#35760;&#24405;&#30340;&#26085;&#24535;&#21160;&#20316;&#35265;<a class="xref" href="svn.ref.mod_dav_svn.conf.html#svn.ref.mod_dav_svn.conf.logging" title="&#39640;&#32423;&#26085;&#24535;">&#8220;&#39640;&#32423;&#26085;&#24535;&#8221;&#19968;&#33410;</a>&#12290;
                  </p>
               </div>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.httpd.extra.writethruproxy"></a>6.4.5.3.&nbsp;&#36890;&#36807;&#20195;&#29702;&#20889;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>One of the nice advantages of using Apache as a
                               Subversion server is that it can be set up for simple
                               replication.  For example, suppose that your team is
                               distributed across four offices around the globe.  The
                               Subversion repository can exist only in one of those
                               offices, which means the other three offices will not enjoy
                               accessing it&#8212;they're likely to experience
                               significantly slower traffic and response times when
                               updating and committing code.  A powerful solution is to set
                               up a system consisting of one <em class="firstterm">master</em>
                               Apache server and several <em class="firstterm">slave</em>
                               Apache servers.  If you place a slave server in each office,
                               users can check out a working copy from whichever slave
                               is closest to them.  All read requests go to their local
                               slave.  Write requests get automatically routed to the
                               single master server.  When the commit completes, the master
                               then automatically &#8220;<span class="quote">pushes</span>&#8221; the new revision to
                               each slave server using the <span class="command"><strong>svnsync</strong></span>
                               replication tool.
                  </p>
                  <p>This configuration creates a huge perceptual speed
                               increase for your users, because Subversion client traffic
                               is typically 80&#8211;90% read requests.  And if those
                               requests are coming from a <span class="emphasis"><em>local</em></span>
                               server, it's a huge win.
                  </p>
                  <p>In this section, we'll walk you through a standard setup
                               of this single-master/multiple-slave system.  However, keep
                               in mind that your servers must be running at least Apache
                               2.2.0 (with <span class="command"><strong>mod_proxy</strong></span> loaded) and
                               Subversion 1.5 (<span class="command"><strong>mod_dav_svn</strong></span>).
                  </p>
                  <div class="sect4" lang="zh-cn">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h5 class="title"><a name="svn.serverconfig.httpd.extra.writethruproxy.configure"></a>6.4.5.3.1.&nbsp;&#37197;&#32622;&#26381;&#21153;&#22120;
                              </h5>
                           </div>
                        </div>
                     </div>
                     <p>First, configure your master server's
                                    <code class="filename">httpd.conf</code> file in the usual way.
                                    Make the repository available at a certain URI location,
                                    and configure authentication and authorization however
                                    you'd like.  After that's done, configure each of your
                                    &#8220;<span class="quote">slave</span>&#8221; servers in the exact same way, but
                                    add the special <code class="literal">SVNMasterURI</code> directive
                                    to the block:
                     </p><pre class="screen">
&lt;Location /svn&gt;
  DAV svn
  SVNPath /var/svn/repos
  SVNMasterURI http://master.example.com/svn
  &#8230;
&lt;/Location&gt;
</pre><p>This new directive tells a slave server to redirect
                                    all write requests to the master.  (This is done
                                    automatically via Apache's <span class="command"><strong>mod_proxy</strong></span>
                                    module.)  Ordinary read requests, however, are still
                                    serviced by the slaves.  Be sure that your master and
                                    slave servers all have matching authentication and
                                    authorization configurations;  if they fall out of sync,
                                    it can lead to big headaches.
                     </p>
                     <p>Next, we need to deal with the problem of infinite
                                    recursion.  With the current configuration, imagine what
                                    will happen when a Subversion client performs a commit to
                                    the master server.  After the commit completes, the server
                                    uses <span class="command"><strong>svnsync</strong></span> to replicate the new
                                    revision to each slave.  But because
                                    <span class="command"><strong>svnsync</strong></span> appears to be just another
                                    Subversion client performing a commit, the slave will
                                    immediately attempt to proxy the incoming write request
                                    back to the master!  Hilarity ensues.
                     </p>
                     <p>The solution to this problem is to have the master
                                    push revisions to a different
                                    <code class="literal">&lt;Location&gt;</code> on the slaves.  This
                                    location is configured to <span class="emphasis"><em>not</em></span> proxy
                                    write requests at all, but to accept normal commits from
                                    (and only from) the master's IP address:
                     </p><pre class="screen">
&lt;Location /svn-proxy-sync&gt;
  DAV svn
  SVNPath /var/svn/repos
  Order deny,allow
  Deny from all
  # Only let the server's IP address access this Location:
  Allow from 10.20.30.40
  &#8230;
&lt;/Location&gt;
</pre></div>
                  <div class="sect4" lang="zh-cn">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h5 class="title"><a name="svn.serverconfig.httpd.extra.writethruproxy.replicate"></a>6.4.5.3.2.&nbsp;&#35774;&#32622;&#22797;&#21046;
                              </h5>
                           </div>
                        </div>
                     </div>
                     <p>Now that you've configured
                                    your <code class="literal">Location</code> blocks on master and
                                    slaves, you need to configure the master to replicate to
                                    the slaves.  This is done the usual way&#8212;
                                    using <span class="command"><strong>svnsync</strong></span>.  If you're not familiar
                                    with this tool, see
                                    <a class="xref" href="svn.reposadmin.html#svn.reposadmin.maint.replication" title="5.4.7.&nbsp;&#29256;&#26412;&#24211;&#22797;&#21046;">&#31532;&nbsp;5.4.7&nbsp;&#33410; &#8220;&#29256;&#26412;&#24211;&#22797;&#21046;&#8221;</a> for
                                    details.
                     </p>
                     <p>First, make sure that each slave repository has a
                                    <code class="filename">pre-revprop-change</code> hook script which
                                    allows remote revision property changes.  (This is
                                    standard procedure for being on the receiving end of
                                    <span class="command"><strong>svnsync</strong></span>.) Then log into the master
                                    server and configure each of the slave repository URIs to
                                    receive data from the master repository on the local
                                    disk:
                     </p><pre class="screen">
$ svnsync init http://slave1.example.com/svn-proxy-sync file://var/svn/repos
Copied properties for revision 0.
$ svnsync init http://slave2.example.com/svn-proxy-sync file://var/svn/repos
Copied properties for revision 0.
$ svnsync init http://slave3.example.com/svn-proxy-sync file://var/svn/repos
Copied properties for revision 0.

# Perform the initial replication

$ svnsync sync http://slave1.example.com/svn-proxy-sync
Transmitting file data ....
Committed revision 1.
Copied properties for revision 1.
Transmitting file data .......
Committed revision 2.
Copied properties for revision 2.
&#8230;

$ svnsync sync http://slave2.example.com/svn-proxy-sync
Transmitting file data ....
Committed revision 1.
Copied properties for revision 1.
Transmitting file data .......
Committed revision 2.
Copied properties for revision 2.
&#8230;

$ svnsync sync http://slave3.example.com/svn-proxy-sync
Transmitting file data ....
Committed revision 1.
Copied properties for revision 1.
Transmitting file data .......
Committed revision 2.
Copied properties for revision 2.
&#8230;
</pre><p>After this is done, we configure the master server's
                                    <code class="literal">post-commit</code> hook script to invoke
                                    <span class="command"><strong>svnsync</strong></span> on each slave server:
                     </p><pre class="programlisting">
#!/bin/sh
# Post-commit script to replicate newly committed revision to slaves

svnsync sync http://slave1.example.com/svn-proxy-sync &gt; /dev/null 2&gt;&amp;1
svnsync sync http://slave2.example.com/svn-proxy-sync &gt; /dev/null 2&gt;&amp;1
svnsync sync http://slave3.example.com/svn-proxy-sync &gt; /dev/null 2&gt;&amp;1
</pre><p>The extra bits on the end of each line aren't
                                    necessary, but they're a sneaky way to allow the sync
                                    commands to run in the background so that the Subversion
                                    client isn't left waiting forever for the commit to
                                    finish.  In addition to this
                                    <code class="literal">post-commit</code> hook, you'll need a
                                    <code class="literal">post-revprop-change</code> hook as well so
                                    that when a user, say, modifies a log message, the slave
                                    servers get that change also:
                     </p><pre class="programlisting">
#!/bin/sh
# Post-revprop-change script to replicate revprop-changes to slaves

REV=${2}
svnsync copy-revprops http://slave1.example.com/svn-proxy-sync ${REV} &gt; /dev/null 2&gt;&amp;1
svnsync copy-revprops http://slave2.example.com/svn-proxy-sync ${REV} &gt; /dev/null 2&gt;&amp;1
svnsync copy-revprops http://slave3.example.com/svn-proxy-sync ${REV} &gt; /dev/null 2&gt;&amp;1
</pre><p>The only thing we've left out here is what to do about
                                    locks.  Because locks are strictly enforced by the master
                                    server (the only place where commits happen), we don't
                                    technically need to do anything.  Many teams don't use
                                    Subversion's locking features at all, so it may be a
                                    nonissue for you.  However, if lock changes aren't
                                    replicated from master to slaves, it means that clients
                                    won't be able to query the status of locks
                                    (e.g., <strong class="userinput"><code>svn status -u</code></strong> will show no
                                    information about repository locks).  If this bothers you,
                                    you can write <code class="literal">post-lock</code> and
                                    <code class="literal">post-unlock</code> hook scripts that run
                                    <span class="command"><strong>svn lock</strong></span> and <span class="command"><strong>svn
                                          unlock</strong></span> on each slave machine, presumably through
                                    a remote shell method such as SSH.  That's left as an
                                    exercise for the reader!
                     </p>
                  </div>
                  <div class="sect4" lang="zh-cn">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h5 class="title"><a name="svn.serverconfig.httpd.extra.writethruproxy.caveats"></a>6.4.5.3.3.&nbsp;&#21578;&#35819;
                              </h5>
                           </div>
                        </div>
                     </div>
                     <p>Your master/slave replication system should now be
                                    ready to use.  A couple of words of warning are in order,
                                    however.  Remember that this replication isn't entirely
                                    robust in the face of computer or network crashes.  For
                                    example, if one of the automated
                                    <span class="command"><strong>svnsync</strong></span> commands fails to complete for
                                    some reason, the slaves will begin to fall behind.  For
                                    example, your remote users will see that they've committed
                                    revision 100, but then when they run <span class="command"><strong>svn
                                          update</strong></span>, their local server will tell them that
                                    revision 100 doesn't yet exist!  Of course, the problem
                                    will be automatically fixed the next time another commit
                                    happens and the subsequent <span class="command"><strong>svnsync</strong></span> is
                                    successful&#8212;the sync will replicate all waiting
                                    revisions.  But still, you may want to set up some sort of
                                    out-of-band monitoring to notice synchronization failures
                                    and force <span class="command"><strong>svnsync</strong></span> to run when things go
                                    wrong.
                     </p>
                     <div class="sidebar">
                        <p class="title"><b>&#25105;&#20204;&#21487;&#20197;&#20026; svnserve &#35774;&#32622;&#22797;&#21046;&#21527;&#65311;</b></p>
                        <p>If you're using <span class="command"><strong>svnserve</strong></span> instead
                                         of Apache as your server, you can certainly configure
                                         your repository's hook scripts to invoke
                                         <span class="command"><strong>svnsync</strong></span> as we've shown here, thereby
                                         causing automatic replication from master to slaves.
                                         Unfortunately, at the time of this writing there is no way to
                                         make slave <span class="command"><strong>svnserve</strong></span> servers
                                         automatically proxy write requests back to the master
                                         server.  This means your users would only be able to
                                         check out read-only working copies from the slave
                                         servers.  You'd have to configure your slave servers to
                                         disallow write access completely.  This might be useful
                                         for creating read-only &#8220;<span class="quote">mirrors</span>&#8221; of popular
                                         open source projects, but it's not a transparent
                                         proxying system.
                        </p>
                     </div>
                  </div>
               </div>
               <div class="sect3" lang="zh-cn">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h4 class="title"><a name="svn.serverconfig.httpd.extra.other"></a>6.4.5.4.&nbsp;&#20854;&#23427;&#30340; Apache &#29305;&#24615;
                           </h4>
                        </div>
                     </div>
                  </div>
                  <p>Several of the features already provided by Apache in
                               its role as a robust web server can be leveraged for
                               increased functionality or security in Subversion as well.
                               The Subversion client is able to use SSL (the Secure Sockets
                               Layer, discussed earlier).  If your Subversion client is
                               built to support SSL, it can access your Apache server
                               using <code class="literal">https://</code> and enjoy a high-quality
                               encrypted network session.
                  </p>
                  <p>&#21516;&#26679;&#26377;&#29992;&#30340;&#26159;Apache&#21644;Subversion&#20851;&#31995;&#30340;&#19968;&#20123;&#29305;&#24615;&#65292;&#20687;&#21487;&#20197;&#25351;&#23450;&#33258;&#23450;&#20041;&#30340;&#31471;&#21475;(&#32780;&#19981;&#26159;&#32570;&#30465;&#30340;HTTP&#30340;80)&#25110;&#32773;&#26159;&#19968;&#20010;Subversion&#21487;&#20197;&#34987;&#35775;&#38382;&#30340;&#34394;&#25311;&#20027;&#26426;&#21517;&#65292;&#25110;&#32773;&#26159;&#36890;&#36807;HTTP&#20195;&#29702;&#26381;&#21153;&#22120;&#35775;&#38382;&#30340;&#33021;&#21147;&#65292;&#36825;&#20123;&#29305;&#24615;&#37117;&#26159;Neon&#25152;&#25903;&#25345;&#30340;&#65292;&#25152;&#20197;Subversion&#36731;&#26131;&#24471;&#21040;&#36825;&#20123;&#25903;&#25345;&#12290;</p>
                  <p>&#26368;&#21518;&#65292;&#22240;&#20026;<span class="command"><strong>mod_dav_svn</strong></span>&#26159;&#20351;&#29992;&#19968;&#20010;&#21322;&#23436;&#25104;&#30340;WebDAV/DeltaV&#26041;&#35328;&#65292;&#25152;&#20197;&#36890;&#36807;&#31532;&#19977;&#26041;&#30340;DAV&#23458;&#25143;&#31471;&#35775;&#38382;&#20063;&#26159;&#21487;&#33021;&#30340;&#65292;&#20960;&#20046;&#25152;&#26377;&#30340;&#29616;&#20195;&#25805;&#20316;&#31995;&#32479;(Win32&#12289;OS X&#21644;Linux)&#37117;&#26377;&#25226;DAV&#26381;&#21153;&#22120;&#24433;&#23556;&#20026;&#26222;&#36890;&#30340;&#32593;&#32476;&#8220;<span class="quote">&#20849;&#20139;</span>&#8221;&#30340;&#20869;&#32622;&#33021;&#21147;&#65292;&#36825;&#26159;&#19968;&#20010;&#22797;&#26434;&#30340;&#20027;&#39064;&#65307;&#23519;&#30475;<a class="xref" href="svn.webdav.html" title="&#38468;&#24405;&nbsp;C.&nbsp;WebDAV &#21644;&#33258;&#21160;&#29256;&#26412;">&#38468;&#24405;&nbsp;C, <i>WebDAV &#21644;&#33258;&#21160;&#29256;&#26412;</i></a>&#26469;&#24471;&#21040;&#26356;&#22810;&#32454;&#33410;&#12290;
                  </p>
                  <p>Note that there are a number of other small tweaks one can
                               make to <span class="command"><strong>mod_dav_svn</strong></span> that are too obscure
                               to mention in this chapter.  For a complete list of
                               all <code class="filename">httpd.conf</code> directives
                               that <span class="command"><strong>mod_dav_svn</strong></span> responds to, see
                               <a class="xref" href="svn.ref.mod_dav_svn.conf.html#svn.ref.mod_dav_svn.conf.directives" title="&#25351;&#20196;">&#8220;&#25351;&#20196;&#8221;&#19968;&#33410;</a>.
                  </p>
               </div>
            </div>
         </div>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.serverconfig.pathbasedauthz"></a>6.5.&nbsp;&#22522;&#20110;&#36335;&#24452;&#30340;&#25480;&#26435;
                     </h2>
                  </div>
               </div>
            </div>
            <p>Apache&#21644;<span class="command"><strong>svnserve</strong></span>&#37117;&#21487;&#20197;&#32473;&#29992;&#25143;&#36171;&#20104;(&#25110;&#25298;&#32477;)&#35775;&#38382;&#35768;&#21487;&#65292;&#36890;&#24120;&#26159;&#23545;&#25972;&#20010;&#29256;&#26412;&#24211;&#65306;&#19968;&#20010;&#29992;&#25143;&#21487;&#20197;&#35835;&#29256;&#26412;&#24211;(&#25110;&#19981;)&#65292;&#32780;&#19988;&#20182;&#21487;&#20197;&#20889;&#29256;&#26412;&#24211;(&#25110;&#19981;)&#12290;&#22914;&#26524;&#21487;&#33021;&#65292;&#20063;&#21487;&#20197;&#23450;&#20041;&#32454;&#31890;&#24230;&#30340;&#35775;&#38382;&#35268;&#21017;&#12290;&#19968;&#32452;&#29992;&#25143;&#21487;&#20197;&#26377;&#29256;&#26412;&#24211;&#30340;&#19968;&#20010;&#30446;&#24405;&#30340;&#35835;&#20889;&#26435;&#38480;&#65292;&#20294;&#26159;&#27809;&#26377;&#20854;&#23427;&#30340;&#65307;&#21478;&#19968;&#20010;&#30446;&#24405;&#21487;&#20197;&#26159;&#21482;&#23545;&#19968;&#23569;&#37096;&#20998;&#29992;&#25143;&#21487;&#35835;&#12290;
            </p>
            <p>Both servers use a common file format to describe these
                     path-based access rules.  In the case of Apache, one needs to
                     load the <span class="command"><strong>mod_authz_svn</strong></span> module and then add
                     the <code class="literal">AuthzSVNAccessFile</code> directive (within
                     the <code class="filename">httpd.conf</code> file) pointing to your own
                     rules file.  (For a full explanation, see
                     <a class="xref" href="svn.serverconfig.html#svn.serverconfig.httpd.authz.perdir" title="6.4.4.2.&nbsp;&#27599;&#30446;&#24405;&#35775;&#38382;&#25511;&#21046;">&#31532;&nbsp;6.4.4.2&nbsp;&#33410; &#8220;&#27599;&#30446;&#24405;&#35775;&#38382;&#25511;&#21046;&#8221;</a>.)  If
                     you're using <span class="command"><strong>svnserve</strong></span>, you need to make
                     the <code class="literal">authz-db</code> variable
                     (within <code class="filename">svnserve.conf</code>) point to your
                     rules file.
            </p>
            <div class="sidebar">
               <p class="title"><b>&#20320;&#30495;&#30340;&#38656;&#35201;&#22522;&#20110;&#36335;&#24452;&#30340;&#35775;&#38382;&#25511;&#21046;&#21527;&#65311;</b></p>
               <p>&#35768;&#22810;&#31532;&#19968;&#27425;&#35774;&#32622;Subversion&#30340;&#31649;&#29702;&#21592;&#20250;&#22312;&#26410;&#32463;&#22826;&#22810;&#30340;&#24605;&#32771;&#30340;&#24773;&#20917;&#19979;&#36731;&#26131;&#36873;&#25321;&#20351;&#29992;&#36335;&#24452;&#20026;&#22522;&#30784;&#30340;&#35775;&#38382;&#25511;&#21046;&#65292;&#31649;&#29702;&#21592;&#36890;&#24120;&#30693;&#36947;&#22242;&#38431;&#30340;&#25104;&#21592;&#24037;&#20316;&#22312;&#21738;&#20010;&#39033;&#30446;&#65292;&#25152;&#20197;&#24456;&#23481;&#26131;&#30830;&#23450;&#36171;&#20104;&#21738;&#20123;&#22242;&#38431;&#35775;&#38382;&#21738;&#20123;&#30446;&#24405;&#65292;&#19981;&#33021;&#35775;&#38382;&#21738;&#20123;&#30446;&#24405;&#12290;&#36825;&#30475;&#36215;&#26469;&#26159;&#24456;&#33258;&#28982;&#30340;&#20107;&#24773;&#65292;&#23427;&#28385;&#36275;&#20102;&#31649;&#29702;&#21592;&#32039;&#23494;&#25511;&#21046;&#29256;&#26412;&#24211;&#35775;&#38382;&#30340;&#24895;&#26395;&#12290;</p>
               <p>&#27880;&#24847;&#65292;&#36825;&#20010;&#29305;&#24615;&#36890;&#24120;&#26377;&#19968;&#20123;&#30475;&#19981;&#35265;(&#21644;&#21487;&#35265;&#30340;)&#20195;&#20215;&#12290;&#21487;&#35265;&#30340;&#65292;&#38656;&#35201;&#26356;&#22810;&#30340;&#24037;&#20316;&#26469;&#30830;&#20449;&#29992;&#25143;&#23545;&#26576;&#20010;&#36335;&#24452;&#26377;&#35835;&#20889;&#26435;&#38480;&#65307;&#22312;&#19968;&#20123;&#24773;&#20917;&#19979;&#65292;&#20250;&#26159;&#38750;&#24120;&#22823;&#30340;&#24615;&#33021;&#25439;&#22833;&#12290;&#19981;&#21487;&#35265;&#30340;&#65292;&#32771;&#34385;&#20320;&#21019;&#24314;&#30340;&#25991;&#21270;&#65292;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#22240;&#20026;&#29305;&#23450;&#29992;&#25143;&#19981;&#33021;&#22815;&#22312;&#29305;&#23450;&#30446;&#24405;&#25552;&#20132;&#20462;&#25913;&#65292;&#25152;&#20197;&#31038;&#20250;&#22865;&#32422;&#19981;&#24517;&#36890;&#36807;&#25216;&#26415;&#26469;&#21152;&#24378;&#12290;&#22242;&#38431;&#26377;&#26102;&#20505;&#21487;&#20197;&#33258;&#28982;&#30340;&#20114;&#30456;&#21327;&#20316;&#65307;&#19968;&#20123;&#20154;&#20250;&#36890;&#36807;&#20026;&#20182;&#20154;&#25552;&#20132;&#19981;&#33021;&#27491;&#24120;&#24037;&#20316;&#30446;&#24405;&#30340;&#20869;&#23481;&#30340;&#26041;&#27861;&#24110;&#21161;&#21035;&#20154;&#65292;&#20320;&#35774;&#32622;&#20102;&#19968;&#31181;&#19981;&#26399;&#26395;&#20132;&#27969;&#30340;&#38556;&#30861;&#12290;&#20320;&#20063;&#35201;&#24314;&#31435;&#19968;&#22871;&#39033;&#30446;&#24320;&#21457;&#12289;&#26032;&#20154;&#21152;&#20837;&#31561;&#27963;&#21160;&#30340;&#35268;&#21017;&#65292;&#36824;&#26377;&#24456;&#22810;&#39069;&#22806;&#30340;&#24037;&#20316;&#12290;</p>
               <p>Remember that this is a version control system!  Even if
                          somebody accidentally commits a change to something she
                          shouldn't, it's easy to undo the change.  And if a user
                          commits to the wrong place with deliberate malice, it's a
                          social problem anyway, and that the problem needs to be dealt
                          with outside Subversion.
               </p>
               <p>So, before you begin restricting users' access rights, ask
                          yourself whether there's a real, honest need for this, or whether it's
                          just something that &#8220;<span class="quote">sounds good</span>&#8221; to an
                          administrator.  Decide whether it's worth sacrificing some
                          server speed, and remember that there's very little risk
                          involved; it's bad to become dependent on technology as a
                          crutch for social problems.
                          <sup>[<a name="d0e13736" href="#ftn.d0e13736" class="footnote">47</a>]</sup>
                        
               </p>
               <p>&#20316;&#20026;&#19968;&#20010;&#24605;&#32771;&#30340;&#20363;&#23376;&#65292;&#32771;&#34385;Subversion&#39033;&#30446;&#26412;&#36523;&#26377;&#20801;&#35768;&#26576;&#20010;&#29992;&#25143;&#21487;&#20197;&#22312;&#37027;&#20010;&#30446;&#24405;&#25552;&#20132;&#30340;&#35774;&#32622;&#65292;&#32780;&#21482;&#26159;&#36890;&#36807;&#31038;&#20132;&#26041;&#24335;&#35268;&#23450;&#12290;&#36825;&#26159;&#19968;&#20010;&#31038;&#21306;&#20449;&#20219;&#30340;&#22909;&#27169;&#22411;&#65292;&#29305;&#21035;&#26159;&#23545;&#24320;&#28304;&#39033;&#30446;&#12290;&#24403;&#28982;&#65292;&#26377;&#26102;&#20505;&#38656;&#35201;&#27491;&#32479;&#30340;&#36335;&#24452;&#20026;&#22522;&#30784;&#30340;&#35775;&#38382;&#25511;&#21046;&#65307;&#22312;&#20844;&#21496;&#20013;&#65292;&#20363;&#22914;&#65292;&#21482;&#26377;&#37096;&#20998;&#25968;&#25454;&#26159;&#25935;&#24863;&#30340;&#65292;&#21482;&#20801;&#35768;&#20197;&#23567;&#32452;&#20154;&#21487;&#20197;&#35775;&#38382;&#12290;</p>
            </div>
            <p>&#24403;&#20320;&#30340;&#26381;&#21153;&#22120;&#30693;&#36947;&#21435;&#26597;&#25214;&#35268;&#21017;&#25991;&#20214;&#26102;&#65292;&#23601;&#26159;&#38656;&#35201;&#23450;&#20041;&#35268;&#21017;&#30340;&#26102;&#20505;&#20102;&#12290;</p>
            <p>The syntax of the file is the same familiar one used
                     by <code class="filename">svnserve.conf</code> and the runtime
                     configuration files.  Lines that start with a hash
                     (<code class="literal">#</code>) are ignored.  In its simplest form, each
                     section names a repository and path within it, as well as the
                     authenticated usernames are the option names within each
                     section.  The value of each option describes the user's level of
                     access to the repository path: either
                     <code class="literal">r</code> (read-only) or <code class="literal">rw</code>
                     (read/write).  If the user is not mentioned at all, no access is
                     allowed.
            </p>
            <p>To be more specific: the value of the section names is
                     either of the form <code class="literal">[repos-name:path]</code> or of the
                     form <code class="literal">[path]</code>.  If you're using the
                     <code class="literal">SVNParentPath</code> directive, it's important
                     to specify the repository names in your sections.  If you omit
                     them, a section such as
                     <code class="literal">[/some/dir]</code> will match the path
                     <code class="filename">/some/dir</code> in <span class="emphasis"><em>every</em></span>
                     repository.  If you're using the <code class="literal">SVNPath</code>
                     directive, however, it's fine to only define paths in your
                     sections&#8212;after all, there's only one repository.
            </p><pre class="screen">
[calc:/branches/calc/bug-142]
harry = rw
sally = r
</pre><p>&#22312;&#31532;&#19968;&#20010;&#20363;&#23376;&#37324;&#65292;&#29992;&#25143;<code class="literal">harry</code>&#23545;<code class="literal">calc</code>&#29256;&#26412;&#24211;&#20013;<code class="filename">/branches/calc/bug-142</code>&#20855;&#22791;&#23436;&#20840;&#30340;&#35835;&#20889;&#26435;&#21033;&#65292;&#20294;&#26159;&#29992;&#25143;<code class="literal">sally</code>&#21482;&#26377;&#35835;&#26435;&#21033;&#65292;&#20219;&#20309;&#20854;&#20182;&#29992;&#25143;&#31105;&#27490;&#35775;&#38382;&#36825;&#20010;&#30446;&#24405;&#12290;
            </p>
            <p>Of course, permissions are inherited from parent to child
                     directory.  That means we can specify a subdirectory with a
                     different access policy for Sally:
            </p><pre class="screen">
[calc:/branches/calc/bug-142]
harry = rw
sally = r

# give sally write access only to the 'testing' subdir
[calc:/branches/calc/bug-142/testing]
sally = rw
</pre><p>Now Sally can write to the <code class="filename">testing</code>
                     subdirectory of the branch, but can still only read other parts.
                     Harry, meanwhile, continues to have complete read/write access
                     to the whole branch.
            </p>
            <p>&#20063;&#21487;&#20197;&#36890;&#36807;&#32487;&#25215;&#35268;&#21017;&#26126;&#30830;&#30340;&#30340;&#25298;&#32477;&#26576;&#20154;&#30340;&#35775;&#38382;&#65292;&#21482;&#38656;&#35201;&#35774;&#32622;&#29992;&#25143;&#21517;&#21442;&#25968;&#20026;&#31354;&#65306;</p><pre class="screen">
[calc:/branches/calc/bug-142]
harry = rw
sally = r

[calc:/branches/calc/bug-142/secret]
harry =
</pre><p>In this example, Harry has read/write access to the
                     entire <code class="filename">bug-142</code> tree, but has absolutely no
                     access at all to the <code class="filename">secret</code> subdirectory
                     within it.
            </p>
            <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
               <table border="0" summary="Tip">
                  <tr>
                     <td rowspan="2" align="center" valign="top" width="25"><img alt="[&#25552;&#31034;]" src="images/tip.png"></td>
                     <th align="left">&#25552;&#31034;</th>
                  </tr>
                  <tr>
                     <td align="left" valign="top">
                        <p>The thing to remember is that the most specific path
                                   always matches first.  The server tries to match the path
                                   itself, and then the parent of the path, then the parent of
                                   that, and so on.  The net effect is that mentioning a specific
                                   path in the access file will always override any permissions
                                   inherited from parent directories.
                        </p>
                     </td>
                  </tr>
               </table>
            </div>
            <p>&#32570;&#30465;&#24773;&#20917;&#19979;&#65292;&#27809;&#26377;&#20154;&#23545;&#29256;&#26412;&#24211;&#26377;&#20219;&#20309;&#35775;&#38382;&#65292;&#36825;&#24847;&#21619;&#30528;&#22914;&#26524;&#20320;&#24050;&#32463;&#20174;&#19968;&#20010;&#31354;&#25991;&#20214;&#24320;&#22987;&#65292;&#20320;&#20250;&#24076;&#26395;&#32473;&#25152;&#26377;&#29992;&#25143;&#23545;&#29256;&#26412;&#24211;&#26681;&#30446;&#24405;&#20855;&#22791;&#35835;&#26435;&#38480;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#26143;&#21495;(<code class="literal">*</code>)&#23454;&#29616;&#65292;&#29992;&#26469;&#20195;&#34920;&#8220;<span class="quote">&#25152;&#26377;&#29992;&#25143;</span>&#8221;&#65306;
            </p><pre class="screen">
[/]
* = r
</pre><p>This is a common setup; notice that no repository
                     name is mentioned in the section name.  This makes all repositories
                     world-readable to all users. Once all users have read access to
                     the repositories, you can give explicit
                     <code class="literal">rw</code> permission to certain users on specific
                     subdirectories within specific repositories.
            </p>
            <p>The asterisk variable (<code class="literal">*</code>) is also worth
                     special mention because it's the
                     <span class="emphasis"><em>only</em></span> pattern that matches an anonymous
                     user.  If you've configured your server block to allow a mixture
                     of anonymous and authenticated access, all users start out
                     accessing anonymously.  The server looks for a
                     <code class="literal">*</code> value defined for the path being accessed;
                     if it can't find one, it demands real authentication from
                     the client.
            </p>
            <p>&#35775;&#38382;&#25991;&#20214;&#20063;&#20801;&#35768;&#20320;&#23450;&#20041;&#19968;&#32452;&#30340;&#29992;&#25143;&#65292;&#24456;&#20687;Unix&#30340;<code class="filename">/etc/group</code>&#25991;&#20214;&#65306;
            </p><pre class="screen">
[groups]
calc-developers = harry, sally, joe
paint-developers = frank, sally, jane
everyone = harry, sally, joe, frank, sally, jane
</pre><p>&#32452;&#21487;&#20197;&#34987;&#36171;&#20104;&#36890;&#29992;&#25143;&#19968;&#26679;&#30340;&#35775;&#38382;&#26435;&#38480;&#65292;&#20351;&#29992;&#8220;<span class="quote">at</span>&#8221;(<code class="literal">@</code>)&#21069;&#32512;&#26469;&#21152;&#20197;&#21306;&#21035;&#65306;
            </p><pre class="screen">
[calc:/projects/calc]
@calc-developers = rw

[paint:/projects/paint]
jane = r
@paint-developers = rw
</pre><p>Another important fact is that
                   the <span class="emphasis"><em>first</em></span> matching rule is the one which gets
                   applied to a user.  In the prior example, even though Jane is a
                   member of the <code class="literal">paint-developers</code> group (which has
                   read/write access), the <code class="literal">jane = r</code> rule will be
                   discovered and matched before the group rule, thus denying Jane
                   write access.
            </p>
            <p>&#32452;&#20013;&#20063;&#21487;&#20197;&#23450;&#20041;&#20026;&#21253;&#21547;&#20854;&#23427;&#30340;&#32452;&#65306;</p><pre class="screen">
[groups]
calc-developers = harry, sally, joe
paint-developers = frank, sally, jane
everyone = @calc-developers, @paint-developers
</pre><p>Subversion 1.5 brings another useful feature to the access
                     file syntax:  username aliases.  Some authentication systems
                     expect and carry relatively short usernames of the sorts we've
                     been describing here&#8212;<code class="literal">harry</code>,
                     <code class="literal">sally</code>, <code class="literal">joe</code>, and so on.  But
                     other authentication systems&#8212;such as those which use LDAP
                     stores or SSL client certificates&#8212;may carry much more
                     complex usernames.  For example, Harry's username in an
                     LDAP-protected system might be <code class="literal">CN=Harold
                        Hacker,OU=Engineers,DC=red-bean,DC=com</code>.  With
                     usernames like that, the access file can become quite bloated
                     with long or obscure usernames that are easy to mistype.
                     Fortunately, username aliases allow you to have to type the
                     correct complex username only once, in a statement which assigns to
                     it a more easily digestable alias.
            </p><pre class="screen">
[aliases]
harry = CN=Harold Hacker,OU=Engineers,DC=red-bean,DC=com
sally = CN=Sally Swatterbug,OU=Engineers,DC=red-bean,DC=com
joe = CN=Gerald I. Joseph,OU=Engineers,DC=red-bean,DC=com
&#8230;
</pre><p>Once you've defined a set of aliases, you can refer to the
                     users elsewhere in the access file via their aliases in all the
                     same places you could have instead used their actual usernames.
                     Simply prepend an ampersand to the alias to distinguish it from
                     a regular username:
            </p><pre class="screen">
[groups]
calc-developers = &amp;harry, &amp;sally, &amp;joe
paint-developers = &amp;frank, &amp;sally, &amp;jane
everyone = @calc-developers, @paint-developers
</pre><p>You might also choose to use aliases if your users'
                     usernames change frequently.  Doing so allows you to need to
                     update only the aliases table when these username changes occur,
                     instead of doing global-search-and-replace operations on the
                     whole access file.
            </p>
            <div class="sidebar">
               <p class="title"><b>&#37096;&#20998;&#21487;&#35835;&#24615;&#21644;&#26816;&#20986;</b></p>
               <p>If you're using Apache as your Subversion server and have
                        made certain subdirectories of your repository unreadable to
                        certain users, you need to be aware of a possible
                        nonoptimal behavior with <span class="command"><strong>svn checkout</strong></span>.
               </p>
               <p>When the client requests a checkout or update over HTTP, it
                        makes a single server request and receives a single (often
                        large) server response.  When the server receives the request,
                        that is the <span class="emphasis"><em>only</em></span> opportunity Apache has to
                        demand user authentication.  This has some odd side effects.
                        For example, if a certain subdirectory of the repository is
                        readable only by user Sally, and user Harry checks out a parent
                        directory, his client will respond to the initial authentication
                        challenge as Harry.  As the server generates the large response,
                        there's no way it can resend an authentication challenge when
                        it reaches the special subdirectory; thus the subdirectory is
                        skipped altogether, rather than asking the user to
                        reauthenticate as Sally at the right moment.  In a similar way,
                        if the root of the repository is anonymously world-readable,
                        the entire checkout will be done without
                        authentication&#8212;again, skipping the unreadable directory,
                        rather than asking for authentication partway through.
               </p>
            </div>
         </div>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.serverconfig.multimethod"></a>6.6.&nbsp;&#25903;&#25345;&#22810;&#31181;&#29256;&#26412;&#24211;&#35775;&#38382;&#26041;&#27861;
                     </h2>
                  </div>
               </div>
            </div>
            <p>&#20320;&#24050;&#32463;&#30475;&#21040;&#20102;&#19968;&#20010;&#29256;&#26412;&#24211;&#21487;&#20197;&#29992;&#22810;&#31181;&#26041;&#24335;&#35775;&#38382;&#65292;&#20294;&#26159;&#21487;&#20197;&#8212;&#25110;&#32773;&#35828;&#23433;&#20840;&#30340;&#8212;&#29992;&#20960;&#31181;&#26041;&#24335;&#21516;&#26102;&#24182;&#34892;&#30340;&#35775;&#38382;&#20320;&#30340;&#29256;&#26412;&#24211;&#21527;&#65311;&#22238;&#31572;&#26159;&#21487;&#20197;&#65292;&#20504;&#33509;&#20320;&#26377;&#19968;&#20123;&#28145;&#35851;&#36828;&#34385;&#30340;&#20351;&#29992;&#12290;</p>
            <p>&#22312;&#20219;&#20309;&#32473;&#23450;&#30340;&#26102;&#38388;&#65292;&#36825;&#20123;&#36827;&#31243;&#20250;&#35201;&#27714;&#35835;&#25110;&#32773;&#20889;&#35775;&#38382;&#20320;&#30340;&#29256;&#26412;&#24211;&#65306;</p>
            <div class="itemizedlist">
               <ul type="disc">
                  <li>
                     <p>&#24120;&#35268;&#30340;&#31995;&#32479;&#29992;&#25143;&#20351;&#29992;Subversion&#23458;&#25143;&#31471;(&#23458;&#25143;&#31471;&#31243;&#24207;&#26412;&#36523;)&#36890;&#36807;<code class="literal">file://</code>URL&#30452;&#25509;&#35775;&#38382;&#29256;&#26412;&#24211;
                     </p>
                  </li>
                  <li>
                     <p>&#24120;&#35268;&#30340;&#31995;&#32479;&#29992;&#25143;&#36830;&#25509;&#20351;&#29992;SSH&#35843;&#29992;&#30340;&#35775;&#38382;&#29256;&#26412;&#24211;&#30340;<span class="command"><strong>svnserve</strong></span>&#36827;&#31243;(&#23601;&#20687;&#23427;&#20204;&#33258;&#24049;&#36816;&#34892;&#19968;&#26679;)&#65307;
                     </p>
                  </li>
                  <li>
                     <p>&#19968;&#20010;<span class="command"><strong>svnserve</strong></span>&#36827;&#31243;&#8212;&#26159;&#19968;&#20010;&#23432;&#25252;&#36827;&#31243;&#25110;&#26159;&#36890;&#36807;<span class="command"><strong>inetd</strong></span>&#21551;&#21160;&#30340;&#8212;&#20316;&#20026;&#19968;&#20010;&#22266;&#23450;&#30340;&#29992;&#25143;&#36816;&#34892;
                     </p>
                  </li>
                  <li>
                     <p>&#19968;&#20010;Apache <span class="command"><strong>httpd</strong></span>&#36827;&#31243;&#65292;&#20197;&#19968;&#20010;&#22266;&#23450;&#29992;&#25143;&#36816;&#34892;
                     </p>
                  </li>
               </ul>
            </div>
            <p>The most common problem administrators run into is
                     repository ownership and permissions.  Does every process (or
                     user) in the preceding list have the rights to read and write the
                     repository's underlying data files?  Assuming you have a
                     Unix-like operating system, a straightforward approach might be
                     to place every potential repository user into a
                     new <code class="literal">svn</code> group, and make the repository wholly
                     owned by that group.  But even that's not enough, because a
                     process may write to the database files using an unfriendly
                     umask&#8212;one that prevents access by other users.
            </p>
            <p>So the next step beyond setting up a common group for
                     repository users is to force every repository-accessing process
                     to use a sane umask.  For users accessing the repository
                     directly, you can make the <span class="command"><strong>svn</strong></span> program into a
                     wrapper script that first runs <strong class="userinput"><code>umask 002</code></strong> and
                     then runs the real <span class="command"><strong>svn</strong></span> client program.  You
                     can write a similar wrapper script for the
                     <span class="command"><strong>svnserve</strong></span> program, and add a <strong class="userinput"><code>umask
                           002</code></strong> command to Apache's own startup script,
                     <code class="filename">apachectl</code>.  For example:
            </p><pre class="screen">
$ cat /usr/bin/svn

#!/bin/sh

umask 002
/usr/bin/svn-real "$@"

</pre><p>&#21478;&#19968;&#20010;&#22312;&#31867;Unix&#31995;&#32479;&#19979;&#24120;&#35265;&#30340;&#38382;&#39064;&#26159;&#65292;&#24403;&#29256;&#26412;&#24211;&#22312;&#20351;&#29992;&#26102;&#65292;BerkeleyDB&#26377;&#26102;&#20505;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;&#26085;&#24535;&#25991;&#20214;&#26469;&#35760;&#24405;&#23427;&#30340;&#19996;&#35199;&#65292;&#21363;&#20351;&#36825;&#20010;&#29256;&#26412;&#24211;&#26159;&#23436;&#20840;&#30001;<span class="command"><strong>svn</strong></span>&#32452;&#25317;&#26377;&#65292;&#36825;&#20010;&#26032;&#21019;&#24314;&#30340;&#25991;&#20214;&#19981;&#26159;&#24517;&#39035;&#34987;&#21516;&#19968;&#20010;&#32452;&#25317;&#26377;&#65292;&#36825;&#32473;&#20320;&#30340;&#29992;&#25143;&#36896;&#25104;&#20102;&#26356;&#22810;&#22320;&#35768;&#21487;&#38382;&#39064;&#12290;&#19968;&#20010;&#22909;&#30340;&#24037;&#20316;&#21306;&#24212;&#35813;&#35774;&#32622;&#32452;&#30340;SUID&#23383;&#33410;&#21040;&#29256;&#26412;&#24211;&#30340;<code class="filename">db</code>&#30446;&#24405;&#65292;&#36825;&#20250;&#23548;&#33268;&#25152;&#26377;&#26032;&#21019;&#24314;&#30340;&#26085;&#24535;&#25991;&#20214;&#25317;&#26377;&#21516;&#29238;&#30446;&#24405;&#30456;&#21516;&#30340;&#32452;&#25317;&#26377;&#32773;&#12290;
            </p>
            <p>Once you've jumped through these hoops, your repository
                     should be accessible by all the necessary processes.  It may
                     seem a bit messy and complicated, but the problems of having
                     multiple users sharing write access to common files are classic
                     ones that are not often elegantly solved.
            </p>
            <p>Fortunately, most repository administrators will never
                     <span class="emphasis"><em>need</em></span> to have such a complex configuration.
                     Users who wish to access repositories that live on the same
                     machine are not limited to using <code class="literal">file://</code>
                     access URLs&#8212;they can typically contact the Apache HTTP
                     server or <span class="command"><strong>svnserve</strong></span> using
                     <code class="literal">localhost</code> for the server name in their
                     <code class="literal">http://</code> or <code class="literal">svn://</code> URL.
                     And maintaining multiple server processes for your Subversion
                     repositories is likely to be more of a headache than necessary.
                     We recommend that you choose a single server that best meets your
                     needs and stick with it!
            </p>
            <div class="sidebar">
               <p class="title"><b>svn+ssh &#26381;&#21153;&#22120;&#26816;&#26597;&#21015;&#34920;</b></p>
               <p>It can be quite tricky to get a bunch of users with
                          existing SSH accounts to share a repository without
                          permissions problems.  If you're confused about all the things
                          that you (as an administrator) need to do on a Unix-like
                          system, here's a quick checklist that resummarizes some of the
                          topics discussed in this section:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>&#25152;&#26377;&#30340;SSH&#29992;&#25143;&#38656;&#35201;&#33021;&#22815;&#35835;&#20889;&#29256;&#26412;&#24211;&#65292;&#25226;&#25152;&#26377;&#30340;SSH&#29992;&#25143;&#25918;&#21040;&#21516;&#19968;&#20010;&#32452;&#37324;&#12290;</p>
                     </li>
                     <li>
                        <p>&#35753;&#37027;&#20010;&#32452;&#25317;&#26377;&#25972;&#20010;&#29256;&#26412;&#24211;&#12290;</p>
                     </li>
                     <li>
                        <p>&#35774;&#32622;&#32452;&#30340;&#35775;&#38382;&#35768;&#21487;&#20026;&#35835;/&#20889;&#12290;</p>
                     </li>
                     <li>
                        <p>Your users need to use a sane umask when accessing the
                                       repository, so make sure <span class="command"><strong>svnserve</strong></span>
                                       (<code class="filename">/usr/bin/svnserve</code>, or wherever it
                                       lives in <code class="literal">$PATH</code>) is actually a wrapper
                                       script that runs <strong class="userinput"><code>umask 002</code></strong> and
                                       executes the real <span class="command"><strong>svnserve</strong></span>
                                       binary.
                        </p>
                     </li>
                     <li>
                        <p><span class="command"><strong>svnlook</strong></span>&#21644;<span class="command"><strong>svnadmin</strong></span>&#30340;&#20351;&#29992;&#31867;&#20284;&#65292;&#20351;&#29992;&#20581;&#20840;&#30340;umask&#25110;&#32773;&#20351;&#29992;&#21069;&#38754;&#25552;&#21040;&#30340;&#21253;&#35065;&#31243;&#24207;&#12290;
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
         <div class="footnotes"><br><hr width="100" align="left">
            <div class="footnote">
               <p><sup>[<a name="ftn.d0e11925" href="#d0e11925" class="para">41</a>] </sup>&#35265;RFC 2195&#12290;
               </p>
            </div>
            <div class="footnote">
               <p><sup>[<a name="ftn.d0e12328" href="#d0e12328" class="para">42</a>] </sup>&#35831;&#27880;&#24847;&#65292;&#20351;&#29992;<span class="command"><strong>svnserve</strong></span>&#30340;&#35775;&#38382;&#25511;&#21046;&#36827;&#34892;&#26435;&#38480;&#25511;&#21046;&#23558;&#20250;&#22833;&#21435;&#24847;&#20041;&#65292;&#22240;&#20026;&#29992;&#25143;&#24050;&#32463;&#30452;&#25509;&#35775;&#38382;&#21040;&#20102;&#29256;&#26412;&#24211;&#25968;&#25454;&#12290;
               </p>
            </div>
            <div class="footnote">
               <p><sup>[<a name="ftn.d0e12536" href="#d0e12536" class="para">43</a>] </sup>&#20182;&#20204;&#35752;&#21388;&#36825;&#26679;&#20570;&#12290;
               </p>
            </div>
            <div class="footnote">
               <p><sup>[<a name="ftn.d0e12887" href="#d0e12887" class="para">44</a>] </sup>&#24403;&#20351;&#29992;&#33258;&#31614;&#21517;&#30340;&#26381;&#21153;&#22120;&#26102;&#20173;&#20250;&#36973;&#21463;&#8220;<span class="quote">&#20013;&#38388;&#20154;</span>&#8221;&#25915;&#20987;&#65292;&#20294;&#26159;&#19982;&#20599;&#21462;&#26410;&#20445;&#25252;&#30340;&#23494;&#30721;&#30456;&#27604;&#65292;&#36825;&#26679;&#30340;&#25915;&#20987;&#27604;&#19968;&#20010;&#20598;&#28982;&#30340;&#33719;&#21462;&#35201;&#33392;&#38590;&#35768;&#22810;&#12290;
               </p>
            </div>
            <div class="footnote">
               <p><sup>[<a name="ftn.d0e12987" href="#d0e12987" class="para">45</a>] </sup>&#26356;&#22810;&#26377;&#23433;&#20840;&#24847;&#35782;&#30340;&#20154;&#19981;&#20250;&#24076;&#26395;&#22312;&#36816;&#34892;&#20013;<code class="filename">servers</code>&#25991;&#20214;&#20445;&#23384;&#23458;&#25143;&#31471;&#35777;&#20070;&#23494;&#30721;&#12290;
               </p>
            </div>
            <div class="footnote">
               <p><sup>[<a name="ftn.d0e13293" href="#d0e13293" class="para">46</a>] </sup>Back then, it was called ViewCVS.
               </p>
            </div>
            <div class="footnote">
               <p><sup>[<a name="ftn.d0e13736" href="#d0e13736" class="para">47</a>] </sup>&#26412;&#20070;&#30340;&#20849;&#21516;&#20027;&#39064;&#65281;
               </p>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="svn.reposadmin.html">&#19978;&#19968;&#39029;</a>&nbsp;
               </td>
               <td width="20%" align="center">&nbsp;</td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="svn.customization.html">&#19979;&#19968;&#39029;</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">&#31532;&nbsp;5&nbsp;&#31456;&nbsp;&#29256;&#26412;&#24211;&#31649;&#29702;&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td>
               <td width="40%" align="right" valign="top">&nbsp;&#31532;&nbsp;7&nbsp;&#31456;&nbsp;&#23450;&#21046;&#20320;&#30340; Subversion &#20307;&#39564;</td>
            </tr>
         </table>
      </div>
   </body>
</html>