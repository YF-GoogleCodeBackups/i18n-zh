<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>&#31532;&nbsp;4&nbsp;&#31456;&nbsp;&#20998;&#25903;&#19982;&#21512;&#24182;</title>
      <meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
      <link rel="start" href="index.html" title="Subversion &#26435;&#23041;&#25351;&#21335;">
      <link rel="up" href="index.html" title="Subversion &#26435;&#23041;&#25351;&#21335;">
      <link rel="prev" href="svn.advanced.html" title="&#31532;&nbsp;3&nbsp;&#31456;&nbsp;&#39640;&#32423;&#20027;&#39064;">
      <link rel="next" href="svn.reposadmin.html" title="&#31532;&nbsp;5&nbsp;&#31456;&nbsp;&#29256;&#26412;&#24211;&#31649;&#29702;">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">&#31532;&nbsp;4&nbsp;&#31456;&nbsp;&#20998;&#25903;&#19982;&#21512;&#24182;</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="svn.advanced.html">&#19978;&#19968;&#39029;</a>&nbsp;
               </td>
               <th width="60%" align="center">&nbsp;</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="svn.reposadmin.html">&#19979;&#19968;&#39029;</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="chapter" lang="zh-cn">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title"><a name="svn.branchmerge"></a>&#31532;&nbsp;4&nbsp;&#31456;&nbsp;&#20998;&#25903;&#19982;&#21512;&#24182;
                  </h2>
               </div>
            </div>
         </div>
         <div class="toc">
            <p><b>&#30446;&#24405;</b></p>
            <dl>
               <dt><span class="sect1"><a href="svn.branchmerge.html#svn.branchmerge.whatis">4.1. &#20160;&#20040;&#26159;&#20998;&#25903;&#65311;</a></span></dt>
               <dt><span class="sect1"><a href="svn.branchmerge.html#svn.branchmerge.using">4.2. &#20351;&#29992;&#20998;&#25903;</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.using.create">4.2.1. &#21019;&#24314;&#20998;&#25903;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.using.work">4.2.2. &#22312;&#20998;&#25903;&#19978;&#24037;&#20316;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.using.concepts">4.2.3. &#20998;&#25903;&#32972;&#21518;&#30340;&#20851;&#38190;&#27010;&#24565;</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="sect1"><a href="svn.branchmerge.html#svn.branchmerge.basicmerging">4.3. &#22522;&#26412;&#21512;&#24182;</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.changesets">4.3.1. &#21464;&#26356;&#38598;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchemerge.basicmerging.stayinsync">4.3.2. &#20445;&#25345;&#20998;&#25903;&#21516;&#27493;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.basicmerging.mergeinfo">4.3.3. &#21512;&#24182;&#20449;&#24687;&#21644;&#39044;&#35272;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.basicmerging.undo">4.3.4. &#21462;&#28040;&#20462;&#25913;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.basicmerging.resurrect">4.3.5. &#25214;&#22238;&#21024;&#38500;&#30340;&#39033;&#30446;</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="sect1"><a href="svn.branchmerge.html#svn.branchmerge.advanced">4.4. &#39640;&#32423;&#21512;&#24182;</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.cherrypicking">4.4.1. &#25688;&#24405;&#21512;&#24182;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.advanced.advancedsyntax">4.4.2. &#21512;&#24182;&#30340;&#35821;&#27861;&#65306;&#23436;&#25972;&#30340;&#25551;&#36848;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.nomergedata">4.4.3. &#19981;&#20351;&#29992;&#21512;&#24182;&#20449;&#24687;&#30340;&#21512;&#24182;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.advanced.mergeconflicts">4.4.4. &#21512;&#24182;&#20914;&#31361;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.advanced.blockchanges">4.4.5. &#38459;&#22622;&#20462;&#25913;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.advanced.logblame">4.4.6. &#24863;&#30693;&#21512;&#24182;&#30340;&#26085;&#24535;&#21644;&#27880;&#35299;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.advanced.ancestry">4.4.7. &#20851;&#27880;&#36824;&#26159;&#24573;&#35270;&#31062;&#20808;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.advanced.moves">4.4.8. &#21512;&#24182;&#21644;&#31227;&#21160;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.advanced.pre1.5clients">4.4.9. &#38459;&#22622;&#19981;&#30693;&#36947;&#21512;&#24182;&#30340;&#23458;&#25143;&#31471;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.advanced.finalword">4.4.10. &#21512;&#24182;&#36319;&#36394;&#30340;&#26368;&#32456;&#20449;&#24687;</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="sect1"><a href="svn.branchmerge.html#svn.branchmerge.switchwc">4.5. &#20351;&#29992;&#20998;&#25903;</a></span></dt>
               <dt><span class="sect1"><a href="svn.branchmerge.html#svn.branchmerge.tags">4.6. &#26631;&#31614;</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.tags.mksimple">4.6.1. &#24314;&#31435;&#31616;&#21333;&#26631;&#31614;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.tags.mkcomplex">4.6.2. &#24314;&#31435;&#22797;&#26434;&#26631;&#31614;</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="sect1"><a href="svn.branchmerge.html#svn.branchmerge.maint">4.7. &#32500;&#25252;&#20998;&#25903;</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.maint.layout">4.7.1. &#29256;&#26412;&#24211;&#24067;&#23616;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.maint.lifetime">4.7.2. &#25968;&#25454;&#30340;&#29983;&#21629;&#21608;&#26399;</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="sect1"><a href="svn.branchmerge.html#svn.branchmerge.commonpatterns">4.8. &#24120;&#29992;&#20998;&#25903;&#27169;&#24335;</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.commonpatterns.release">4.8.1. &#21457;&#24067;&#20998;&#25903;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.branchmerge.commonpatterns.feature">4.8.2. &#29305;&#24615;&#20998;&#25903;</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="sect1"><a href="svn.branchmerge.html#svn.advanced.vendorbr">4.9. &#20379;&#26041;&#20998;&#25903;</a></span></dt>
               <dd>
                  <dl>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.advanced.vendorbr.general">4.9.1. &#24120;&#35268;&#30340;&#20379;&#26041;&#20998;&#25903;&#31649;&#29702;&#36807;&#31243;</a></span></dt>
                     <dt><span class="sect2"><a href="svn.branchmerge.html#svn.advanced.vendorbr.svn_load_dirs">4.9.2. svn_load_dirs.pl</a></span></dt>
                  </dl>
               </dd>
               <dt><span class="sect1"><a href="svn.branchmerge.html#svn.branchmerge.summary">4.10. &#24635;&#32467;</a></span></dt>
            </dl>
         </div>
         <div class="blockquote">
            <table border="0" width="100%" cellspacing="0" cellpadding="0" class="blockquote" summary="Block quote">
               <tr>
                  <td width="10%" valign="top">&nbsp;</td>
                  <td width="80%" valign="top">
                     <p>&#8220;<span class="quote">&#21531;&#23376;&#21153;&#26412;</span>&#8221;
                     </p>
                  </td>
                  <td width="10%" valign="top">&nbsp;</td>
               </tr>
               <tr>
                  <td width="10%" valign="top">&nbsp;</td>
                  <td colspan="2" align="right" valign="top">--<span class="attribution">&#23380;&#23376;</span></td>
               </tr>
            </table>
         </div>
         <p>Branching, tagging, and merging are concepts common to
                almost all version control systems.  If you're not familiar with
                these ideas, we provide a good introduction in this chapter.  If
                you are familiar, hopefully you'll find it interesting to
                see how Subversion implements them.
         </p>
         <p>Branching is a fundamental part of version control.  If
                you're going to allow Subversion to manage your data, this
                is a feature you'll eventually come to depend on.  This chapter
                assumes that you're already familiar with Subversion's basic
                concepts (<a class="xref" href="svn.basic.html" title="&#31532;&nbsp;1&nbsp;&#31456;&nbsp;&#22522;&#26412;&#27010;&#24565;">&#31532;&nbsp;1&nbsp;&#31456; <i>&#22522;&#26412;&#27010;&#24565;</i></a>).
         </p>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.branchmerge.whatis"></a>4.1.&nbsp;&#20160;&#20040;&#26159;&#20998;&#25903;&#65311;
                     </h2>
                  </div>
               </div>
            </div>
            <p>&#20551;&#35774;&#20320;&#30340;&#24037;&#20316;&#26159;&#32500;&#25252;&#26412;&#20844;&#21496;&#19968;&#20010;&#37096;&#38376;&#30340;&#25163;&#20876;&#25991;&#26723;&#65292;&#19968;&#22825;&#65292;&#21478;&#19968;&#20010;&#37096;&#38376;&#38382;&#20320;&#35201;&#30456;&#21516;&#30340;&#25163;&#20876;&#65292;&#20294;&#19968;&#20123;&#22320;&#26041;&#20250;&#26377;&#8220;<span class="quote">&#21306;&#21035;</span>&#8221;&#65292;&#22240;&#20026;&#20182;&#20204;&#26377;&#19981;&#21516;&#30340;&#38656;&#35201;&#12290;
            </p>
            <p>&#36825;&#31181;&#24773;&#20917;&#19979;&#20320;&#20250;&#24590;&#26679;&#20570;&#65311;&#26174;&#32780;&#26131;&#35265;&#30340;&#26041;&#27861;&#26159;&#65306;&#20316;&#19968;&#20010;&#29256;&#26412;&#30340;&#25335;&#36125;&#65292;&#28982;&#21518;&#20998;&#21035;&#32500;&#25252;&#20004;&#20010;&#29256;&#26412;&#65292;&#21482;&#35201;&#20219;&#20309;&#19968;&#20010;&#37096;&#38376;&#21578;&#35785;&#35201;&#20570;&#19968;&#20123;&#23567;&#20462;&#25913;&#65292;&#20320;&#24517;&#39035;&#36873;&#25321;&#22312;&#23545;&#24212;&#30340;&#29256;&#26412;&#36827;&#34892;&#26356;&#25913;&#12290;</p>
            <p>&#20320;&#20063;&#35768;&#24076;&#26395;&#22312;&#20004;&#20010;&#29256;&#26412;&#21516;&#26102;&#20316;&#20462;&#25913;&#65292;&#20030;&#20010;&#20363;&#23376;&#65292;&#20320;&#22312;&#31532;&#19968;&#20010;&#29256;&#26412;&#21457;&#29616;&#20102;&#19968;&#20010;&#25340;&#20889;&#38169;&#35823;&#65292;&#24456;&#26174;&#28982;&#36825;&#20010;&#38169;&#35823;&#20063;&#20250;&#20986;&#29616;&#22312;&#31532;&#20108;&#20010;&#29256;&#26412;&#37324;&#12290;&#20004;&#20221;&#25991;&#26723;&#20960;&#20046;&#30456;&#21516;&#65292;&#27605;&#31455;&#65292;&#21482;&#26377;&#35768;&#22810;&#29305;&#23450;&#30340;&#24494;&#23567;&#21306;&#21035;&#12290;</p>
            <p>&#36825;&#26159;<em class="firstterm">&#20998;&#25903;</em>&#30340;&#22522;&#26412;&#27010;&#24565;&#8212;&#27491;&#22914;&#23427;&#30340;&#21517;&#23383;&#65292;&#24320;&#21457;&#30340;&#19968;&#26465;&#32447;&#29420;&#31435;&#20110;&#21478;&#19968;&#26465;&#32447;&#65292;&#22914;&#26524;&#22238;&#39038;&#21382;&#21490;&#65292;&#21487;&#20197;&#21457;&#29616;&#20004;&#26465;&#32447;&#20998;&#20139;&#20849;&#21516;&#30340;&#21382;&#21490;&#65292;&#19968;&#20010;&#20998;&#25903;&#24635;&#26159;&#20174;&#19968;&#20010;&#22791;&#20221;&#24320;&#22987;&#30340;&#65292;&#20174;&#37027;&#37324;&#24320;&#22987;&#65292;&#21457;&#23637;&#33258;&#24049;&#29420;&#26377;&#30340;&#21382;&#21490;(&#35265; <a class="xref" href="svn.branchmerge.html#svn.branchmerge.whatis.dia-1" title="&#22270;&nbsp;4.1.&nbsp;&#20998;&#25903;&#19982;&#24320;&#21457;">&#22270;&nbsp;4.1 &#8220;&#20998;&#25903;&#19982;&#24320;&#21457;&#8221;</a>)&#12290;
            </p>
            <div class="figure"><a name="svn.branchmerge.whatis.dia-1"></a><p class="title"><b>&#22270;&nbsp;4.1.&nbsp;&#20998;&#25903;&#19982;&#24320;&#21457;</b></p>
               <div class="figure-contents">
                  <div><img src="images/ch04dia1.png" alt="&#20998;&#25903;&#19982;&#24320;&#21457;"></div>
               </div>
            </div><br class="figure-break"><p>Subversion has commands to help you maintain parallel
                     branches of your files and directories.  It allows you to create
                     branches by copying your data, and remembers that the copies are
                     related to one another.  It also helps you duplicate changes
                     from one branch to another.  Finally, it can make portions of
                     your working copy reflect different branches so that you can
                     &#8220;<span class="quote">mix and match</span>&#8221; different lines of development in
                     your daily work.
            </p>
         </div>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.branchmerge.using"></a>4.2.&nbsp;&#20351;&#29992;&#20998;&#25903;
                     </h2>
                  </div>
               </div>
            </div>
            <p>At this point, you should understand how each commit creates
                     an entirely new filesystem tree (called a &#8220;<span class="quote">revision</span>&#8221;)
                     in the repository.  If you don't, go back and read about revisions in
                     <a class="xref" href="svn.basic.html#svn.basic.in-action.revs" title="1.3.3.&nbsp;&#20462;&#35746;&#29256;&#26412;">&#31532;&nbsp;1.3.3&nbsp;&#33410; &#8220;&#20462;&#35746;&#29256;&#26412;&#8221;</a>.
            </p>
            <p>&#23545;&#20110;&#26412;&#31456;&#33410;&#65292;&#25105;&#20204;&#20250;&#22238;&#21040;<a class="xref" href="svn.basic.html" title="&#31532;&nbsp;1&nbsp;&#31456;&nbsp;&#22522;&#26412;&#27010;&#24565;">&#31532;&nbsp;1&nbsp;&#31456; <i>&#22522;&#26412;&#27010;&#24565;</i></a>&#30340;&#21516;&#19968;&#20010;&#20363;&#23376;&#65292;&#36824;&#35760;&#24471;&#20320;&#21644;&#20320;&#30340;&#21512;&#20316;&#32773;Sally&#20998;&#20139;&#19968;&#20010;&#21253;&#21547;&#20004;&#20010;&#39033;&#30446;&#30340;&#29256;&#26412;&#24211;&#65292;<code class="filename">paint</code>&#21644;<code class="filename">calc</code>&#12290;&#27880;&#24847;<a class="xref" href="svn.branchmerge.html#svn.branchmerge.using.dia-1" title="&#22270;&nbsp;4.2.&nbsp;&#24320;&#22987;&#35268;&#21010;&#29256;&#26412;&#24211;">&#22270;&nbsp;4.2 &#8220;&#24320;&#22987;&#35268;&#21010;&#29256;&#26412;&#24211;&#8221;</a>&#65292;&#28982;&#32780;&#65292;&#29616;&#22312;&#27599;&#20010;&#39033;&#30446;&#30340;&#37117;&#26377;&#19968;&#20010;<code class="filename">trunk</code>&#21644;<code class="filename">branches</code>&#23376;&#30446;&#24405;&#65292;&#23427;&#20204;&#23384;&#22312;&#30340;&#29702;&#30001;&#24456;&#24555;&#23601;&#20250;&#28165;&#26224;&#36215;&#26469;&#12290;
            </p>
            <div class="figure"><a name="svn.branchmerge.using.dia-1"></a><p class="title"><b>&#22270;&nbsp;4.2.&nbsp;&#24320;&#22987;&#35268;&#21010;&#29256;&#26412;&#24211;</b></p>
               <div class="figure-contents">
                  <div><img src="images/ch04dia2.png" alt="&#24320;&#22987;&#35268;&#21010;&#29256;&#26412;&#24211;"></div>
               </div>
            </div><br class="figure-break"><p>&#20687;&#20197;&#21069;&#19968;&#26679;&#65292;&#20551;&#23450;Sally&#21644;&#20320;&#37117;&#26377;&#8220;<span class="quote">calc</span>&#8221;&#39033;&#30446;&#30340;&#19968;&#20221;&#25335;&#36125;&#65292;&#26356;&#20934;&#30830;&#22320;&#35828;&#65292;&#20320;&#26377;&#19968;&#20221;<code class="filename">/calc/trunk</code>&#30340;&#24037;&#20316;&#21103;&#26412;&#65292;&#36825;&#20010;&#39033;&#30446;&#30340;&#25152;&#26377;&#30340;&#25991;&#20214;&#22312;&#36825;&#20010;&#23376;&#30446;&#24405;&#37324;&#65292;&#32780;&#19981;&#26159;&#22312;<code class="filename">/calc</code>&#19979;&#65292;&#22240;&#20026;&#20320;&#30340;&#23567;&#32452;&#20915;&#23450;&#20351;&#29992;<code class="filename">/calc/trunk</code>&#20316;&#20026;&#24320;&#21457;&#20351;&#29992;&#30340;&#8220;<span class="quote">&#20027;&#32447;</span>&#8221;&#12290;
            </p>
            <p>Let's say that you've been given the task of implementing a
                     large software feature.  It will take a long time to write, and
                     will affect all the files in the project.  The immediate problem
                     is that you don't want to interfere with Sally, who is in the
                     process of fixing small bugs here and there.  She's depending on
                     the fact that the latest version of the project (in
                     <code class="filename">/calc/trunk</code>) is always usable.  If you
                     start committing your changes bit by bit, you'll surely break
                     things for Sally (and other team members as well).
            </p>
            <p>One strategy is to crawl into a hole: you and Sally can stop
                     sharing information for a week or two.  That is, start gutting
                     and reorganizing all the files in your working copy, but don't
                     commit or update until you're completely finished with the task.
                     There are a number of problems with this, though.  First, it's
                     not very safe.  Most people like to save their work to the
                     repository frequently, should something bad accidentally happen
                     to their working copy.  Second, it's not very flexible.  If you
                     do your work on different computers (perhaps you have a working
                     copy of <code class="filename">/calc/trunk</code> on two different
                     machines), you'll need to manually copy your changes back and
                     forth or just do all the work on a single computer.  By that
                     same token, it's difficult to share your changes in progress
                     with anyone else.  A common software development &#8220;<span class="quote">best
                        practice</span>&#8221; is to allow your peers to review your work as
                     you go.  If nobody sees your intermediate commits, you lose
                     potential feedback and may end up going down the wrong path for
                     weeks before another person on your team notices.  Finally, when
                     you're finished with all your changes, you might find it very
                     difficult to remerge your final work with the rest of the
                     company's main body of code.  Sally (or others) may have made
                     many other changes in the repository that are difficult to
                     incorporate into your working copy&#8212;especially if you
                     run <span class="command"><strong>svn update</strong></span> after weeks of
                     isolation.
            </p>
            <p>&#26368;&#20339;&#26041;&#26696;&#26159;&#21019;&#24314;&#20320;&#33258;&#24049;&#30340;&#20998;&#25903;&#65292;&#25110;&#32773;&#26159;&#29256;&#26412;&#24211;&#30340;&#24320;&#21457;&#32447;&#12290;&#36825;&#20801;&#35768;&#20320;&#20445;&#23384;&#30772;&#22351;&#20102;&#19968;&#21322;&#30340;&#24037;&#20316;&#32780;&#19981;&#25171;&#25200;&#21035;&#20154;&#65292;&#23613;&#31649;&#20320;&#20173;&#21487;&#20197;&#36873;&#25321;&#24615;&#30340;&#21516;&#20320;&#30340;&#21512;&#20316;&#32773;&#20998;&#20139;&#20449;&#24687;&#65292;&#20320;&#23558;&#20250;&#30475;&#21040;&#36825;&#26159;&#24590;&#26679;&#24037;&#20316;&#30340;&#12290;</p>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.using.create"></a>4.2.1.&nbsp;&#21019;&#24314;&#20998;&#25903;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Creating a branch is very simple&#8212;you make a copy of
                          the project in the repository using the <span class="command"><strong>svn
                                copy</strong></span> command.  Subversion is able to copy not only 
                          single files, but whole directories as well.  In this case,
                          you want to make a copy of the
                          <code class="filename">/calc/trunk</code> directory.  Where should the
                          new copy live?  Wherever you wish&#8212;it's a matter of
                          project policy.  Let's say that your team has a policy of
                          creating branches in the <code class="filename">/calc/branches</code>
                          area of the repository, and you want to name your branch
                          <code class="literal">my-calc-branch</code>.  You'll want to create a
                          new directory,
                          <code class="filename">/calc/branches/my-calc-branch</code>, which
                          begins its life as a copy of
                          <code class="filename">/calc/trunk</code>.
               </p>
               <p>You may already have seen <span class="command"><strong>svn copy</strong></span> used
                          to copy one file to another within a working copy.  But it can
                          also be used to do a &#8220;<span class="quote">remote</span>&#8221; copy entirely
                          within the repository.  Just copy one URL to another:
               </p><pre class="screen">
$ svn copy http://svn.example.com/repos/calc/trunk \
           http://svn.example.com/repos/calc/branches/my-calc-branch \
      -m "Creating a private branch of /calc/trunk."

Committed revision 341.
</pre><p>This command causes a near-instantaneous commit in the
                          repository, creating a new directory in revision 341.  The new
                          directory is a copy of <code class="filename">/calc/trunk</code>.  This
                          is shown in
                          <a class="xref" href="svn.branchmerge.html#svn.branchmerge.using.create.dia-1" title="&#22270;&nbsp;4.3.&nbsp;&#29256;&#26412;&#24211;&#19982;&#22797;&#21046;">&#22270;&nbsp;4.3 &#8220;&#29256;&#26412;&#24211;&#19982;&#22797;&#21046;&#8221;</a>.
                          <sup>[<a name="d0e6678" href="#ftn.d0e6678" class="footnote">20</a>]</sup>
                  
                          While it's also possible to create a branch by
                          using <span class="command"><strong>svn copy</strong></span> to duplicate a directory
                          within the working copy, this technique isn't recommended.  It
                          can be quite slow, in fact!  Copying a directory on the
                          client side is a linear-time operation, in that it actually
                          has to duplicate every file and subdirectory on the local disk.
                          Copying a directory on the server, however, is a constant-time
                          operation, and it's the way most people create
                          branches.
               </p>
               <div class="figure"><a name="svn.branchmerge.using.create.dia-1"></a><p class="title"><b>&#22270;&nbsp;4.3.&nbsp;&#29256;&#26412;&#24211;&#19982;&#22797;&#21046;</b></p>
                  <div class="figure-contents">
                     <div><img src="images/ch04dia3.png" alt="&#29256;&#26412;&#24211;&#19982;&#22797;&#21046;"></div>
                  </div>
               </div><br class="figure-break"><div class="sidebar">
                  <p class="title"><b>&#24265;&#20215;&#22797;&#21046;</b></p>
                  <p>Subversion's repository has a special design.  When you
                               copy a directory, you don't need to worry about the
                               repository growing huge&#8212;Subversion doesn't actually
                               duplicate any data.  Instead, it creates a new directory
                               entry that points to an <span class="emphasis"><em>existing</em></span> tree.
                               If you're an experienced Unix user, you'll recognize this as
                               the same concept behind a hard link.  As further changes are
                               made to files and directories beneath the copied directory,
                               Subversion continues to employ this hard link concept where
                               it can.  It duplicates data only when it is necessary to
                               disambiguate different versions of objects.
                  </p>
                  <p>&#36825;&#23601;&#26159;&#20026;&#20160;&#20040;&#32463;&#24120;&#21548;&#21040;Subversion&#29992;&#25143;&#35848;&#35770;&#8220;<span class="quote">&#24265;&#20215;&#30340;&#25335;&#36125;</span>&#8221;&#65292;&#19982;&#30446;&#24405;&#30340;&#22823;&#23567;&#26080;&#20851;&#8212;&#36825;&#20010;&#25805;&#20316;&#20250;&#20351;&#29992;&#24456;&#23569;&#30340;&#26102;&#38388;&#65292;&#20107;&#23454;&#19978;&#65292;&#36825;&#20010;&#29305;&#24615;&#26159;Subversion&#25552;&#20132;&#24037;&#20316;&#30340;&#22522;&#30784;&#65306;&#27599;&#19968;&#27425;&#29256;&#26412;&#37117;&#26159;&#21069;&#19968;&#20010;&#29256;&#26412;&#30340;&#19968;&#20010;&#8220;<span class="quote">&#24265;&#20215;&#30340;&#25335;&#36125;</span>&#8221;&#65292;&#21482;&#26377;&#23569;&#25968;&#39033;&#30446;&#20462;&#25913;&#20102;&#12290;(&#35201;&#38405;&#35835;&#26356;&#22810;&#20851;&#20110;&#36825;&#37096;&#20998;&#30340;&#20869;&#23481;&#65292;&#35775;&#38382;Subversion&#32593;&#31449;&#24182;&#19988;&#38405;&#35835;&#35774;&#35745;&#25991;&#26723;&#20013;&#30340;&#8220;<span class="quote">bubble up</span>&#8221;&#26041;&#27861;)&#12290;
                  </p>
                  <p>Of course, these internal mechanics of copying and
                               sharing data are hidden from the user, who simply sees
                               copies of trees.  The main point here is that copies are
                               cheap, both in time and in space.  If you create a branch
                               entirely within the repository (by running <strong class="userinput"><code>svn copy
                                     <em class="replaceable"><code>URL1</code></em> <em class="replaceable"><code>URL2</code></em></code></strong>), it's a quick, constant-time operation.
                               Make branches as often as you want.
                  </p>
               </div>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.using.work"></a>4.2.2.&nbsp;&#22312;&#20998;&#25903;&#19978;&#24037;&#20316;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#29616;&#22312;&#20320;&#24050;&#32463;&#22312;&#39033;&#30446;&#37324;&#24314;&#31435;&#20998;&#25903;&#20102;&#65292;&#20320;&#21487;&#20197;&#21462;&#20986;&#19968;&#20010;&#26032;&#30340;&#24037;&#20316;&#21103;&#26412;&#26469;&#24320;&#22987;&#20351;&#29992;&#65306;</p><pre class="screen">
$ svn checkout http://svn.example.com/repos/calc/branches/my-calc-branch
A  my-calc-branch/Makefile
A  my-calc-branch/integer.c
A  my-calc-branch/button.c
Checked out revision 341.
</pre><p>There's nothing special about this working copy; it simply
                          mirrors a different directory in the repository.  When you
                          commit changes, however, Sally won't see them when she
                          updates, because her working copy is of
                          <code class="filename">/calc/trunk</code>.  (Be sure to read <a class="xref" href="svn.branchmerge.html#svn.branchmerge.switchwc" title="4.5.&nbsp;&#20351;&#29992;&#20998;&#25903;">&#31532;&nbsp;4.5&nbsp;&#33410; &#8220;&#20351;&#29992;&#20998;&#25903;&#8221;</a> later in this chapter: the
                          <span class="command"><strong>svn switch</strong></span> command is an alternative way of
                          creating a working copy of a branch.)
               </p>
               <p>&#25105;&#20204;&#20551;&#23450;&#26412;&#21608;&#23601;&#35201;&#36807;&#21435;&#20102;&#65292;&#22914;&#19979;&#30340;&#25552;&#20132;&#21457;&#29983;&#65306;</p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>&#20320;&#20462;&#25913;&#20102;<code class="filename">/calc/branches/my-calc-branch/button.c</code>&#65292;&#29983;&#25104;&#20462;&#35746;&#29256;&#26412;342&#12290;
                        </p>
                     </li>
                     <li>
                        <p>&#20320;&#20462;&#25913;&#20102;<code class="filename">/calc/branches/my-calc-branch/integer.c</code>&#65292;&#29983;&#25104;&#20462;&#35746;&#29256;&#26412;343&#12290;
                        </p>
                     </li>
                     <li>
                        <p>Sally&#20462;&#25913;&#20102;<code class="filename">/calc/trunk/integer.c</code>&#65292;&#29983;&#25104;&#20102;&#20462;&#35746;&#29256;&#26412;344&#12290;
                        </p>
                     </li>
                  </ul>
               </div>
               <p>Now two independent lines of development (shown
                          in <a class="xref" href="svn.branchmerge.html#svn.branchmerge.using.work.dia-1" title="&#22270;&nbsp;4.4.&nbsp;&#19968;&#20010;&#25991;&#20214;&#30340;&#20998;&#25903;&#21382;&#21490;">&#22270;&nbsp;4.4 &#8220;&#19968;&#20010;&#25991;&#20214;&#30340;&#20998;&#25903;&#21382;&#21490;&#8221;</a>) are happening on
                          <code class="filename">integer.c</code>.
               </p>
               <div class="figure"><a name="svn.branchmerge.using.work.dia-1"></a><p class="title"><b>&#22270;&nbsp;4.4.&nbsp;&#19968;&#20010;&#25991;&#20214;&#30340;&#20998;&#25903;&#21382;&#21490;</b></p>
                  <div class="figure-contents">
                     <div><img src="images/ch04dia4.png" alt="&#19968;&#20010;&#25991;&#20214;&#30340;&#20998;&#25903;&#21382;&#21490;"></div>
                  </div>
               </div><br class="figure-break"><p>&#24403;&#20320;&#30475;&#21040;<code class="filename">integer.c</code>&#30340;&#25913;&#21464;&#26102;&#65292;&#20320;&#20250;&#21457;&#29616;&#24456;&#26377;&#36259;&#65306;
               </p><pre class="screen">
$ pwd
/home/user/my-calc-branch

$ svn log -v integer.c
------------------------------------------------------------------------
r343 | user | 2002-11-07 15:27:56 -0600 (Thu, 07 Nov 2002) | 2 lines
Changed paths:
   M /calc/branches/my-calc-branch/integer.c

* integer.c:  frozzled the wazjub.

------------------------------------------------------------------------
r341 | user | 2002-11-03 15:27:56 -0600 (Thu, 07 Nov 2002) | 2 lines
Changed paths:
   A /calc/branches/my-calc-branch (from /calc/trunk:340)

Creating a private branch of /calc/trunk.

------------------------------------------------------------------------
r303 | sally | 2002-10-29 21:14:35 -0600 (Tue, 29 Oct 2002) | 2 lines
Changed paths:
   M /calc/trunk/integer.c

* integer.c:  changed a docstring.

------------------------------------------------------------------------
r98 | sally | 2002-02-22 15:35:29 -0600 (Fri, 22 Feb 2002) | 2 lines
Changed paths:
   A /calc/trunk/integer.c

* integer.c:  adding this file to the project.

------------------------------------------------------------------------
</pre><p>Notice that Subversion is tracing the history of your
                          branch's <code class="filename">integer.c</code> all the way back
                          through time, even traversing the point where it was copied.
                          It shows the creation of the branch as an event in the
                          history, because <code class="filename">integer.c</code> was implicitly
                          copied when all of <code class="filename">/calc/trunk/</code> was
                          copied.  Now look at what happens when Sally runs the same
                          command on her copy of the file:
               </p><pre class="screen">
$ pwd
/home/sally/calc

$ svn log -v integer.c
------------------------------------------------------------------------
r344 | sally | 2002-11-07 15:27:56 -0600 (Thu, 07 Nov 2002) | 2 lines
Changed paths:
   M /calc/trunk/integer.c

* integer.c:  fix a bunch of spelling errors.

------------------------------------------------------------------------
r303 | sally | 2002-10-29 21:14:35 -0600 (Tue, 29 Oct 2002) | 2 lines
Changed paths:
   M /calc/trunk/integer.c

* integer.c:  changed a docstring.

------------------------------------------------------------------------
r98 | sally | 2002-02-22 15:35:29 -0600 (Fri, 22 Feb 2002) | 2 lines
Changed paths:
   A /calc/trunk/integer.c

* integer.c:  adding this file to the project.

------------------------------------------------------------------------
</pre><p>sally&#30475;&#21040;&#22905;&#33258;&#24049;&#30340;344&#20462;&#35746;&#65292;&#20320;&#20570;&#30340;343&#20462;&#25913;&#22905;&#30475;&#19981;&#21040;&#65292;&#20174;Subversion&#30475;&#26469;&#65292;&#20004;&#27425;&#25552;&#20132;&#21482;&#26159;&#24433;&#21709;&#29256;&#26412;&#24211;&#20013;&#19981;&#21516;&#20301;&#32622;&#19978;&#30340;&#20004;&#20010;&#25991;&#20214;&#12290;&#28982;&#32780;&#65292;Subversion<span class="emphasis"><em>&#26174;&#31034;</em></span>&#20102;&#20004;&#20010;&#25991;&#20214;&#26377;&#20849;&#21516;&#30340;&#21382;&#21490;&#65292;&#22312;&#20998;&#25903;&#25335;&#36125;&#20043;&#21069;&#65292;&#20182;&#20204;&#20351;&#29992;&#21516;&#19968;&#20010;&#25991;&#20214;&#65292;&#25152;&#20197;&#20320;&#21644;Sally&#37117;&#30475;&#21040;&#29256;&#26412;&#21495;303&#21040;98&#30340;&#20462;&#25913;&#12290;
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.using.concepts"></a>4.2.3.&nbsp;&#20998;&#25903;&#32972;&#21518;&#30340;&#20851;&#38190;&#27010;&#24565;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>You should remember two important lessons
                          from this section.  First, Subversion has no internal concept
                          of a branch&#8212;it knows only how to make copies.  When you
                          copy a directory, the resultant directory is only
                          a &#8220;<span class="quote">branch</span>&#8221; because <span class="emphasis"><em>you</em></span>
                          attach that meaning to it.  You may think of the directory
                          differently, or treat it differently, but to Subversion it's
                          just an ordinary directory that happens to carry some extra
                          historical information.
               </p>
               <p>Second, because of this copy mechanism, Subversion's
                          branches exist as <span class="emphasis"><em>normal filesystem
                                directories</em></span> in the repository.  This is different
                          from other version control systems, where branches are
                          typically defined by adding
                          extra-dimensional &#8220;<span class="quote">labels</span>&#8221; to collections of
                          files.  The location of your branch directory doesn't matter
                          to Subversion.  Most teams follow a convention of putting all
                          branches into a <code class="filename">/branches</code> directory, but
                          you're free to invent any policy you wish.
               </p>
            </div>
         </div>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.branchmerge.basicmerging"></a>4.3.&nbsp;&#22522;&#26412;&#21512;&#24182;
                     </h2>
                  </div>
               </div>
            </div>
            <p>&#29616;&#22312;&#20320;&#19982;Sally&#22312;&#21516;&#19968;&#20010;&#39033;&#30446;&#30340;&#24182;&#34892;&#20998;&#25903;&#19978;&#24037;&#20316;&#65306;&#20320;&#22312;&#31169;&#26377;&#20998;&#25903;&#19978;&#65292;&#32780;Sally&#22312;&#20027;&#24178;(<em class="firstterm">trunk</em>)&#25110;&#32773;&#21483;&#20570;&#24320;&#21457;&#20027;&#32447;&#19978;&#12290;
            </p>
            <p>&#30001;&#20110;&#26377;&#20247;&#22810;&#30340;&#20154;&#21442;&#19982;&#39033;&#30446;&#65292;&#22823;&#22810;&#25968;&#20154;&#25317;&#26377;&#20027;&#24178;&#25335;&#36125;&#26159;&#24456;&#27491;&#24120;&#30340;&#65292;&#20219;&#20309;&#20154;&#22914;&#26524;&#36827;&#34892;&#19968;&#20010;&#38271;&#21608;&#26399;&#30340;&#20462;&#25913;&#20250;&#20351;&#24471;&#20027;&#24178;&#38519;&#20837;&#28151;&#20081;&#65292;&#25152;&#20197;&#36890;&#24120;&#30340;&#20570;&#27861;&#26159;&#24314;&#31435;&#19968;&#20010;&#31169;&#26377;&#20998;&#25903;&#65292;&#25552;&#20132;&#20462;&#25913;&#21040;&#33258;&#24049;&#30340;&#20998;&#25903;&#65292;&#30452;&#21040;&#36825;&#38454;&#27573;&#24037;&#20316;&#32467;&#26463;&#12290;</p>
            <p>&#25152;&#20197;&#65292;&#22909;&#28040;&#24687;&#23601;&#26159;&#20320;&#21644;Sally&#19981;&#20250;&#20114;&#30456;&#25171;&#25200;&#65292;&#22351;&#28040;&#24687;&#26159;&#26377;&#26102;&#20505;&#20998;&#31163;&#20250;<span class="emphasis"><em>&#22826;</em></span>&#36828;&#12290;&#35760;&#20303;&#8220;<span class="quote">&#38381;&#38376;&#36896;&#36710;</span>&#8221;&#31574;&#30053;&#30340;&#38382;&#39064;&#65292;&#24403;&#20320;&#23436;&#25104;&#20320;&#30340;&#20998;&#25903;&#21518;&#65292;&#21487;&#33021;&#22240;&#20026;&#22826;&#22810;&#20914;&#31361;&#65292;&#24050;&#32463;&#26080;&#27861;&#36731;&#26131;&#21512;&#24182;&#20320;&#30340;&#20998;&#25903;&#21644;&#20027;&#24178;&#30340;&#20462;&#25913;&#12290;
            </p>
            <p>&#30456;&#21453;&#65292;&#22312;&#20320;&#24037;&#20316;&#30340;&#26102;&#20505;&#20320;&#21644;Sally&#20173;&#28982;&#21487;&#20197;&#32487;&#32493;&#20998;&#20139;&#20462;&#25913;&#65292;&#36825;&#20381;&#36182;&#20110;&#20320;&#20915;&#23450;&#20160;&#20040;&#20540;&#24471;&#20998;&#20139;&#65292;Subversion&#32473;&#20320;&#22312;&#20998;&#25903;&#38388;&#36873;&#25321;&#24615;&#8220;<span class="quote">&#25335;&#36125;</span>&#8221;&#20462;&#25913;&#30340;&#33021;&#21147;&#65292;&#24403;&#20320;&#23436;&#25104;&#20102;&#20998;&#25903;&#19978;&#30340;&#25152;&#26377;&#24037;&#20316;&#65292;&#25152;&#26377;&#30340;&#20998;&#25903;&#20462;&#25913;&#21487;&#20197;&#34987;&#25335;&#36125;&#22238;&#21040;&#20027;&#24178;&#12290;&#22312;Subversion&#26415;&#35821;&#37324;&#65292;&#36825;&#31181;&#20174;&#19968;&#20010;&#20998;&#25903;&#22797;&#21046;&#20462;&#25913;&#21040;&#21478;&#19968;&#20010;&#20998;&#25903;&#30340;&#27963;&#21160;&#31216;&#20026;<em class="firstterm">&#21512;&#24182;</em>&#65292;&#23427;&#26159;&#20351;&#29992;<span class="command"><strong>svn merge</strong></span>&#21629;&#20196;&#25191;&#34892;&#12290;
            </p>
            <p>In the examples that follow, we're assuming that both your
                     Subversion client and server are running Subversion 1.5 (or
                     later).  If either client or server is older than version 1.5,
                     things are more complicated: the system won't track changes
                     automatically, and you'll have to use painful manual methods to
                     achieve similar results.  That is, you'll always need to use the
                     detailed merge syntax to specify specific ranges of revisions to
                     replicate (see
                     <a class="xref" href="svn.branchmerge.html#svn.branchmerge.advanced.advancedsyntax" title="4.4.2.&nbsp;&#21512;&#24182;&#30340;&#35821;&#27861;&#65306;&#23436;&#25972;&#30340;&#25551;&#36848;">&#31532;&nbsp;4.4.2&nbsp;&#33410; &#8220;&#21512;&#24182;&#30340;&#35821;&#27861;&#65306;&#23436;&#25972;&#30340;&#25551;&#36848;&#8221;</a> later
                     in this chapter), and take special care to keep track of what's
                     already been merged and what hasn't.  For this reason,
                     we <span class="emphasis"><em>strongly</em></span> recommend that you make sure your
                     client and server are at least at version 1.5.
            </p>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.changesets"></a>4.3.1.&nbsp;&#21464;&#26356;&#38598;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Before we proceed further, we should warn you that there's
                          going to be a lot of discussion of &#8220;<span class="quote">changes</span>&#8221; in
                          the pages ahead.  A lot of people experienced with version
                          control systems use the terms &#8220;<span class="quote">change</span>&#8221;
                          and &#8220;<span class="quote">changeset</span>&#8221; interchangeably, and we should
                          clarify what Subversion understands as
                          a <em class="firstterm">changeset</em>.
               </p>
               <p>Everyone seems to have a slightly different definition
                          of changeset, or at least a different
                          expectation of what it means for a version control system to
                          have one.  For our purposes, let's say that a changeset is just
                          a collection of changes with a unique name.  The changes might
                          include textual edits to file contents, modifications to tree
                          structure, or tweaks to metadata.  In more common speak, a
                          changeset is just a patch with a name you can refer to.
               </p>
               <p>In Subversion, a global revision number N names a tree in
                          the repository: it's the way the repository looked after the
                          Nth commit.  It's also the name of an implicit changeset: if
                          you compare tree N with tree N&#8722;1, you can derive the exact
                          patch that was committed.  For this reason, it's easy to think
                          of revision N as not just a tree, but a changeset as well.  If
                          you use an issue tracker to manage bugs, you can use the
                          revision numbers to refer to particular patches that fix
                          bugs&#8212;for example,
                          &#8220;<span class="quote">this issue was fixed by r9238.</span>&#8221; Somebody
                          can then run <strong class="userinput"><code>svn log -r 9238</code></strong> to read about
                          the exact changeset that fixed the bug, and run
                          <strong class="userinput"><code>svn diff -c 9238</code></strong> to see the patch itself.
                          And (as you'll see shortly)
                          Subversion's <span class="command"><strong>svn merge</strong></span> command is able to use
                          revision numbers.  You can merge specific changesets from one
                          branch to another by naming them in the merge
                          arguments: passing <strong class="userinput"><code>-c 9238</code></strong> to <span class="command"><strong>svn merge</strong></span> would merge
                          changeset r9238 into your working copy.
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchemerge.basicmerging.stayinsync"></a>4.3.2.&nbsp;&#20445;&#25345;&#20998;&#25903;&#21516;&#27493;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Continuing with our running example, let's suppose that a
                          week has passed since you started working on your private
                          branch.  Your new feature isn't finished yet, but at the same
                          time you know that other people on your team have continued to
                          make important changes in the
                          project's <code class="filename">/trunk</code>.  It's in your best
                          interest to replicate those changes to your own branch, just
                          to make sure they mesh well with your changes.  In fact, this
                          is a best practice: frequently keeping your branch in sync
                          with the main development line helps
                          prevent &#8220;<span class="quote">surprise</span>&#8221; conflicts when it comes time
                          for you to fold your changes back into the trunk.
               </p>
               <p>Subversion is aware of the history of your branch and
                          knows when it divided away from the trunk.  To replicate the
                          latest, greatest trunk changes to your branch, first make sure
                          your working copy of the branch
                          is &#8220;<span class="quote">clean</span>&#8221;&#8212;that it has no local
                          modifications reported by <span class="command"><strong>svn status</strong></span>.  Then
                          simply run:
               </p><pre class="screen">
$ pwd
/home/user/my-calc-branch

$ svn merge ^/trunk
--- Merging r345 through r356 into '.':
U    button.c
U    integer.c
</pre><p>This basic syntax&#8212;<strong class="userinput"><code>svn merge
                                <em class="replaceable"><code>URL</code></em></code></strong>&#8212;tells
                          Subversion to merge all recent changes from the URL to the
                          current working directory (which is typically the root of your
                          working copy).  Also notice that we're using the caret
                          (<code class="literal">^</code>) syntax<sup>[<a name="d0e6933" href="#ftn.d0e6933" class="footnote">21</a>]</sup> to avoid having to
                          type out the entire <code class="filename">/trunk</code> URL.
               </p>
               <p>After running the prior example, your branch working copy
                          now contains new local modifications, and these edits are
                          duplications of all of the changes that have happened on the
                          trunk since you first created your branch:
               </p><pre class="screen">
$ svn status
 M     .
M      button.c
M      integer.c
</pre><p>At this point, the wise thing to do is look at the changes
                          carefully with <span class="command"><strong>svn diff</strong></span>, and then build and
                          test your branch.  Notice that the current working directory
                          (&#8220;<span class="quote"><code class="filename">.</code></span>&#8221;) has also been
                          modified; the <span class="command"><strong>svn diff</strong></span> will show that
                          its <code class="literal">svn:mergeinfo</code> property has been either
                          created or modified.  This is important merge-related metadata
                          that you should <span class="emphasis"><em>not</em></span> touch, since it will
                          be needed by future <span class="command"><strong>svn merge</strong></span> commands.
                          (We'll learn more about this metadata later in the
                          chapter.)
               </p>
               <p>After performing the merge, you might also need to resolve
                          some conflicts (just as you do with <span class="command"><strong>svn
                                update</strong></span>) or possibly make some small edits to get
                          things working properly.  (Remember, just because there are
                          no <span class="emphasis"><em>syntactic</em></span> conflicts doesn't mean there
                          aren't any <span class="emphasis"><em>semantic</em></span> conflicts!)  If you
                          encounter serious problems, you can always abort the local
                          changes by running <strong class="userinput"><code>svn revert . -R</code></strong> (which
                          will undo all local modifications) and start a
                          long &#8220;<span class="quote">what's going on?</span>&#8221; discussion with your
                          collaborators.  If things look good, however, you can
                          submit these changes into the repository:
               </p><pre class="screen">
$ svn commit -m "Merged latest trunk changes to my-calc-branch."
Sending        .
Sending        button.c
Sending        integer.c
Transmitting file data ..
Committed revision 357.
</pre><p>At this point, your private branch is now &#8220;<span class="quote">in
                               sync</span>&#8221; with the trunk, so you can rest easier knowing
                            that as you continue to work in isolation, you're not
                            drifting too far away from what everyone else is
                            doing.
               </p>
               <div class="sidebar">
                  <p class="title"><b>&#20026;&#20160;&#20040;&#19981;&#20351;&#29992;&#34917;&#19969;&#65311;</b></p>
                  <p>&#20063;&#35768;&#20320;&#30340;&#33041;&#20013;&#20250;&#20986;&#29616;&#19968;&#20010;&#38382;&#39064;&#65292;&#29305;&#21035;&#22914;&#26524;&#20320;&#26159;Unix&#29992;&#25143;&#65292;&#20026;&#20160;&#20040;&#38750;&#35201;&#20351;&#29992;<span class="command"><strong>svn merge</strong></span>&#65311;&#20026;&#20160;&#20040;&#19981;&#31616;&#21333;&#30340;&#20351;&#29992;&#25805;&#20316;&#31995;&#32479;&#30340;<span class="command"><strong>patch</strong></span>&#21629;&#20196;&#26469;&#36827;&#34892;&#30456;&#21516;&#30340;&#24037;&#20316;&#65311;&#20363;&#22914;&#65306;
                  </p><pre class="screen">
$ cd my-calc-branch
$ svn diff -r 341:HEAD ^/trunk &gt; patchfile
$ patch -p0  &lt; patchfile
Patching file integer.c using Plan A...
Hunk #1 succeeded at 147.
Hunk #2 succeeded at 164.
Hunk #3 succeeded at 241.
Hunk #4 succeeded at 249.
done
</pre><p>&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#30830;&#23454;&#27809;&#26377;&#21306;&#21035;&#65292;&#20294;&#26159;<span class="command"><strong>svn merge</strong></span>&#26377;&#36229;&#36234;<span class="command"><strong>patch</strong></span>&#30340;&#29305;&#21035;&#33021;&#21147;&#65292;&#20351;&#29992;<span class="command"><strong>patch</strong></span>&#23545;&#25991;&#20214;&#26684;&#24335;&#26377;&#19968;&#23450;&#30340;&#38480;&#21046;&#65292;&#23427;&#21482;&#33021;&#38024;&#23545;&#25991;&#20214;&#20869;&#23481;&#65292;&#27809;&#26377;&#26041;&#27861;&#34920;&#29616;<span class="emphasis"><em>&#30446;&#24405;&#26641;</em></span>&#30340;&#20462;&#25913;&#65292;&#20363;&#22914;&#28155;&#21152;&#12289;&#21024;&#38500;&#25110;&#26159;&#25913;&#21517;&#12290;&#22914;&#26524;Sally&#30340;&#20462;&#25913;&#21253;&#25324;&#22686;&#21152;&#19968;&#20010;&#26032;&#30340;&#30446;&#24405;&#65292;<span class="command"><strong>svn diff</strong></span>&#19981;&#20250;&#27880;&#24847;&#21040;&#36825;&#20123;&#65292;<span class="command"><strong>svn diff</strong></span>&#21482;&#20250;&#36755;&#20986;&#26377;&#38480;&#30340;&#34917;&#19969;&#26684;&#24335;&#65292;&#25152;&#20197;&#26377;&#20123;&#38382;&#39064;&#26080;&#27861;&#34920;&#36798;&#12290; 
                  </p>
                  <p>The <span class="command"><strong>svn merge</strong></span> command, however, can
                               express changes in tree structure and properties by directly
                               applying them to your working copy.  Even more important,
                               this command records the changes that have been duplicated
                               to your branch so that Subversion is aware of exactly which
                               changes exist in each location (see
                               <a class="xref" href="svn.branchmerge.html#svn.branchmerge.basicmerging.mergeinfo" title="4.3.3.&nbsp;&#21512;&#24182;&#20449;&#24687;&#21644;&#39044;&#35272;">&#31532;&nbsp;4.3.3&nbsp;&#33410; &#8220;&#21512;&#24182;&#20449;&#24687;&#21644;&#39044;&#35272;&#8221;</a>.)
                               This is a critical feature that makes branch management
                               usable; without it, users would have to manually keep notes
                               on which sets of changes have or haven't been merged
                               yet.
                  </p>
               </div>
               <p>Suppose that another week has passed.  You've committed
                          more changes to your branch, and your comrades have continued
                          to improve the trunk as well.  Once again, you'd like to
                          replicate the latest trunk changes to your branch and bring
                          yourself in sync.  Just run the same merge command
                          again!
               </p><pre class="screen">
$ svn merge ^/trunk
--- Merging r357 through r380 into '.':
U    integer.c
U    Makefile
A    README
</pre><p>Subversion knows which trunk changes you've already
                          replicated to your branch, so it carefully replicates only
                          those changes you don't yet have.  Once again, you'll have to
                          build, test, and <span class="command"><strong>svn commit</strong></span> the local
                          modifications to your branch.
               </p>
               <p>What happens when you finally finish your work, though?
                          Your new feature is done, and you're ready to merge your
                          branch changes back to the trunk (so your team can enjoy the
                          bounty of your labor).  The process is simple.  First, bring
                          your branch in sync with the trunk again, just as you've been
                          doing all along:
               </p><pre class="screen">
$ svn merge ^/trunk
--- Merging r381 through r385 into '.':
U    button.c
U    README

$ # build, test, ...

$ svn commit -m "Final merge of trunk changes to my-calc-branch."
Sending        .
Sending        button.c
Sending        README
Transmitting file data ..
Committed revision 390.
</pre><p>Now, you use <span class="command"><strong>svn merge</strong></span> to replicate
                          your branch changes back into the trunk.  You'll need an
                          up-to-date working copy of <code class="filename">/trunk</code>.  You
                          can do this by either doing an <span class="command"><strong>svn
                                checkout</strong></span>, dredging up an old trunk working copy from
                          somewhere on your disk, or using <span class="command"><strong>svn 
                                switch</strong></span> (see
                          <a class="xref" href="svn.branchmerge.html#svn.branchmerge.switchwc" title="4.5.&nbsp;&#20351;&#29992;&#20998;&#25903;">&#31532;&nbsp;4.5&nbsp;&#33410; &#8220;&#20351;&#29992;&#20998;&#25903;&#8221;</a>.) However you get a
                          trunk working copy, remember that it's a best practice to do
                          your merge into a working copy that
                          has <span class="emphasis"><em>no</em></span> local edits and has been recently
                          updated (i.e., is not a mixture of local revisions).  If your
                          working copy isn't &#8220;<span class="quote">clean</span>&#8221; in these ways, you can
                          run into some unnecessary conflict-related headaches
                          and <span class="command"><strong>svn merge</strong></span> will likely return an
                          error.
               </p>
               <p>Once you have a clean working copy of the trunk, you're
                          ready to merge your branch back into it:
               </p><pre class="screen">
$ pwd
/home/user/calc-trunk

$ svn update  # (make sure the working copy is up to date)
At revision 390.

$ svn merge --reintegrate ^/branches/my-calc-branch
--- Merging differences between repository URLs into '.':
U    button.c
U    integer.c
U    Makefile
 U   .

$ # build, test, verify, ...

$ svn commit -m "Merge my-calc-branch back into trunk!"
Sending        .
Sending        button.c
Sending        integer.c
Sending        Makefile
Transmitting file data ..
Committed revision 391.
</pre><p>Congratulations, your branch has now been remerged back
                          into the main line of development.  Notice our use of
                          the <code class="option">--reintegrate</code> option this time around.
                          The option is critical for reintegrating changes from a branch
                          back into its original line of development&#8212;don't forget
                          it!  It's needed because this sort of &#8220;<span class="quote">merge
                             back</span>&#8221; is a different sort of work than what you've been
                          doing up until now.  Previously, we had been
                          asking <span class="command"><strong>svn merge</strong></span> to grab the &#8220;<span class="quote">next
                             set</span>&#8221; of changes from one line of development (the
                          trunk) and duplicate them to another (your branch).  This is
                          fairly straightforward, and each time Subversion knows how to
                          pick up where it left off.  In our prior examples, you can see
                          that first it merges the ranges 345:356 from trunk to branch;
                          later on, it continues by merging the next contiguously
                          available range, 356:380.  When doing the final sync, it
                          merges the range 380:385.
               </p>
               <p>When merging your branch back to the trunk, however, the
                          underlying mathematics is quite different.  Your feature
                          branch is now a mishmosh of both duplicated trunk changes and
                          private branch changes, so there's no simple contiguous range
                          of revisions to copy over.  By specifying
                          the <code class="option">--reintegrate</code> option, you're asking
                          Subversion to carefully replicate <span class="emphasis"><em>only</em></span>
                          those changes unique to your branch.  (And in fact, it does
                          this by comparing the latest trunk tree with the latest branch
                          tree:  the resulting difference is exactly your branch
                          changes!)
               </p>
               <p>Now that your private branch is merged to trunk, you may
                          wish to remove it from the repository:
               </p><pre class="screen">
$ svn delete ^/branches/my-calc-branch \
      -m "Remove my-calc-branch."
Committed revision 392.
</pre><p>But wait!  Isn't the history of that branch valuable?
                          What if somebody wants to audit the evolution of your feature
                          someday and look at all of your branch changes?  No need to
                          worry.  Remember that even though your branch is no longer
                          visible in the <code class="filename">/branches</code> directory, its
                          existence is still an immutable part of the repository's
                          history.  A simple <span class="command"><strong>svn log</strong></span> command on
                          the <code class="filename">/branches</code> URL will show the entire
                          history of your branch.  Your branch can even be resurrected
                          at some point, should you desire (see
                          <a class="xref" href="svn.branchmerge.html#svn.branchmerge.basicmerging.resurrect" title="4.3.5.&nbsp;&#25214;&#22238;&#21024;&#38500;&#30340;&#39033;&#30446;">&#31532;&nbsp;4.3.5&nbsp;&#33410; &#8220;&#25214;&#22238;&#21024;&#38500;&#30340;&#39033;&#30446;&#8221;</a>).
               </p>
               <p>In Subversion 1.5, once
                          a <code class="option">--reintegrate</code> merge is done from branch to trunk,
                          the branch is no longer usable for further work.  It's not
                          able to correctly absorb new trunk changes, nor can it be
                          properly reintegrated to trunk again.  For this reason, if you
                          want to keep working on your feature branch, we recommend
                          destroying it and then re-creating it from the trunk:
               </p><pre class="screen">
$ svn delete http://svn.example.com/repos/calc/branches/my-calc-branch \
      -m "Remove my-calc-branch."
Committed revision 392.

$ svn copy http://svn.example.com/repos/calc/trunk \
           http://svn.example.com/repos/calc/branches/new-branch
      -m "Create a new branch from trunk."
Committed revision 393.

$ cd my-calc-branch

$ svn switch ^/branches/new-branch
Updated to revision 393.
</pre><p>The final command in the prior example&#8212;<span class="command"><strong>svn
                                switch</strong></span>&#8212;is a way of updating an existing working
                          copy to reflect a different repository directory.  We'll discuss
                          this more in <a class="xref" href="svn.branchmerge.html#svn.branchmerge.switchwc" title="4.5.&nbsp;&#20351;&#29992;&#20998;&#25903;">&#31532;&nbsp;4.5&nbsp;&#33410; &#8220;&#20351;&#29992;&#20998;&#25903;&#8221;</a>.
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.basicmerging.mergeinfo"></a>4.3.3.&nbsp;&#21512;&#24182;&#20449;&#24687;&#21644;&#39044;&#35272;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>The basic mechanism Subversion uses to track
                          changesets&#8212;that is, which changes have been merged to
                          which branches&#8212;is by recording data in properties.
                          Specifically, merge data is tracked in
                          the <code class="literal">svn:mergeinfo</code> property attached to
                          files and directories.  (If you're not familiar with
                          Subversion properties, now is the time to skim
                          <a class="xref" href="svn.advanced.html#svn.advanced.props" title="3.2.&nbsp;&#23646;&#24615;">&#31532;&nbsp;3.2&nbsp;&#33410; &#8220;&#23646;&#24615;&#8221;</a>.)
               </p>
               <p>You can examine the property, just like any
                          other:
               </p><pre class="screen">
$ cd my-calc-branch
$ svn propget svn:mergeinfo .
/trunk:341-390
</pre><p>It is <span class="emphasis"><em>not</em></span> recommended that you change
                          the value of this property yourself, unless you really know
                          what you're doing.  This property is automatically maintained
                          by Subversion whenever you run <span class="command"><strong>svn merge</strong></span>.
                          Its value indicates which changes (at a given path) have been
                          replicated into the directory in question.  In this case, the
                          path is <code class="filename">/trunk</code> and the directory which
                          has received the specific changes
                          is <code class="filename">/branches/my-calc-branch</code>.
               </p>
               <p>There's also a subcommand, <span class="command"><strong>svn
                                mergeinfo</strong></span>, which can be helpful in seeing not only
                          which changesets a directory has absorbed, but also which
                          changesets it's still eligible to receive.  This gives a sort
                          of preview of the next set of changes that <span class="command"><strong>svn
                                merge</strong></span> will replicate to your branch.
               </p><pre class="screen">
$ cd my-calc-branch

# Which changes have already been merged from trunk to branch?
$ svn mergeinfo ^/trunk
r341
r342
r343
&#8230;
r388
r389
r390

# Which changes are still eligible to merge from trunk to branch?
$ svn mergeinfo ^/trunk --show-revs eligible
r391
r392
r393
r394
r395
</pre><p>The <span class="command"><strong>svn mergeinfo</strong></span> command requires
                          a &#8220;<span class="quote">source</span>&#8221; URL (where the changes would be coming
                          from), and takes an optional &#8220;<span class="quote">target</span>&#8221; URL (where
                          the changes would be merged to).  If no target URL is given,
                          it assumes that the current working directory is the
                          target.  In the prior example, because we're querying our
                          branch working copy, the command assumes we're interested in
                          receiving changes to <code class="filename">/branches/mybranch</code>
                          from the specified trunk URL.
               </p>
               <p>Another way to get a more precise preview of a merge
                          operation is to use the <code class="option">--dry-run</code>
                          option:
               </p><pre class="screen">
$ svn merge ^/trunk --dry-run
U    integer.c

$ svn status
#  nothing printed, working copy is still unchanged.
</pre><p>The <code class="option">--dry-run</code> option doesn't actually
                          apply any local changes to the working copy.  It shows only
                          status codes that <span class="emphasis"><em>would</em></span> be printed in a
                          real merge.  It's useful for getting a &#8220;<span class="quote">high-level</span>&#8221;
                          preview of the potential merge, for those times
                          when running <span class="command"><strong>svn diff</strong></span> gives too much
                          detail.
               </p>
               <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <table border="0" summary="Tip">
                     <tr>
                        <td rowspan="2" align="center" valign="top" width="25"><img alt="[&#25552;&#31034;]" src="images/tip.png"></td>
                        <th align="left">&#25552;&#31034;</th>
                     </tr>
                     <tr>
                        <td align="left" valign="top">
                           <p>After performing a merge operation, but before committing
                                        the results of the merge, you can use <strong class="userinput"><code>svn diff
                                              --depth=empty <em class="replaceable"><code>/path/to/merge/target</code></em></code></strong> to see only
                                        the changes to the immediate target of your merge.  If your
                                        merge target was a directory, only property differences will
                                        be displayed.  This is a handy way to see the changes to the
                                        <code class="literal">svn:mergeinfo</code> property recorded by the
                                        merge operation, which will remind you about what you've
                                        just merged.
                           </p>
                        </td>
                     </tr>
                  </table>
               </div>
               <p>Of course, the best way to preview a merge operation is to
                          just do it!  Remember, running <span class="command"><strong>svn merge</strong></span>
                          isn't an inherently risky thing (unless you've made local
                          modifications to your working copy&#8212;but we've already
                          stressed that you shouldn't be merging into such an
                          environment).  If you don't like the results of the merge,
                          simply run <strong class="userinput"><code>svn revert . -R</code></strong> to revert the changes from
                          your working copy and retry the command with different
                          options.  The merge isn't final until you
                          actually <span class="command"><strong>svn commit</strong></span> the results.
               </p>
               <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <table border="0" summary="Tip">
                     <tr>
                        <td rowspan="2" align="center" valign="top" width="25"><img alt="[&#25552;&#31034;]" src="images/tip.png"></td>
                        <th align="left">&#25552;&#31034;</th>
                     </tr>
                     <tr>
                        <td align="left" valign="top">
                           <p>While it's perfectly fine to experiment with merges by
                                        running <span class="command"><strong>svn merge</strong></span> and <span class="command"><strong>svn
                                              revert</strong></span> over and over, you may run into some
                                        annoying (but easily bypassed) roadblocks.  For example, if
                                        the merge operation adds a new file (i.e., schedules it for
                                        addition), <span class="command"><strong>svn revert</strong></span> won't actually
                                        remove the file; it simply unschedules the addition.  You're
                                        left with an unversioned file.  If you then attempt to run
                                        the merge again, you may get conflicts due to the
                                        unversioned file &#8220;<span class="quote">being in the way.</span>&#8221; Solution?
                                        After performing a revert, be sure to clean up the working
                                        copy and remove unversioned files and directories.  The
                                        output of <span class="command"><strong>svn status</strong></span> should be as clean
                                        as possible, ideally showing no output.
                           </p>
                        </td>
                     </tr>
                  </table>
               </div>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.basicmerging.undo"></a>4.3.4.&nbsp;&#21462;&#28040;&#20462;&#25913;
                        </h3>
                     </div>
                  </div>
               </div>
               <p><span class="command"><strong>svn merge</strong></span>&#21478;&#19968;&#20010;&#24120;&#29992;&#30340;&#20570;&#27861;&#26159;&#21462;&#28040;&#24050;&#32463;&#20570;&#24471;&#25552;&#20132;&#65292;&#20551;&#35774;&#20320;&#24841;&#24555;&#30340;&#22312;<code class="filename">/calc/trunk</code>&#24037;&#20316;&#65292;&#20320;&#21457;&#29616;303&#29256;&#26412;&#23545;<code class="filename">integer.c</code>&#30340;&#20462;&#25913;&#23436;&#20840;&#38169;&#20102;&#65292;&#23427;&#19981;&#24212;&#35813;&#34987;&#25552;&#20132;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;<span class="command"><strong>svn merge</strong></span>&#26469;&#8220;<span class="quote">&#21462;&#28040;</span>&#8221;&#36825;&#20010;&#24037;&#20316;&#21103;&#26412;&#19978;&#25152;&#20316;&#30340;&#25805;&#20316;&#65292;&#28982;&#21518;&#25552;&#20132;&#26412;&#22320;&#20462;&#25913;&#21040;&#29256;&#26412;&#24211;&#65292;&#20320;&#35201;&#20570;&#24471;&#21482;&#26159;&#25351;&#23450;&#19968;&#20010;&#30456;&#21453;&#30340;&#21306;&#21035;&#12290;(&#20320;&#21487;&#20197;&#36890;&#36807;&#25351;&#23450;<code class="option">--revision 303:302--change -303</code></p><pre class="screen">
$ svn merge -c -303 ^/trunk
--- Reverse-merging r303 into 'integer.c':
U    integer.c

$ svn status
 M     .
M      integer.c

$ svn diff
&#8230;
# verify that the change is removed
&#8230;

$ svn commit -m "Undoing change committed in r303."
Sending        integer.c
Transmitting file data .
Committed revision 350.
</pre><p>As we mentioned earlier, one way to think about a
                          repository revision is as a specific changeset.  By using the
                          <code class="option">-r</code> option, you can ask <span class="command"><strong>svn
                                merge</strong></span> to apply a changeset, or a whole range of
                          changesets, to your working copy.  In our case of undoing a
                          change, we're asking <span class="command"><strong>svn merge</strong></span> to apply
                          changeset #303 to our working copy
                          <span class="emphasis"><em>backward</em></span>.
               </p>
               <p>&#35760;&#20303;&#22238;&#28378;&#20462;&#25913;&#21644;&#20219;&#20309;&#19968;&#20010;<span class="command"><strong>svn merge</strong></span>&#21629;&#20196;&#37117;&#19968;&#26679;&#65292;&#25152;&#20197;&#20320;&#24212;&#35813;&#20351;&#29992;<span class="command"><strong>svn status</strong></span>&#25110;&#26159;<span class="command"><strong>svn diff</strong></span>&#26469;&#30830;&#23450;&#20320;&#30340;&#24037;&#20316;&#22788;&#20110;&#26399;&#26395;&#30340;&#29366;&#24577;&#20013;&#65292;&#28982;&#21518;&#20351;&#29992;<span class="command"><strong>svn commit</strong></span>&#26469;&#25552;&#20132;&#65292;&#25552;&#20132;&#20043;&#21518;&#65292;&#36825;&#20010;&#29305;&#23450;&#20462;&#25913;&#38598;&#19981;&#20250;&#21453;&#26144;&#21040;<code class="literal">HEAD</code>&#29256;&#26412;&#20102;&#12290;
               </p>
               <p>Again, you may be thinking: well, that really didn't undo
                          the commit, did it?  The change still exists in revision 303.
                          If somebody checks out a version of the
                          <code class="filename">calc</code> project between revisions 303 and
                          349, she'll still see the bad change, right?
               </p>
               <p>&#26159;&#30340;&#65292;&#36825;&#26159;&#23545;&#30340;&#12290;&#24403;&#25105;&#20204;&#35828;&#8220;<span class="quote">&#21024;&#38500;</span>&#8221;&#19968;&#20010;&#20462;&#25913;&#26102;&#65292;&#25105;&#20204;&#21482;&#26159;&#35828;&#20174;<code class="literal">HEAD</code>&#21024;&#38500;&#65292;&#21407;&#22987;&#30340;&#20462;&#25913;&#36824;&#20445;&#23384;&#22312;&#29256;&#26412;&#24211;&#21382;&#21490;&#20013;&#65292;&#22312;&#22810;&#25968;&#24773;&#20917;&#19979;&#65292;&#36825;&#26159;&#36275;&#22815;&#22909;&#30340;&#12290;&#22823;&#22810;&#25968;&#20154;&#21482;&#26159;&#23545;&#36861;&#36394;<code class="literal">HEAD</code>&#29256;&#26412;&#24863;&#20852;&#36259;&#65292;&#22312;&#19968;&#20123;&#29305;&#23450;&#24773;&#20917;&#19979;&#65292;&#20320;&#20063;&#35768;&#24076;&#26395;&#27585;&#25481;&#25152;&#26377;&#25552;&#20132;&#30340;&#35777;&#25454;(&#25110;&#35768;&#26576;&#20010;&#20154;&#25552;&#20132;&#20102;&#19968;&#20010;&#31192;&#23494;&#25991;&#20214;)&#65292;&#36825;&#19981;&#26159;&#24456;&#23481;&#26131;&#30340;&#65292;&#22240;&#20026;Subversion&#35774;&#35745;&#29992;&#26469;&#19981;&#20002;&#22833;&#20219;&#20309;&#20449;&#24687;&#65292;&#27599;&#20010;&#20462;&#35746;&#29256;&#26412;&#37117;&#26159;&#20381;&#36182;&#20854;&#23427;&#20462;&#35746;&#29256;&#26412;&#30340;&#19981;&#21487;&#21464;&#30446;&#24405;&#26641; &#65292;&#20174;&#21382;&#21490;&#21024;&#38500;&#19968;&#20010;&#29256;&#26412;&#20250;&#23548;&#33268;&#22810;&#31859;&#35834;&#25928;&#24212;&#65292;&#20250;&#22312;&#21518;&#38754;&#30340;&#29256;&#26412;&#23548;&#33268;&#28151;&#20081;&#29978;&#33267;&#20250;&#24433;&#21709;&#25152;&#26377;&#30340;&#24037;&#20316;&#21103;&#26412;&#12290;
                  <sup>[<a name="d0e7309" href="#ftn.d0e7309" class="footnote">22</a>]</sup></p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.basicmerging.resurrect"></a>4.3.5.&nbsp;&#25214;&#22238;&#21024;&#38500;&#30340;&#39033;&#30446;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#29256;&#26412;&#25511;&#21046;&#31995;&#32479;&#38750;&#24120;&#37325;&#35201;&#30340;&#19968;&#20010;&#29305;&#24615;&#23601;&#26159;&#23427;&#30340;&#20449;&#24687;&#20174;&#19981;&#20002;&#22833;&#65292;&#21363;&#20351;&#24403;&#20320;&#21024;&#38500;&#20102;&#25991;&#20214;&#25110;&#30446;&#24405;&#65292;&#23427;&#20063;&#35768;&#20174;<code class="literal">HEAD</code>&#29256;&#26412;&#28040;&#22833;&#20102; &#65292;&#20294;&#36825;&#20010;&#23545;&#35937;&#20381;&#28982;&#23384;&#22312;&#20110;&#21382;&#21490;&#30340;&#26089;&#26399;&#29256;&#26412; &#65292;&#19968;&#20010;&#26032;&#25163;&#32463;&#24120;&#38382;&#21040;&#30340;&#38382;&#39064;&#26159;&#8220;<span class="quote">&#24590;&#26679;&#25214;&#22238;&#25105;&#30340;&#25991;&#20214;&#21644;&#30446;&#24405;&#65311;</span>&#8221;&#12290;
               </p>
               <p>The first step is to define
                          exactly <span class="emphasis"><em>which</em></span> item you're
                          trying to resurrect.  Here's a useful metaphor: you can think
                          of every object in the repository as existing in a sort of
                          two-dimensional coordinate system.  The first coordinate is a
                          particular revision tree, and the second coordinate is a path
                          within that tree.  So every version of your file or directory
                          can be defined by a specific coordinate pair.  (Remember the
                          &#8220;<span class="quote">peg revision</span>&#8221;
                          syntax&#8212;foo.c@224&#8212;mentioned back in
                          <a class="xref" href="svn.advanced.html#svn.advanced.pegrevs" title="3.9.&nbsp;Peg &#21644;&#23454;&#26045;&#20462;&#35746;&#29256;&#26412;">&#31532;&nbsp;3.9&nbsp;&#33410; &#8220;Peg &#21644;&#23454;&#26045;&#20462;&#35746;&#29256;&#26412;&#8221;</a>.) 
               </p>
               <p>First, you might need to use <span class="command"><strong>svn log</strong></span> to
                          discover the exact coordinate pair you wish to resurrect.  A
                          good strategy is to run <strong class="userinput"><code>svn log --verbose</code></strong>
                          in a directory that used to contain your deleted item.  The
                          <code class="option">--verbose</code> (<code class="option">-v</code>) option shows
                          a list of all changed items in each revision; all you need to
                          do is find the revision in which you deleted the file or
                          directory.  You can do this visually, or by using another tool
                          to examine the log output (via <span class="command"><strong>grep</strong></span>, or
                          perhaps via an incremental search in an editor).
               </p><pre class="screen">
$ cd parent-dir
$ svn log -v
&#8230;
------------------------------------------------------------------------
r808 | joe | 2003-12-26 14:29:40 -0600 (Fri, 26 Dec 2003) | 3 lines
Changed paths:
   D /calc/trunk/real.c
   M /calc/trunk/integer.c

Added fast fourier transform functions to integer.c.
Removed real.c because code now in double.c.
&#8230;
</pre><p>&#22312;&#36825;&#20010;&#20363;&#23376;&#37324;&#65292;&#20320;&#21487;&#20197;&#20551;&#23450;&#20320;&#27491;&#22312;&#25214;&#24050;&#32463;&#21024;&#38500;&#20102;&#30340;&#25991;&#20214;<code class="filename">real.c</code>&#65292;&#36890;&#36807;&#26597;&#25214;&#29238;&#30446;&#24405;&#30340;&#21382;&#21490; &#65292;&#20320;&#30693;&#36947;&#36825;&#20010;&#25991;&#20214;&#22312;808&#29256;&#26412;&#34987;&#21024;&#38500;&#65292;&#25152;&#20197;&#23384;&#22312;&#36825;&#20010;&#23545;&#35937;&#30340;&#29256;&#26412;&#22312;&#27492;&#20043;&#21069; &#12290;&#32467;&#35770;&#65306;&#20320;&#24819;&#20174;&#29256;&#26412;807&#25214;&#22238;<code class="filename">/calc/trunk/real.c</code>&#12290;
               </p>
               <p>&#20197;&#19978;&#26159;&#26368;&#37325;&#35201;&#30340;&#37096;&#20998;&#8212;&#37325;&#26032;&#25214;&#21040;&#20320;&#38656;&#35201;&#24674;&#22797;&#30340;&#23545;&#35937;&#12290;&#29616;&#22312;&#20320;&#24050;&#32463;&#30693;&#36947;&#35813;&#24674;&#22797;&#30340;&#25991;&#20214;&#65292;&#32780;&#20320;&#26377;&#20004;&#31181;&#36873;&#25321;&#12290;</p>
               <p>One option is to use <span class="command"><strong>svn merge</strong></span> to apply
                          revision 808 &#8220;<span class="quote">in reverse.</span>&#8221; (We already
                          discussed how to undo changes in
                          <a class="xref" href="svn.branchmerge.html#svn.branchmerge.basicmerging.undo" title="4.3.4.&nbsp;&#21462;&#28040;&#20462;&#25913;">&#31532;&nbsp;4.3.4&nbsp;&#33410; &#8220;&#21462;&#28040;&#20462;&#25913;&#8221;</a>.)  This
                          would have the effect of re-adding <code class="filename">real.c</code>
                          as a local modification.  The file would be scheduled for
                          addition, and after a commit, the file would again exist
                          in <code class="literal">HEAD</code>.
               </p>
               <p>In this particular example, however, this is probably not
                          the best strategy.  Reverse-applying revision 808 would not
                          only schedule <code class="filename">real.c</code> for addition, but
                          the log message indicates that it would also undo certain
                          changes to <code class="filename">integer.c</code>, which you don't
                          want.  Certainly, you could reverse-merge revision 808 and
                          then <span class="command"><strong>svn revert</strong></span> the local modifications to
                          <code class="filename">integer.c</code>, but this technique doesn't
                          scale well.  What if 90 files were changed in revision
                          808?
               </p>
               <p>A second, more targeted strategy is not to use
                          <span class="command"><strong>svn merge</strong></span> at all, but rather to use the
                          <span class="command"><strong>svn copy</strong></span> command.  Simply copy the exact
                          revision and path &#8220;<span class="quote">coordinate pair</span>&#8221; from the
                          repository to your working copy:
               </p><pre class="screen">
$ svn copy ^/trunk/real.c@807 ./real.c

$ svn status
A  +   real.c

$ svn commit -m "Resurrected real.c from revision 807, /calc/trunk/real.c."
Adding         real.c
Transmitting file data .
Committed revision 1390.
</pre><p>&#21152;&#21495;&#26631;&#24535;&#34920;&#26126;&#36825;&#20010;&#39033;&#30446;&#19981;&#20165;&#20165;&#26159;&#35745;&#21010;&#22686;&#21152;&#20013;&#65292;&#32780;&#19988;&#36824;&#8220;<span class="quote">&#21253;&#21547;&#20102;&#21382;&#21490;</span>&#8221;&#65292;Subversion&#35760;&#20303;&#20102;&#23427;&#26159;&#20174;&#21738;&#20010;&#25335;&#36125;&#36807;&#26469;&#30340;&#12290;&#22312;&#23558;&#26469;&#65292;&#23545;&#36825;&#20010;&#25991;&#20214;&#36816;&#34892;<span class="command"><strong>svn log</strong></span>&#20250;&#30475;&#21040;&#36825;&#20010;&#25991;&#20214;&#22312;&#29256;&#26412;807&#20043;&#21069;&#30340;&#21382;&#21490;&#65292;&#25442;&#21477;&#35805;&#35828;&#65292;<code class="filename">real.c</code>&#19981;&#26159;&#26032;&#30340;&#65292;&#32780;&#26159;&#21407;&#20808;&#21024;&#38500;&#30340;&#37027;&#19968;&#20010;&#30340;&#21518;&#20195;&#12290;&#36825;&#30475;&#36215;&#26469;&#26159;&#19968;&#20010;&#26377;&#29992;&#30340;&#21151;&#33021;&#65292;&#28982;&#32780;&#22914;&#26524;&#20320;&#24076;&#26395;&#19981;&#21253;&#21547;&#21382;&#21490;&#38142;&#25509;&#30340;&#24674;&#22797;&#19968;&#20010;&#25991;&#20214;&#65292;&#36825;&#20010;&#25216;&#24039;&#24037;&#20316;&#20381;&#28982;&#33391;&#22909;&#65306;
               </p><pre class="screen">
$ svn cat ^/trunk/real.c@807 &gt; ./real.c

$ svn add real.c
A         real.c

$ svn commit -m "Re-created real.c from revision 807."
Adding         real.c
Transmitting file data .
Committed revision 1390.
</pre><p>&#23613;&#31649;&#25105;&#20204;&#30340;&#20363;&#23376;&#21578;&#35785;&#25105;&#20204;&#22914;&#20309;&#25214;&#22238;&#25991;&#20214;&#65292;&#23545;&#20110;&#24674;&#22797;&#21024;&#38500;&#30340;&#30446;&#24405;&#20063;&#26159;&#19968;&#26679;&#30340;&#12290;&#20063;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#24674;&#22797;&#19981;&#24517;&#21457;&#29983;&#22312;&#20320;&#30340;&#24037;&#20316;&#21103;&#26412;&#8212;&#23436;&#20840;&#21487;&#20197;&#22312;&#29256;&#26412;&#24211;&#21457;&#29983;&#65306;</p><pre class="screen">
$ svn copy ^/trunk/real.c@807 ^/trunk/ \
      -m "Resurrect real.c from revision 807."
Committed revision 1390.

$ svn update
A    real.c
Updated to revision 1390.
</pre></div>
         </div>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.branchmerge.advanced"></a>4.4.&nbsp;&#39640;&#32423;&#21512;&#24182;
                     </h2>
                  </div>
               </div>
            </div>
            <p>Here ends the automated magic.  Sooner or later, once you
                     get the hang of branching and merging, you're going to have to
                     ask Subversion to merge <span class="emphasis"><em>specific</em></span> changes
                     from one place to another.  To do this, you're going to
                     have to start passing more complicated arguments to <span class="command"><strong>svn
                           merge</strong></span>.  The next section describes the fully expanded
                     syntax of the command and discusses a number of common
                     scenarios that require it.
            </p>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.cherrypicking"></a>4.4.1.&nbsp;&#25688;&#24405;&#21512;&#24182;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Just as the term &#8220;<span class="quote">changeset</span>&#8221; is often used in
                          version control systems, so is the term
                          <em class="firstterm">cherrypicking</em>.  This word refers to
                          the act of choosing <span class="emphasis"><em>one</em></span> specific
                          changeset from a branch and replicating it to another.
                          Cherrypicking may also refer to the act of duplicating a
                          particular set of (not necessarily contiguous!) changesets
                          from one branch to another.  This is in contrast to more
                          typical merging scenarios, where the &#8220;<span class="quote">next</span>&#8221;
                          contiguous range of revisions is duplicated
                          automatically.
               </p>
               <p>Why would people want to replicate just a single change?
                          It comes up more often than you'd think.  For example, let's
                          go back in time and imagine that you haven't yet merged your
                          private feature branch back to the trunk.  At the
                          water cooler, you get word that Sally made an interesting
                          change to <code class="filename">integer.c</code> on the trunk.
                          Looking over the history of commits to the trunk, you see that
                          in revision 355 she fixed a critical bug that directly
                          impacts the feature you're working on.  You might not be ready
                          to merge all the trunk changes to your branch just yet, but
                          you certainly need that particular bug fix in order to continue
                          your work.
               </p><pre class="screen">
$ svn diff -c 355 ^/trunk

Index: integer.c
===================================================================
--- integer.c	(revision 354)
+++ integer.c	(revision 355)
@@ -147,7 +147,7 @@
     case 6:  sprintf(info-&gt;operating_system, "HPFS (OS/2 or NT)"); break;
     case 7:  sprintf(info-&gt;operating_system, "Macintosh"); break;
     case 8:  sprintf(info-&gt;operating_system, "Z-System"); break;
-    case 9:  sprintf(info-&gt;operating_system, "CP/MM");
+    case 9:  sprintf(info-&gt;operating_system, "CP/M"); break;
     case 10:  sprintf(info-&gt;operating_system, "TOPS-20"); break;
     case 11:  sprintf(info-&gt;operating_system, "NTFS (Windows NT)"); break;
     case 12:  sprintf(info-&gt;operating_system, "QDOS"); break;
</pre><p>Just as you used <span class="command"><strong>svn diff</strong></span> in the prior
                          example to examine revision 355, you can pass the same option
                          to <span class="command"><strong>svn merge</strong></span>:
               </p><pre class="screen">
$ svn merge -c 355 ^/trunk
U    integer.c

$ svn status
M      integer.c
</pre><p>You can now go through the usual testing procedures before
                          committing this change to your branch.  After the commit,
                          Subversion marks r355 as having been merged to the branch so
                          that future &#8220;<span class="quote">magic</span>&#8221; merges that synchronize your
                          branch with the trunk know to skip over r355.  (Merging the
                          same change to the same branch almost always results in a
                          conflict!)
               </p><pre class="screen">
$ cd my-calc-branch

$ svn propget svn:mergeinfo .
/trunk:341-349,355

# Notice that r355 isn't listed as "eligible" to merge, because
# it's already been merged.
$ svn mergeinfo ^/trunk --show-revs eligible
r350
r351
r352
r353
r354
r356
r357
r358
r359
r360

$ svn merge ^/trunk
--- Merging r350 through r354 into '.':
 U   .
U    integer.c
U    Makefile
--- Merging r356 through r360 into '.':
 U   .
U    integer.c
U    button.c
</pre><p>This use case of replicating
                          (or <em class="firstterm">backporting</em>) bug fixes from one
                          branch to another is perhaps the most popular reason for
                          cherrypicking changes; it comes up all the time, for example,
                          when a team is maintaining a &#8220;<span class="quote">release branch</span>&#8221; of
                          software.  (We discuss this pattern in
                          <a class="xref" href="svn.branchmerge.html#svn.branchmerge.commonpatterns.release" title="4.8.1.&nbsp;&#21457;&#24067;&#20998;&#25903;">&#31532;&nbsp;4.8.1&nbsp;&#33410; &#8220;&#21457;&#24067;&#20998;&#25903;&#8221;</a>.)
               </p>
               <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <table border="0" summary="Warning">
                     <tr>
                        <td rowspan="2" align="center" valign="top" width="25"><img alt="[&#35686;&#21578;]" src="images/warning.png"></td>
                        <th align="left">&#35686;&#21578;</th>
                     </tr>
                     <tr>
                        <td align="left" valign="top">
                           <p>Did you notice how, in the last example, the merge
                                        invocation caused two distinct ranges of merges to be
                                        applied?  The <span class="command"><strong>svn merge</strong></span> command applied
                                        two independent patches to your working copy to
                                        skip over changeset 355, which your branch already
                                        contained.  There's nothing inherently wrong with this,
                                        except that it has the potential to make conflict resolution
                                        trickier.  If the first range of changes creates
                                        conflicts, you <span class="emphasis"><em>must</em></span> resolve them
                                        interactively for the merge process to continue and
                                        apply the second range of changes.  If you postpone a
                                        conflict from the first wave of changes, the whole merge
                                        command will bail out with an error message.
                                        <sup>[<a name="d0e7503" href="#ftn.d0e7503" class="footnote">23</a>]</sup> 
                                      
                           </p>
                        </td>
                     </tr>
                  </table>
               </div>
               <p>A word of warning: while <span class="command"><strong>svn diff</strong></span> and
                          <span class="command"><strong>svn merge</strong></span> are very similar in concept, they
                          do have different syntax in many cases.  Be sure to read about
                          them in <a class="xref" href="svn.ref.html" title="&#31532;&nbsp;9&nbsp;&#31456;&nbsp;Subversion &#23436;&#20840;&#21442;&#32771;">&#31532;&nbsp;9&nbsp;&#31456; <i>Subversion &#23436;&#20840;&#21442;&#32771;</i></a> for details, or ask
                          <span class="command"><strong>svn help</strong></span>.  For example, <span class="command"><strong>svn
                                merge</strong></span> requires a working copy path as a target, that is,
                          a place where it should apply the generated patch.  If the
                          target isn't specified, it assumes you are trying to perform
                          one of the following common operations:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>&#20320;&#24076;&#26395;&#21512;&#24182;&#30446;&#24405;&#20462;&#25913;&#21040;&#24037;&#20316;&#21103;&#26412;&#30340;&#24403;&#21069;&#30446;&#24405;&#12290;</p>
                     </li>
                     <li>
                        <p>&#20320;&#24076;&#26395;&#21512;&#24182;&#20462;&#25913;&#21040;&#20320;&#30340;&#24403;&#21069;&#24037;&#20316;&#30446;&#24405;&#30340;&#30456;&#21516;&#25991;&#20214;&#21517;&#30340;&#25991;&#20214;&#12290;</p>
                     </li>
                  </ul>
               </div>
               <p>&#22914;&#26524;&#20320;&#21512;&#24182;&#19968;&#20010;&#30446;&#24405;&#32780;&#27809;&#26377;&#25351;&#23450;&#29305;&#23450;&#30340;&#30446;&#26631;&#65292;<span class="command"><strong>svn merge</strong></span>&#20551;&#23450;&#31532;&#19968;&#31181;&#24773;&#20917;&#65292;&#22312;&#20320;&#30340;&#24403;&#21069;&#30446;&#24405;&#24212;&#29992;&#20462;&#25913;&#12290;&#22914;&#26524;&#20320;&#21512;&#24182;&#19968;&#20010;&#25991;&#20214;&#65292;&#32780;&#36825;&#20010;&#25991;&#20214;(&#25110;&#26159;&#19968;&#20010;&#26377;&#30456;&#21516;&#30340;&#21517;&#23383;&#25991;&#20214;)&#22312;&#20320;&#30340;&#24403;&#21069;&#24037;&#20316;&#30446;&#24405;&#23384;&#22312;&#65292;<span class="command"><strong>svn merge</strong></span>&#20551;&#23450;&#31532;&#20108;&#31181;&#24773;&#20917;&#65292;&#20320;&#24819;&#23545;&#36825;&#20010;&#21516;&#21517;&#25991;&#20214;&#20351;&#29992;&#21512;&#24182;&#12290;
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.advanced.advancedsyntax"></a>4.4.2.&nbsp;&#21512;&#24182;&#30340;&#35821;&#27861;&#65306;&#23436;&#25972;&#30340;&#25551;&#36848;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#20320;&#24050;&#32463;&#30475;&#21040;&#20102;<span class="command"><strong>svn merge</strong></span>&#21629;&#20196;&#30340;&#20363;&#23376;&#65292;&#20320;&#23558;&#20250;&#30475;&#21040;&#26356;&#22810;&#65292;&#22914;&#26524;&#20320;&#23545;&#21512;&#24182;&#26159;&#22914;&#20309;&#24037;&#20316;&#30340;&#24863;&#21040;&#36855;&#24785;&#65292;&#36825;&#24182;&#19981;&#22855;&#24618;&#65292;&#24456;&#22810;&#20154;&#21644;&#20320;&#19968;&#26679;&#12290;&#35768;&#22810;&#26032;&#29992;&#25143;(&#29305;&#21035;&#26159;&#23545;&#29256;&#26412;&#25511;&#21046;&#24456;&#38476;&#29983;&#30340;&#29992;&#25143;)&#20250;&#23545;&#36825;&#20010;&#21629;&#20196;&#30340;&#27491;&#30830;&#35821;&#27861;&#24863;&#21040;&#19981;&#30693;&#25152;&#25514;&#65292;&#19981;&#30693;&#36947;&#24590;&#26679;&#21644;&#20160;&#20040;&#26102;&#20505;&#20351;&#29992;&#36825;&#20010;&#29305;&#24615;&#65292;&#19981;&#35201;&#23475;&#24597;&#65292;&#36825;&#20010;&#21629;&#20196;&#23454;&#38469;&#19978;&#27604;&#20320;&#24819;&#35937;&#30340;&#31616;&#21333;&#65281;&#26377;&#19968;&#20010;&#31616;&#21333;&#30340;&#25216;&#24039;&#26469;&#24110;&#21161;&#20320;&#29702;&#35299;<span class="command"><strong>svn merge</strong></span>&#30340;&#34892;&#20026;&#12290;
               </p>
               <p>The main source of confusion is the
                          <span class="emphasis"><em>name</em></span> of the command.  The term
                          &#8220;<span class="quote">merge</span>&#8221; somehow denotes that branches are
                          combined together, or that some sort of mysterious
                          blending of data is going on.  That's not the case.  A better
                          name for the command might have been <span class="command"><strong>svn
                                diff-and-apply</strong></span>, because that's all that happens:
                          two repository trees are compared, and the differences are
                          applied to a working copy.
               </p>
               <p>If you're using <span class="command"><strong>svn merge</strong></span> to do basic
                          copying of changes between branches, it will generally do the
                          right thing automatically.  For example, a command such as the
                          following:
               </p><pre class="screen">
$ svn merge ^/branches/some-branch
</pre><p>will attempt to duplicate any changes made
                          on <code class="filename">some-branch</code> into your current working
                          directory, which is presumably a working copy that shares some
                          historical connection to the branch.  The command is smart
                          enough to only duplicate changes that your working copy
                          doesn't yet have.  If you repeat this command once a week, it
                          will only duplicate the &#8220;<span class="quote">newest</span>&#8221; branch changes
                          that happened since you last merged.
               </p>
               <p>If you choose to use the <span class="command"><strong>svn merge</strong></span>
                          command in all its full glory by giving it specific revision
                          ranges to duplicate, the command takes three main
                          arguments:
               </p>
               <div class="orderedlist">
                  <ol type="1">
                     <li>
                        <p>&#21021;&#22987;&#30340;&#29256;&#26412;&#26641;(&#36890;&#24120;&#21483;&#20570;&#27604;&#36739;&#30340;<em class="firstterm">&#24038;&#36793;</em>)&#65292;
                        </p>
                     </li>
                     <li>
                        <p>&#26368;&#32456;&#30340;&#29256;&#26412;&#26641;(&#36890;&#24120;&#21483;&#20570;&#27604;&#36739;&#30340;<em class="firstterm">&#21491;&#36793;</em>)&#65292;
                        </p>
                     </li>
                     <li>
                        <p>&#19968;&#20010;&#25509;&#25910;&#21306;&#21035;&#30340;&#24037;&#20316;&#21103;&#26412;(&#36890;&#24120;&#21483;&#20570;&#21512;&#24182;&#30340;<em class="firstterm">&#30446;&#26631;</em>)&#12290;
                        </p>
                     </li>
                  </ol>
               </div>
               <p>Once these three arguments are specified, the two trees
                          are compared, and the differences are applied to the
                          target working copy as local modifications.  When the command
                          is done, the results are no different than if you had
                          hand-edited the files or run various <span class="command"><strong>svn
                                add</strong></span> or <span class="command"><strong>svn delete</strong></span> commands
                          yourself.  If you like the results, you can commit them.  If
                          you don't like the results, you can simply <span class="command"><strong>svn
                                revert</strong></span> all of the changes.
               </p>
               <p><span class="command"><strong>svn merge</strong></span>&#30340;&#35821;&#27861;&#20801;&#35768;&#38750;&#24120;&#28789;&#27963;&#30340;&#25351;&#23450;&#19977;&#20010;&#24517;&#35201;&#30340;&#21442;&#25968;&#65292;&#22914;&#19979;&#26159;&#19968;&#20123;&#20363;&#23376;&#65306;
               </p><pre class="screen">
$ svn merge http://svn.example.com/repos/branch1@150 \
            http://svn.example.com/repos/branch2@212 \
            my-working-copy

$ svn merge -r 100:200 http://svn.example.com/repos/trunk my-working-copy

$ svn merge -r 100:200 http://svn.example.com/repos/trunk
</pre><p>The first syntax lays out all three arguments explicitly,
                          naming each tree in the form <span class="emphasis"><em>URL@REV</em></span> and
                          naming the working copy target.  The second syntax can be used
                          as a shorthand for situations when you're comparing two
                          different revisions of the same URL.  The last syntax shows
                          how the working copy argument is optional; if omitted, it
                          defaults to the current directory.
               </p>
               <p>While the first example shows the &#8220;<span class="quote">full</span>&#8221;
                          syntax of <span class="command"><strong>svn merge</strong></span>, it needs to be used
                          very carefully;  it can result in merges which do not record
                          any <code class="literal">svn:mergeinfo</code> metadata at all.  The
                          next section talks a bit more about this.
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.nomergedata"></a>4.4.3.&nbsp;&#19981;&#20351;&#29992;&#21512;&#24182;&#20449;&#24687;&#30340;&#21512;&#24182;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Subversion tries to generate merge metadata whenever it
                          can, to make future invocations of <span class="command"><strong>svn
                                merge</strong></span> smarter.  There are still situations, however,
                          where <code class="literal">svn:mergeinfo</code> data is not created or
                          changed.  Remember to be a bit wary of these scenarios:
               </p>
               <div class="variablelist">
                  <dl>
                     <dt><span class="term">&#21512;&#24182;&#26080;&#20851;&#30340;&#28304;</span></dt>
                     <dd>
                        <p>If you
                                       ask <span class="command"><strong>svn merge</strong></span> to compare two URLs that
                                       aren't related to each other, a patch will still be
                                       generated and applied to your working copy, but no merging
                                       metadata will be created.  There's no common history
                                       between the two sources, and future &#8220;<span class="quote">smart</span>&#8221;
                                       merges depend on that common history.
                        </p>
                     </dd>
                     <dt><span class="term">Merging from foreign repositories</span></dt>
                     <dd>
                        <p>While it's possible to run a
                                       command such as <strong class="userinput"><code>svn merge -r 100:200
                                             <em class="replaceable"><code>http://svn.foreignproject.com/repos/trunk</code></em></code></strong>, the
                                       resultant patch will also lack any historical merge
                                       metadata.  At time of this writing, Subversion has no way of
                                       representing different repository URLs within
                                       the <code class="literal">svn:mergeinfo</code> property.
                        </p>
                     </dd>
                     <dt><span class="term">Using <code class="option">--ignore-ancestry</code></span></dt>
                     <dd>
                        <p>If this option is passed to <span class="command"><strong>svn
                                             merge</strong></span>, it causes the merging logic to mindlessly
                                       generate differences the same way that <span class="command"><strong>svn
                                             diff</strong></span> does, ignoring any historical
                                       relationships.  We discuss this later in the chapter in
                                       <a class="xref" href="svn.branchmerge.html#svn.branchmerge.advanced.ancestry" title="4.4.7.&nbsp;&#20851;&#27880;&#36824;&#26159;&#24573;&#35270;&#31062;&#20808;">&#31532;&nbsp;4.4.7&nbsp;&#33410; &#8220;&#20851;&#27880;&#36824;&#26159;&#24573;&#35270;&#31062;&#20808;&#8221;</a>.
                        </p>
                     </dd>
                     <dt><span class="term">Applying reverse merges to a target's natural history</span></dt>
                     <dd>
                        <p>Earlier in this chapter 
                                           (<a class="xref" href="svn.branchmerge.html#svn.branchmerge.basicmerging.undo" title="4.3.4.&nbsp;&#21462;&#28040;&#20462;&#25913;">&#31532;&nbsp;4.3.4&nbsp;&#33410; &#8220;&#21462;&#28040;&#20462;&#25913;&#8221;</a>)
                                           we discussed how to use <span class="command"><strong>svn merge</strong></span>
                                           to apply a &#8220;<span class="quote">reverse patch</span>&#8221; as a way of
                                           rolling back changes.  If this technique is used to
                                           undo a change to an object's personal history (e.g.,
                                           commit r5 to the trunk, then immediately roll back r5
                                           using <strong class="userinput"><code>svn merge . -c -5</code></strong>), this
                                           sort of merge doesn't affect the recorded mergeinfo.
                                       <sup>[<a name="d0e7705" href="#ftn.d0e7705" class="footnote">24</a>]</sup>
                                       
                        </p>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.advanced.mergeconflicts"></a>4.4.4.&nbsp;&#21512;&#24182;&#20914;&#31361;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#23601;&#20687;<span class="command"><strong>svn update</strong></span>&#21629;&#20196;&#65292;<span class="command"><strong>svn merge</strong></span>&#20250;&#25226;&#20462;&#25913;&#24212;&#29992;&#21040;&#24037;&#20316;&#21103;&#26412;&#65292;&#22240;&#27492;&#23427;&#20063;&#20250;&#36896;&#25104;&#20914;&#31361;&#65292;&#22240;&#20026;<span class="command"><strong>svn merge</strong></span>&#36896;&#25104;&#30340;&#20914;&#31361;&#26377;&#26102;&#20505;&#20250;&#26377;&#20123;&#19981;&#21516;&#65292;&#26412;&#23567;&#33410;&#20250;&#35299;&#37322;&#36825;&#20123;&#21306;&#21035;&#12290;
               </p>
               <p>To begin with, assume that your working copy has no
                          local edits.  When you <span class="command"><strong>svn update</strong></span> to a
                          particular revision, the changes sent by the server will
                          always apply &#8220;<span class="quote">cleanly</span>&#8221; to your working copy.
                          The server produces the delta by comparing two trees: a
                          virtual snapshot of your working copy, and the revision tree
                          you're interested in.  Because the left hand side of the
                          comparison is exactly equal to what you already have, the
                          delta is guaranteed to correctly convert your working copy
                          into the right hand tree.
               </p>
               <p>&#20294;&#26159;<span class="command"><strong>svn merge</strong></span>&#27809;&#26377;&#36825;&#26679;&#30340;&#20445;&#35777;&#65292;&#20250;&#23548;&#33268;&#24456;&#22810;&#30340;&#28151;&#20081;&#65306;&#29992;&#25143;&#21487;&#20197;&#35810;&#38382;&#26381;&#21153;&#22120;&#27604;&#36739;<span class="emphasis"><em>&#20219;&#20309;</em></span>&#20004;&#20010;&#26641;&#65292;&#21363;&#20351;&#19968;&#20010;&#19982;&#24037;&#20316;&#21103;&#26412;&#27627;&#19981;&#30456;&#20851;&#30340;&#65281;&#36825;&#24847;&#21619;&#30528;&#26377;&#28508;&#22312;&#30340;&#20154;&#20026;&#38169;&#35823;&#65292;&#29992;&#25143;&#26377;&#26102;&#20505;&#20250;&#27604;&#36739;&#20004;&#20010;&#38169;&#35823;&#30340;&#26641;&#65292;&#21019;&#24314;&#30340;&#22686;&#37327;&#25968;&#25454;&#19981;&#20250;&#24178;&#20928;&#30340;&#24212;&#29992;&#65292;<span class="command"><strong>svn merge</strong></span>&#20250;&#23613;&#21147;&#24212;&#29992;&#26356;&#22810;&#30340;&#22686;&#37327;&#25968;&#25454;&#65292;&#20294;&#26159;&#26377;&#19968;&#20123;&#37096;&#20998;&#20063;&#35768;&#20250;&#38590;&#20197;&#23436;&#25104;&#65292;&#23601;&#20687;Unix&#19979;<span class="command"><strong>patch</strong></span>&#21629;&#20196;&#26377;&#26102;&#20505;&#20250;&#25253;&#21578;&#8220;<span class="quote">failed hunks</span>&#8221;&#38169;&#35823;&#65292;<span class="command"><strong>svn merge</strong></span>&#20250;&#25253;&#21578;&#8220;<span class="quote">skipped targets</span>&#8221;&#65306;
               </p><pre class="screen">
$ svn merge -r 1288:1351 ^/branches/mybranch
U    foo.c
U    bar.c
Skipped missing target: 'baz.c'
U    glub.c
U    sputter.h

Conflict discovered in 'glorb.h'.
Select: (p) postpone, (df) diff-full, (e) edit,
        (h) help for more options:
</pre><p>In the previous example, it might be the case that
                          <code class="filename">baz.c</code> exists in both snapshots of the
                          branch being compared, and the resultant delta wants to
                          change the file's contents, but the file doesn't exist in
                          the working copy.  Whatever the case, the
                          &#8220;<span class="quote">skipped</span>&#8221; message means that the user is most
                          likely comparing the wrong two trees; it's the classic
                          sign of user error.  When this happens, it's easy to
                          recursively revert all the changes created by the merge
                          (<strong class="userinput"><code>svn revert . --recursive</code></strong>), delete any
                          unversioned files or directories left behind after the
                          revert, and rerun <span class="command"><strong>svn merge</strong></span> with
                          different arguments.
               </p>
               <p>Also notice that the preceding example shows a conflict
                          happening on <code class="filename">glorb.h</code>.  We already
                          stated that the working copy has no local edits: how can a
                          conflict possibly happen?  Again, because the user can use
                          <span class="command"><strong>svn merge</strong></span> to define and apply any old
                          delta to the working copy, that delta may contain textual
                          changes that don't cleanly apply to a working file, even if
                          the file has no local modifications.
               </p>
               <p>Another small difference between <span class="command"><strong>svn
                                  update</strong></span> and <span class="command"><strong>svn merge</strong></span> is the
                          names of the full-text files created when a conflict
                          happens.  In <a class="xref" href="svn.tour.html#svn.tour.cycle.resolve" title="2.4.5.&nbsp;&#35299;&#20915;&#20914;&#31361;(&#21512;&#24182;&#21035;&#20154;&#30340;&#20462;&#25913;)">&#31532;&nbsp;2.4.5&nbsp;&#33410; &#8220;&#35299;&#20915;&#20914;&#31361;(&#21512;&#24182;&#21035;&#20154;&#30340;&#20462;&#25913;)&#8221;</a>, we saw
                          that an update produces files named
                          <code class="filename">filename.mine</code>,
                          <code class="filename">filename.rOLDREV</code>, and
                          <code class="filename">filename.rNEWREV</code>.  When <span class="command"><strong>svn
                                  merge</strong></span> produces a conflict, though, it creates
                          three files named <code class="filename">filename.working</code>,
                          <code class="filename">filename.left</code>, and
                          <code class="filename">filename.right</code>.  In this case, the
                          terms &#8220;<span class="quote">left</span>&#8221; and &#8220;<span class="quote">right</span>&#8221; are
                          describing which side of the double-tree comparison the file
                          came from.  In any case, these differing names will help you
                          distinguish between conflicts that happened as a result of an
                          update and ones that happened as a result of a
                          merge.
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.advanced.blockchanges"></a>4.4.5.&nbsp;&#38459;&#22622;&#20462;&#25913;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Sometimes there's a particular changeset that you don't
                          want to be automatically merged.  For example, perhaps your
                          team's policy is to do new development work on
                          <code class="filename">/trunk</code>, but to be more conservative about
                          backporting changes to a stable branch you use for releasing
                          to the public.  On one extreme, you can manually cherrypick
                          single changesets from the trunk to the branch&#8212;just the
                          changes that are stable enough to pass muster.  Maybe things
                          aren't quite that strict, though; perhaps most of the time
                          you'd like to just let <span class="command"><strong>svn merge</strong></span>
                          automatically merge most changes from trunk to branch.  In
                          this case, you'd like a way to mask a few specific changes
                          out, that is, prevent them from ever being automatically
                          merged.
               </p>
               <p>In Subversion 1.5, the only way to block a changeset is to
                          make the system believe that the change has
                          <span class="emphasis"><em>already</em></span> been merged.  To do this, one can
                          invoke a merge command with the <code class="option">--record-only</code>
                          option:
               </p><pre class="screen">
$ cd my-calc-branch

$ svn propget svn:mergeinfo .
/trunk:1680-3305

# Let's make the metadata list r3328 as already merged.
$ svn merge -c 3328 --record-only ^/trunk

$ svn status
M     .

$ svn propget svn:mergeinfo .
/trunk:1680-3305,3328

$ svn commit -m "Block r3328 from being merged to the branch."
&#8230;
</pre><p>This technique works, but it's also a little bit
                          dangerous.  The main problem is that we're not clearly
                          differentiating between the ideas of &#8220;<span class="quote">I already have this
                             change</span>&#8221; and &#8220;<span class="quote">I don't have this change.</span>&#8221;
                          We're effectively lying to the system, making it think that
                          the change was previously merged.  This puts the
                          responsibility on you&#8212;the user&#8212;to remember that
                          the change wasn't actually merged, it just wasn't wanted.
                          There's no way to ask Subversion for a list of &#8220;<span class="quote">blocked
                             changelists.</span>&#8221; If you want to track them (so that you
                          can unblock them someday). you'll need to record them in a
                          text file somewhere, or perhaps in an invented property.  In
                          Subversion 1.5, unfortunately, this is the only way to manage
                          blocked revisions; the plans are to make a better interface
                          for this in future versions.
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.advanced.logblame"></a>4.4.6.&nbsp;&#24863;&#30693;&#21512;&#24182;&#30340;&#26085;&#24535;&#21644;&#27880;&#35299;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>One of the main features of any version control system is
                          to keep track of who changed what, and when they did it.
                          The <span class="command"><strong>svn log</strong></span> and <span class="command"><strong>svn
                                blame</strong></span> commands are just the tools for this: when
                          invoked on individual files, they show not only the history of
                          changesets that affected the file, but also exactly which user
                          wrote which line of code, and when she did it.
               </p>
               <p>When changes start getting replicated between branches,
                          however, things start to get complicated.  For example, if you
                          were to ask <span class="command"><strong>svn log</strong></span> about the history of
                          your feature branch, it would show exactly every revision that ever
                          affected the branch:
               </p><pre class="screen">
$ cd my-calc-branch
$ svn log -q
------------------------------------------------------------------------
r390 | user | 2002-11-22 11:01:57 -0600 (Fri, 22 Nov 2002) | 1 line
------------------------------------------------------------------------
r388 | user | 2002-11-21 05:20:00 -0600 (Thu, 21 Nov 2002) | 2 lines
------------------------------------------------------------------------
r381 | user | 2002-11-20 15:07:06 -0600 (Wed, 20 Nov 2002) | 2 lines
------------------------------------------------------------------------
r359 | user | 2002-11-19 19:19:20 -0600 (Tue, 19 Nov 2002) | 2 lines
------------------------------------------------------------------------
r357 | user | 2002-11-15 14:29:52 -0600 (Fri, 15 Nov 2002) | 2 lines
------------------------------------------------------------------------
r343 | user | 2002-11-07 13:50:10 -0600 (Thu, 07 Nov 2002) | 2 lines
------------------------------------------------------------------------
r341 | user | 2002-11-03 07:17:16 -0600 (Sun, 03 Nov 2002) | 2 lines
------------------------------------------------------------------------
r303 | sally | 2002-10-29 21:14:35 -0600 (Tue, 29 Oct 2002) | 2 lines
------------------------------------------------------------------------
r98 | sally | 2002-02-22 15:35:29 -0600 (Fri, 22 Feb 2002) | 2 lines
------------------------------------------------------------------------
</pre><p>But is this really an accurate picture of all the changes
                          that happened on the branch?  What's being left out here is
                          the fact that revisions 390, 381, and 357 were actually the
                          results of merging changes from the trunk.  If you look at one
                          of these logs in detail, the multiple trunk changesets that
                          comprised the branch change are nowhere to be seen:
               </p><pre class="screen">
$ svn log -v -r 390
------------------------------------------------------------------------
r390 | user | 2002-11-22 11:01:57 -0600 (Fri, 22 Nov 2002) | 1 line
Changed paths:
   M /branches/my-calc-branch/button.c
   M /branches/my-calc-branch/README

Final merge of trunk changes to my-calc-branch.
</pre><p>We happen to know that this merge to the branch was
                          nothing but a merge of trunk changes.  How can we see those
                          trunk changes as well?  The answer is to use the
                          <code class="option">--use-merge-history</code> (<code class="option">-g</code>)
                          option.  This option expands those &#8220;<span class="quote">child</span>&#8221;
                          changes that were part of the merge.
               </p><pre class="screen">
$ svn log -v -r 390 -g
------------------------------------------------------------------------
r390 | user | 2002-11-22 11:01:57 -0600 (Fri, 22 Nov 2002) | 1 line
Changed paths:
   M /branches/my-calc-branch/button.c
   M /branches/my-calc-branch/README

Final merge of trunk changes to my-calc-branch.
------------------------------------------------------------------------
r383 | sally | 2002-11-21 03:19:00 -0600 (Thu, 21 Nov 2002) | 2 lines
Changed paths:
   M /branches/my-calc-branch/button.c
Merged via: r390

Fix inverse graphic error on button.
------------------------------------------------------------------------
r382 | sally | 2002-11-20 16:57:06 -0600 (Wed, 20 Nov 2002) | 2 lines
Changed paths:
   M /branches/my-calc-branch/README
Merged via: r390

Document my last fix in README.
</pre><p>By making the log operation use merge history, we see not
                          just the revision we queried (r390), but also the two revisions
                          that came along on the ride with it&#8212;a couple of changes
                          made by Sally to the trunk.  This is a much more complete
                          picture of history!
               </p>
               <p>The <span class="command"><strong>svn blame</strong></span> command also takes the
                          <code class="option">--use-merge-history</code> (<code class="option">-g</code>)
                          option.  If this option is neglected, somebody looking at
                          a line-by-line annotation of <code class="filename">button.c</code> may
                          get the mistaken impression that you were responsible for the
                          lines that fixed a certain error:
               </p><pre class="screen">
$ svn blame button.c
&#8230;
   390    user    retval = inverse_func(button, path);
   390    user    return retval;
   390    user    }
&#8230;
</pre><p>And while it's true that you did actually commit those
                          three lines in revision 390, two of them were actually written
                          by Sally back in revision 383:
               </p><pre class="screen">
$ svn blame button.c -g
&#8230;
G    383    sally   retval = inverse_func(button, path);
G    383    sally   return retval;
     390    user    }
&#8230;
</pre><p>Now we know who to <span class="emphasis"><em>really</em></span> blame for
                          those two lines of code!
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.advanced.ancestry"></a>4.4.7.&nbsp;&#20851;&#27880;&#36824;&#26159;&#24573;&#35270;&#31062;&#20808;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>When conversing with a Subversion developer, you might
                          very likely hear reference to the term
                          <em class="firstterm">ancestry</em>.  This word is used to
                          describe the relationship between two objects in a
                          repository: if they're related to each other, one
                          object is said to be an ancestor of the other.
               </p>
               <p>&#20030;&#20010;&#20363;&#23376;&#65292;&#20551;&#35774;&#20320;&#25552;&#20132;&#29256;&#26412;100&#65292;&#21253;&#25324;&#23545;<code class="filename">foo.c</code>&#30340;&#20462;&#25913;&#65292;&#21017;foo.c@99&#26159;foo.c@100&#30340;&#19968;&#20010;&#8220;<span class="quote">&#31062;&#20808;</span>&#8221;&#65292;&#21478;&#19968;&#26041;&#38754;&#65292;&#20551;&#35774;&#20320;&#22312;&#29256;&#26412;101&#21024;&#38500;&#36825;&#20010;&#25991;&#20214;&#65292;&#32780;&#22312;102&#29256;&#26412;&#25552;&#20132;&#19968;&#20010;&#21516;&#21517;&#30340;&#25991;&#20214;&#65292;&#22312;&#36825;&#20010;&#24773;&#20917;&#19979;&#65292;<code class="filename">foo.c@99</code>&#19982;<code class="filename">foo.c@102</code>&#30475;&#36215;&#26469;&#26159;&#20851;&#32852;&#30340;(&#26377;&#21516;&#26679;&#30340;&#36335;&#24452;)&#65292;&#20294;&#26159;&#20107;&#23454;&#19978;&#20182;&#20204;&#26159;&#23436;&#20840;&#19981;&#21516;&#30340;&#23545;&#35937;&#65292;&#23427;&#20204;&#24182;&#19981;&#20849;&#20139;&#21516;&#19968;&#20010;&#21382;&#21490;&#25110;&#32773;&#35828;&#8220;<span class="quote">&#31062;&#20808;</span>&#8221;&#12290;
               </p>
               <p>&#25351;&#20986;<span class="command"><strong>svn diff</strong></span>&#21644;<span class="command"><strong>svn merge</strong></span>&#21306;&#21035;&#30340;&#37325;&#35201;&#24615;&#22312;&#20110;&#65292;&#21069;&#19968;&#20010;&#21629;&#20196;&#24573;&#30053;&#31062;&#20808;&#65292;&#22914;&#26524;&#20320;&#35810;&#38382;<span class="command"><strong>svn diff</strong></span>&#26469;&#27604;&#36739;&#25991;&#20214;<code class="filename">foo.c</code>&#30340;&#29256;&#26412;99&#21644;102&#65292;&#20320;&#20250;&#30475;&#21040;&#34892;&#20026;&#22522;&#30784;&#30340;&#21306;&#21035;&#65292;<code class="literal">diff</code>&#21629;&#20196;&#21482;&#26159;&#30450;&#30446;&#30340;&#27604;&#36739;&#20004;&#26465;&#36335;&#24452;&#65292;&#20294;&#26159;&#22914;&#26524;&#20320;&#20351;&#29992;<span class="command"><strong>svn merge</strong></span>&#26159;&#27604;&#36739;&#21516;&#26679;&#30340;&#20004;&#20010;&#23545;&#35937;&#65292;&#23427;&#20250;&#27880;&#24847;&#21040;&#20182;&#20204;&#26159;&#19981;&#20851;&#32852;&#30340;&#65292;&#32780;&#19988;&#39318;&#20808;&#23581;&#35797;&#21024;&#38500;&#26087;&#25991;&#20214;&#65292;&#28982;&#21518;&#28155;&#21152;&#26032;&#25991;&#20214;&#65292;&#36755;&#20986;&#20250;&#26159;&#19968;&#20010;&#21024;&#38500;&#32039;&#25509;&#30528;&#19968;&#20010;&#22686;&#21152;&#65306;
               </p><pre class="screen">
D    foo.c
A    foo.c
      </pre><p>&#22823;&#22810;&#25968;&#21512;&#24182;&#21253;&#25324;&#27604;&#36739;&#21253;&#25324;&#31062;&#20808;&#20851;&#32852;&#30340;&#20004;&#26465;&#26641;&#65292;&#22240;&#27492;<span class="command"><strong>svn merge</strong></span>&#36825;&#26679;&#36816;&#20316;&#65292;&#28982;&#32780;&#65292;&#20320;&#20063;&#35768;&#20250;&#24076;&#26395;<code class="literal">merge</code>&#21629;&#20196;&#33021;&#22815;&#27604;&#36739;&#20004;&#20010;&#19981;&#30456;&#20851;&#30340;&#30446;&#24405;&#26641;&#65292;&#20030;&#20010;&#20363;&#23376;&#65292;&#20320;&#26377;&#20004;&#20010;&#30446;&#24405;&#26641;&#20998;&#21035;&#20195;&#34920;&#20102;&#20379;&#24212;&#26041;&#36719;&#20214;&#39033;&#30446;&#30340;&#19981;&#21516;&#29256;&#26412;(&#35265;<a class="xref" href="svn.branchmerge.html#svn.advanced.vendorbr" title="4.9.&nbsp;&#20379;&#26041;&#20998;&#25903;">&#31532;&nbsp;4.9&nbsp;&#33410; &#8220;&#20379;&#26041;&#20998;&#25903;&#8221;</a>)&#65292;&#22914;&#26524;&#20320;&#20351;&#29992;<span class="command"><strong>svn merge</strong></span>&#36827;&#34892;&#27604;&#36739;&#65292;&#20320;&#20250;&#30475;&#21040;&#31532;&#19968;&#20010;&#30446;&#24405;&#26641;&#34987;&#21024;&#38500;&#65292;&#32780;&#31532;&#20108;&#20010;&#26641;&#28155;&#21152;&#19978;&#65281;&#22312;&#36825;&#20010;&#24773;&#20917;&#19979;&#65292;&#20320;&#20165;&#20165;&#26159;&#24076;&#26395;<span class="command"><strong>svn merge</strong></span>&#20197;&#36335;&#24452;&#20026;&#22522;&#30784;&#27604;&#36739;&#20004;&#26869;&#26641;&#65292;&#32780;&#24573;&#30053;&#25991;&#20214;&#21644;&#30446;&#24405;&#30340;&#19981;&#30456;&#20851;&#24615;&#65292;&#24403;&#20026;&#21512;&#24182;&#21629;&#20196;&#28155;&#21152;<code class="option">--ignore-ancestry</code>&#36873;&#39033;&#26102;&#65292;&#23601;&#20250;&#20687;<span class="command"><strong>svn diff</strong></span>&#19968;&#26679;&#24037;&#20316;&#12290;(&#30456;&#21453;&#65292;<code class="option">--notice-ancestry</code>&#20250;&#23548;&#33268;<span class="command"><strong>svn diff</strong></span>&#20687;<code class="literal">merge</code>&#21629;&#20196;&#19968;&#26679;&#24037;&#20316;&#12290;)
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.advanced.moves"></a>4.4.8.&nbsp;&#21512;&#24182;&#21644;&#31227;&#21160;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>A common desire is to refactor source code, especially
                          in Java-based software projects.  Files and directories are
                          shuffled around and renamed, often causing great disruption
                          to everyone working on the project.  Sounds like a perfect
                          case to use a branch, doesn't it?  Just create a branch,
                          shuffle things around, and then merge the branch back to the
                          trunk, right?
               </p>
               <p>Alas, this scenario doesn't work so well right now and
                          is considered one of Subversion's current weak spots.  The
                          problem is that Subversion's <span class="command"><strong>svn update</strong></span>
                          command isn't as robust as it should be, particularly when
                          dealing with copy and move operations.
               </p>
               <p>When you use <span class="command"><strong>svn copy</strong></span> to duplicate a
                          file, the repository remembers where the new file came from,
                          but it fails to transmit that information to the client which
                          is running <span class="command"><strong>svn update</strong></span> or <span class="command"><strong>svn
                                merge</strong></span>.  Instead of telling the client, &#8220;<span class="quote">Copy
                             that file you already have to this new location,</span>&#8221; it
                          sends down an entirely new file.  This can lead to
                          problems, especially because the same thing happens with
                          renamed files.  A lesser-known fact about Subversion is that
                          it lacks &#8220;<span class="quote">true renames</span>&#8221;&#8212;the <span class="command"><strong>svn
                                move</strong></span> command is nothing more than an aggregation
                          of <span class="command"><strong>svn copy</strong></span> and <span class="command"><strong>svn
                                delete</strong></span>.
               </p>
               <p>&#20363;&#22914;&#65292;&#20551;&#23450;&#25105;&#20204;&#22312;&#19968;&#20010;&#31169;&#26377;&#20998;&#25903;&#24037;&#20316;&#65292;&#20320;&#23558;<code class="filename">integer.c</code>&#25913;&#21517;&#20026;<code class="filename">whole.c</code>&#65292;&#20320;&#36825;&#26159;&#22312;&#20998;&#25903;&#19978;&#21019;&#24314;&#20102;&#21407;&#26469;&#25991;&#20214;&#30340;&#19968;&#20010;&#25335;&#36125;&#65292;&#24182;&#19988;&#21024;&#38500;&#20102;&#21407;&#26469;&#30340;&#25991;&#20214;&#12290;&#21516;&#26102;&#65292;&#22238;&#21040;<code class="filename">trunk</code>&#65292;Sally&#25552;&#20132;&#20102;&#19968;&#20123;<code class="filename">integer.c</code>&#30340;&#20462;&#25913;&#65292;&#25152;&#20197;&#20320;&#38656;&#35201;&#23558;&#20998;&#25903;&#21512;&#24182;&#21040;&#20027;&#24178;&#65306;
               </p><pre class="screen">
$ cd calc/trunk

$ svn merge --reintegrate ^/branches/my-calc-branch
--- Merging differences between repository URLs into '.':
D   integer.c
A   whole.c
U   .
      </pre><p>&#31532;&#19968;&#30524;&#30475;&#36215;&#26469;&#19981;&#26159;&#24456;&#24046;&#65292;&#20294;&#26159;&#24456;&#21487;&#33021;&#36825;&#19981;&#26159;&#20320;&#21644;Sally&#24076;&#26395;&#30340;&#65292;&#21512;&#24182;&#25805;&#20316;&#24050;&#32463;&#21024;&#38500;&#20102;&#26368;&#26032;&#29256;&#26412;&#30340;<code class="filename">integer.c</code>(&#21253;&#21547;&#20102;Sally&#26368;&#26032;&#30340;&#20462;&#25913;)&#65292;&#32780;&#19988;&#30450;&#30446;&#30340;&#28155;&#21152;&#20102;&#20320;&#30340;<code class="filename">whole.c</code>&#25991;&#20214;&#8212;&#26159;&#26087;&#29256;&#26412;&#30340;<code class="filename">integer.c</code>&#22797;&#21046;&#21697;&#12290;&#26368;&#32456;&#30340;&#32467;&#26524;&#26159;&#23558;&#20320;&#30340;&#8220;<span class="quote">rename</span>&#8221;&#21512;&#24182;&#21040;&#20998;&#25903;&#65292;&#24182;&#19988;&#20174;&#26368;&#26032;&#20462;&#35746;&#29256;&#26412;&#21024;&#38500;&#20102;Sally&#26368;&#36817;&#30340;&#20462;&#25913;&#12290;
               </p>
               <p>This isn't true data loss.  Sally's changes are still in
                          the repository's history, but it may not be immediately
                          obvious that this has happened.  The moral of this story is
                          that until Subversion improves, be very careful about
                          merging copies and renames from one branch to
                          another.
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.advanced.pre1.5clients"></a>4.4.9.&nbsp;&#38459;&#22622;&#19981;&#30693;&#36947;&#21512;&#24182;&#30340;&#23458;&#25143;&#31471;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>If you've just upgraded your server to Subversion 1.5 or
                          later, there's a significant risk that pre-1.5 Subversion
                          clients can mess up your automated merge tracking.  Why is
                          this?  When a pre-1.5 Subversion client performs <span class="command"><strong>svn
                                merge</strong></span>, it doesn't modify the value of
                          the <code class="literal">svn:mergeinfo</code> property at all.  So the
                          subsequent commit, despite being the result of a merge,
                          doesn't tell the repository about the duplicated
                          changes&#8212;that information is lost.  Later on,
                          when &#8220;<span class="quote">merge-aware</span>&#8221; clients attempt automatic
                          merging, they're likely to run into all sorts of conflicts
                          resulting from repeated merges.
               </p>
               <p>If you and your team are relying on the merge-tracking
                          features of Subversion, you may want to configure your
                          repository to prevent older clients from committing changes.
                          The easy way to do this is by inspecting
                          the &#8220;<span class="quote">capabilities</span>&#8221; parameter in
                          the <code class="literal">start-commit</code> hook script.  If the
                          client reports itself as having <code class="literal">mergeinfo</code>
                          capabilities, the hook script can allow the commit to start.
                          If the client doesn't report that capability, have the hook
                          deny the commit.  We'll learn more about hook scripts in the
                          next chapter; see
                          <a class="xref" href="svn.reposadmin.html#svn.reposadmin.create.hooks" title="5.3.2.&nbsp;&#23454;&#29616;&#29256;&#26412;&#24211;&#38057;&#23376;">&#31532;&nbsp;5.3.2&nbsp;&#33410; &#8220;&#23454;&#29616;&#29256;&#26412;&#24211;&#38057;&#23376;&#8221;</a> and
                          <a class="xref" href="svn.ref.reposhooks.start-commit.html" title="start-commit">start-commit</a> for
                          details.
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.advanced.finalword"></a>4.4.10.&nbsp;&#21512;&#24182;&#36319;&#36394;&#30340;&#26368;&#32456;&#20449;&#24687;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>The bottom line is that Subversion's merge-tracking
                          feature has an extremely complex internal implementation, and
                          the <code class="literal">svn:mergeinfo</code> property is the only
                          window the user has into the machinery.  Because the feature
                          is relatively new, a numbers of edge cases and
                          possible unexpected behaviors may pop up.
               </p>
               <p>For example, sometimes mergeinfo will be generated when
                          running a simple <span class="command"><strong>svn copy</strong></span> or <span class="command"><strong>svn
                                move</strong></span> command.  Sometimes mergeinfo will appear on
                          files that you didn't expect to be touched by an operation.
                          Sometimes mergeinfo won't be generated at all, when you expect
                          it to.  Furthermore, the management of mergeinfo metadata has
                          a whole set of taxonomies and behaviors around it, such
                          as &#8220;<span class="quote">explicit</span>&#8221; versus &#8220;<span class="quote">implicit</span>&#8221;
                          mergeinfo, &#8220;<span class="quote">operative</span>&#8221;
                          versus &#8220;<span class="quote">inoperative</span>&#8221; revisions, specific
                          mechanisms of mergeinfo &#8220;<span class="quote">elision,</span>&#8221; and
                          even &#8220;<span class="quote">inheritance</span>&#8221; from parent to child
                          directories.
               </p>
               <p>We've chosen not to cover these detailed topics in this
                          book for a couple of reasons.  First, the level of detail is
                          absolutely overwhelming for a typical user.  Second, as
                          Subversion continues to improve, we feel that a typical user
                          <span class="emphasis"><em>shouldn't</em></span> have to understand these
                          concepts; they'll eventually fade into the background as pesky
                          implementation details.  All that said, if you enjoy this sort
                          of thing, you can get a fantastic overview in a paper posted
                          at CollabNet's website: <a class="ulink" href="http://www.collab.net/community/subversion/articles/merge-info.html" target="_top">http://www.collab.net/community/subversion/articles/merge-info.html</a>.
               </p>
               <p>For now, if you want to steer clear of bugs and odd
                          behaviors in automatic merging, the CollabNet article
                          recommends that you stick to these simple best practices:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>For short-term feature branches, follow the simple
                                       procedure described throughout
                                       <a class="xref" href="svn.branchmerge.html#svn.branchmerge.basicmerging" title="4.3.&nbsp;&#22522;&#26412;&#21512;&#24182;">&#31532;&nbsp;4.3&nbsp;&#33410; &#8220;&#22522;&#26412;&#21512;&#24182;&#8221;</a>.
                        </p>
                     </li>
                     <li>
                        <p>For long-lived release branches (as described in
                                       <a class="xref" href="svn.branchmerge.html#svn.branchmerge.commonpatterns" title="4.8.&nbsp;&#24120;&#29992;&#20998;&#25903;&#27169;&#24335;">&#31532;&nbsp;4.8&nbsp;&#33410; &#8220;&#24120;&#29992;&#20998;&#25903;&#27169;&#24335;&#8221;</a>),
                                       perform merges only on the root of the branch, not on
                                       subdirectories.
                        </p>
                     </li>
                     <li>
                        <p>Never merge into working copies with a mixture of
                                       working revision numbers, or with
                                       &#8220;<span class="quote">switched</span>&#8221; subdirectories (as described next
                                       in <a class="xref" href="svn.branchmerge.html#svn.branchmerge.switchwc" title="4.5.&nbsp;&#20351;&#29992;&#20998;&#25903;">&#31532;&nbsp;4.5&nbsp;&#33410; &#8220;&#20351;&#29992;&#20998;&#25903;&#8221;</a>).  A merge
                                       target should be a working copy which represents
                                       a <span class="emphasis"><em>single</em></span> location in the repository
                                       at a single point in time.
                        </p>
                     </li>
                     <li>
                        <p>Don't ever edit the <code class="literal">svn:mergeinfo</code>
                                       property directly; use <span class="command"><strong>svn
                                             merge</strong></span> with the <code class="option">--record-only</code> option to effect a desired change
                                       to the metadata (as demonstrated in
                                       <a class="xref" href="svn.branchmerge.html#svn.branchmerge.advanced.blockchanges" title="4.4.5.&nbsp;&#38459;&#22622;&#20462;&#25913;">&#31532;&nbsp;4.4.5&nbsp;&#33410; &#8220;&#38459;&#22622;&#20462;&#25913;&#8221;</a>).
                        </p>
                     </li>
                     <li>
                        <p>Always make sure you have complete read access to
                                       all of your merge sources, and that your target working
                                       copy has no sparse directories.
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.branchmerge.switchwc"></a>4.5.&nbsp;&#20351;&#29992;&#20998;&#25903;
                     </h2>
                  </div>
               </div>
            </div>
            <p><span class="command"><strong>svn switch</strong></span>&#21629;&#20196;&#25913;&#21464;&#23384;&#22312;&#30340;&#24037;&#20316;&#21103;&#26412;&#21040;&#21478;&#19968;&#20010;&#20998;&#25903;&#65292;&#28982;&#32780;&#36825;&#20010;&#21629;&#20196;&#22312;&#20998;&#25903;&#19978;&#24037;&#20316;&#26102;&#19981;&#26159;&#20005;&#26684;&#24517;&#35201;&#30340;&#65292;&#23427;&#21482;&#26159;&#25552;&#20379;&#20102;&#19968;&#20010;&#24555;&#25463;&#26041;&#24335;&#12290;&#22312;&#21069;&#38754;&#30340;&#20363;&#23376;&#37324;&#65292;&#23436;&#25104;&#20102;&#31169;&#26377;&#20998;&#25903;&#30340;&#24314;&#31435;&#65292;&#20320;&#21462;&#20986;&#20102;&#26032;&#30446;&#24405;&#30340;&#24037;&#20316;&#21103;&#26412;&#65292;&#30456;&#21453;&#65292;&#20320;&#21487;&#20197;&#31616;&#21333;&#30340;&#21578;&#35785;Subversion&#25913;&#21464;&#20320;&#30340;<code class="filename">/calc/trunk</code>&#30340;&#24037;&#20316;&#21103;&#26412;&#21040;&#20998;&#25903;&#30340;&#36335;&#24452;&#65306;
            </p><pre class="screen">
$ cd calc

$ svn info | grep URL
URL: http://svn.example.com/repos/calc/trunk

$ svn switch ^/branches/my-calc-branch
U   integer.c
U   button.c
U   Makefile
Updated to revision 341.

$ svn info | grep URL
URL: http://svn.example.com/repos/calc/branches/my-calc-branch
</pre><p>&#8220;<span class="quote">Switching</span>&#8221; a working copy that has no local
                     modifications to a different branch results in the working copy
                     looking just as it would if you'd done a fresh checkout of the
                     directory.  It's usually more efficient to
                     use this command, because often branches differ by only a small
                     degree.  The server sends only the minimal set of changes
                     necessary to make your working copy reflect the branch
                     directory.
            </p>
            <p><span class="command"><strong>svn switch</strong></span>&#21629;&#20196;&#20063;&#21487;&#20197;&#24102;<code class="option">--revision</code>(<code class="option">-r</code>)&#21442;&#25968;&#65292;&#25152;&#20197;&#20320;&#19981;&#38656;&#35201;&#19968;&#30452;&#31227;&#21160;&#20320;&#30340;&#24037;&#20316;&#21103;&#26412;&#21040;&#20998;&#25903;&#30340;<code class="literal">HEAD</code>&#12290;
            </p>
            <p>&#24403;&#28982;&#65292;&#35768;&#22810;&#39033;&#30446;&#27604;&#25105;&#20204;&#30340;<code class="filename">calc</code>&#35201;&#22797;&#26434;&#30340;&#22810;&#65292;&#26377;&#26356;&#22810;&#30340;&#23376;&#30446;&#24405;&#65292;Subversion&#29992;&#25143;&#36890;&#24120;&#29992;&#22914;&#19979;&#30340;&#27861;&#21017;&#20351;&#29992;&#20998;&#25903;&#65306;
            </p>
            <div class="orderedlist">
               <ol type="1">
                  <li>
                     <p>&#25335;&#36125;&#25972;&#20010;&#39033;&#30446;&#30340;&#8220;<span class="quote">trunk</span>&#8221;&#30446;&#24405;&#21040;&#19968;&#20010;&#26032;&#30340;&#20998;&#25903;&#30446;&#24405;&#12290;
                     </p>
                  </li>
                  <li>
                     <p>&#21482;&#26159;&#36716;&#25442;&#24037;&#20316;&#21103;&#26412;&#30340;<span class="emphasis"><em>&#37096;&#20998;</em></span>&#30446;&#24405;&#21040;&#20998;&#25903;&#12290;
                     </p>
                  </li>
               </ol>
            </div>
            <p>In other words, if a user knows that the branch work needs
                     to happen on only a specific subdirectory, she uses
                     <span class="command"><strong>svn switch</strong></span> to move only that subdirectory to
                     the branch.  (Or sometimes users will switch just a single
                     working file to the branch!)  That way, the user can continue to
                     receive normal &#8220;<span class="quote">trunk</span>&#8221; updates to most of her
                     working copy, but the switched portions will remain immune
                     (unless someone commits a change to her branch).  This feature
                     adds a whole new dimension to the concept of a &#8220;<span class="quote">mixed
                        working copy</span>&#8221;&#8212;not only can working copies contain a
                     mixture of working revisions, but they can also contain a
                     mixture of repository locations as well.
            </p>
            <p>&#22914;&#26524;&#20320;&#30340;&#24037;&#20316;&#21103;&#26412;&#21253;&#21547;&#35768;&#22810;&#26469;&#33258;&#19981;&#21516;&#29256;&#26412;&#24211;&#30446;&#24405;&#36339;&#36716;&#30340;&#23376;&#26641;&#65292;&#23427;&#20250;&#24037;&#20316;&#22914;&#24120;&#12290;&#24403;&#20320;&#26356;&#26032;&#26102;&#65292;&#20320;&#20250;&#24471;&#21040;&#27599;&#19968;&#20010;&#30446;&#24405;&#36866;&#24403;&#30340;&#34917;&#19969;&#65292;&#24403;&#20320;&#25552;&#20132;&#26102;&#65292;&#20320;&#30340;&#26412;&#22320;&#20462;&#25913;&#20250;&#19968;&#30452;&#20316;&#20026;&#19968;&#20010;&#21333;&#29420;&#30340;&#21407;&#23376;&#20462;&#25913;&#25552;&#20132;&#21040;&#29256;&#26412;&#24211;&#12290;</p>
            <p>Note that while it's okay for your working copy to reflect a
                     mixture of repository locations, these locations must all be
                     within the <span class="emphasis"><em>same</em></span> repository.  Subversion
                     repositories aren't yet able to communicate with one another;
                     that feature is planned for the future.
                     <sup>[<a name="d0e8247" href="#ftn.d0e8247" class="footnote">25</a>]</sup>
                   
            </p>
            <div class="sidebar">
               <p class="title"><b>&#20999;&#25442;&#21644;&#26356;&#26032;</b></p>
               <p>Have you noticed that the output of <span class="command"><strong>svn
                                switch</strong></span> and <span class="command"><strong>svn update</strong></span> looks the
                          same?  The switch command is actually a superset of the update
                          command.
               </p>
               <p>&#24403;&#20320;&#36816;&#34892;<span class="command"><strong>svn update</strong></span>&#26102;&#65292;&#20320;&#20250;&#21578;&#35785;&#29256;&#26412;&#24211;&#27604;&#36739;&#20004;&#20010;&#30446;&#24405;&#26641;&#65292;&#29256;&#26412;&#24211;&#36825;&#26679;&#20570;&#65292;&#24182;&#19988;&#36820;&#22238;&#32473;&#23458;&#25143;&#21306;&#21035;&#30340;&#25551;&#36848;&#65292;<span class="command"><strong>svn switch</strong></span>&#21644;<span class="command"><strong>svn update</strong></span>&#20004;&#20010;&#21629;&#20196;&#21807;&#19968;&#21306;&#21035;&#23601;&#26159;<span class="command"><strong>update</strong></span>&#20250;&#19968;&#30452;&#27604;&#36739;&#21516;&#19968;&#36335;&#24452;&#12290;
               </p>
               <p>That is, if your working copy is a mirror of
                          <code class="filename">/calc/trunk</code>, <span class="command"><strong>svn
                                update</strong></span> will automatically compare your working copy
                          of <code class="filename">/calc/trunk</code> to
                          <code class="filename">/calc/trunk</code> in the
                          <code class="literal">HEAD</code> revision.  If you're switching your
                          working copy to a branch, <span class="command"><strong>svn switch</strong></span>
                          will compare your working copy of
                          <code class="filename">/calc/trunk</code> to some
                          <span class="emphasis"><em>other</em></span> branch directory in the
                          <code class="literal">HEAD</code> revision.
               </p>
               <p>&#25442;&#21477;&#35805;&#35828;&#65292;&#19968;&#20010;&#26356;&#26032;&#36890;&#36807;&#26102;&#38388;&#31227;&#21160;&#20320;&#30340;&#24037;&#20316;&#21103;&#26412;&#65292;&#19968;&#20010;&#36716;&#25442;&#36890;&#36807;&#26102;&#38388;&#21644;&#31354;&#38388;&#31227;&#21160;&#24037;&#20316;&#25335;&#36125;&#12290;</p>
            </div>
            <p>&#22240;&#20026;<span class="command"><strong>svn switch</strong></span>&#26159;<span class="command"><strong>svn update</strong></span>&#30340;&#19968;&#20010;&#21464;&#31181;&#65292;&#20855;&#26377;&#30456;&#21516;&#30340;&#34892;&#20026;&#65292;&#24403;&#26032;&#30340;&#25968;&#25454;&#21040;&#36798;&#26102;&#65292;&#20219;&#20309;&#24037;&#20316;&#21103;&#26412;&#30340;&#24050;&#32463;&#23436;&#25104;&#30340;&#26412;&#22320;&#20462;&#25913;&#20250;&#34987;&#20445;&#23384;&#12290;
            </p>
            <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
               <table border="0" summary="Tip">
                  <tr>
                     <td rowspan="2" align="center" valign="top" width="25"><img alt="[&#25552;&#31034;]" src="images/tip.png"></td>
                     <th align="left">&#25552;&#31034;</th>
                  </tr>
                  <tr>
                     <td align="left" valign="top">
                        <p>&#20320;&#26159;&#21542;&#21457;&#29616;&#20320;&#20570;&#20986;&#20102;&#22797;&#26434;&#30340;&#20462;&#25913;(&#22312;<code class="filename">/trunk</code>&#30340;&#24037;&#20316;&#21103;&#26412;)&#65292;&#24182;&#31361;&#28982;&#21457;&#29616;&#65292;&#8220;<span class="quote">&#36825;&#20123;&#20462;&#25913;&#24517;&#39035;&#22312;&#23427;&#20204;&#33258;&#24049;&#30340;&#20998;&#25903;&#65311;</span>&#8221;&#22788;&#29702;&#36825;&#20010;&#38382;&#39064;&#30340;&#25216;&#26415;&#21487;&#20197;&#24635;&#32467;&#20026;&#20004;&#27493;&#65306;
                        </p><pre class="screen">
$ svn copy http://svn.example.com/repos/calc/trunk \
           http://svn.example.com/repos/calc/branches/newbranch \
      -m "Create branch 'newbranch'."
Committed revision 353.
$ svn switch ^/branches/newbranch
At revision 353.
</pre><p>&#23601;&#20687;<span class="command"><strong>svn update</strong></span>&#21629;&#20196;&#65292;<span class="command"><strong>svn switch</strong></span>&#20250;&#20445;&#30041;&#24037;&#20316;&#25335;&#36125;&#30340;&#26412;&#22320;&#20462;&#25913;&#65292;&#27492;&#21051;&#65292;&#20320;&#30340;&#24037;&#20316;&#21103;&#26412;&#21453;&#26144;&#21040;&#26032;&#24314;&#30340;&#20998;&#25903;&#19978;&#65292;&#32780;&#20320;&#30340;&#19979;&#19968;&#27425;<span class="command"><strong>svn commit</strong></span>&#20250;&#21457;&#36865;&#20462;&#25913;&#21040;&#26381;&#21153;&#22120;&#12290;
                        </p>
                     </td>
                  </tr>
               </table>
            </div>
         </div>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.branchmerge.tags"></a>4.6.&nbsp;&#26631;&#31614;
                     </h2>
                  </div>
               </div>
            </div>
            <p>&#21478;&#19968;&#20010;&#24120;&#35265;&#30340;&#29256;&#26412;&#25511;&#21046;&#31995;&#32479;&#27010;&#24565;&#26159;&#26631;&shy;&frac34;(<em class="firstterm">tag</em>)&#65292;&#19968;&#20010;&#26631;&#31614;&#21482;&#26159;&#19968;&#20010;&#39033;&#30446;&#26576;&#19968;&#26102;&#38388;&#30340;&#8220;<span class="quote">&#24555;&#29031;</span>&#8221;&#65292;&#22312;Subversion&#37324;&#36825;&#20010;&#27010;&#24565;&#26080;&#22788;&#19981;&#22312;&#8212;&#27599;&#19968;&#27425;&#25552;&#20132;&#30340;&#20462;&#35746;&#29256;&#26412;&#37117;&#26159;&#19968;&#20010;&#31934;&#30830;&#30340;&#24555;&#29031;&#12290;
            </p>
            <p>&#28982;&#32780;&#20154;&#20204;&#24076;&#26395;&#26356;&#20154;&#24615;&#21270;&#30340;&#26631;&#31614;&#21517;&#31216;&#65292;&#20687;<code class="literal">release-1.0</code>&#12290;&#20182;&#20204;&#20063;&#24076;&#26395;&#21487;&#20197;&#23545;&#19968;&#20010;&#23376;&#30446;&#24405;&#24555;&#29031;&#65292;&#27605;&#31455;&#65292;&#35760;&#20303;release-1.0&#26159;&#20462;&#35746;&#29256;&#26412;4822&#30340;&#26576;&#19968;&#23567;&#37096;&#20998;&#19981;&#26159;&#20214;&#24456;&#23481;&#26131;&#30340;&#20107;&#12290;
            </p>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.tags.mksimple"></a>4.6.1.&nbsp;&#24314;&#31435;&#31616;&#21333;&#26631;&#31614;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Once again, <span class="command"><strong>svn copy</strong></span> comes to the
                          rescue.  If you want to create a snapshot of
                          <code class="filename">/calc/trunk</code> exactly as it looks in the
                          <code class="literal">HEAD</code> revision, make a copy of it:
               </p><pre class="screen">
$ svn copy http://svn.example.com/repos/calc/trunk \
           http://svn.example.com/repos/calc/tags/release-1.0 \
      -m "Tagging the 1.0 release of the 'calc' project."

Committed revision 902.
</pre><p>This example assumes that a
                          <code class="filename">/calc/tags</code> directory already exists.  (If
                          it doesn't, you can create it using <span class="command"><strong>svn
                                mkdir</strong></span>.)  After the copy completes, the new
                          <code class="filename">release-1.0</code> directory is forever a
                          snapshot of how the <code class="filename">/trunk</code> directory
                          looked in the <code class="literal">HEAD</code> revision at the time you
                          made the copy.  Of course, you might want to be more precise
                          about exactly which revision you copy, in case somebody else
                          may have committed changes to the project when you weren't
                          looking.  So if you know that revision 901 of
                          <code class="filename">/calc/trunk</code> is exactly the snapshot you
                          want, you can specify it by passing <code class="option">-r 901</code> to
                          the <span class="command"><strong>svn copy</strong></span> command.
               </p>
               <p>But wait a moment: isn't this tag creation procedure the
                          same procedure we used to create a branch?  Yes, in fact, it
                          is.  In Subversion, there's no difference between a tag and a
                          branch.  Both are just ordinary directories that are created
                          by copying.  Just as with branches, the only reason a copied
                          directory is a &#8220;<span class="quote">tag</span>&#8221; is because
                          <span class="emphasis"><em>humans</em></span> have decided to treat it that way:
                          as long as nobody ever commits to the directory, it forever
                          remains a snapshot.  If people start committing to it, it
                          becomes a branch.
               </p>
               <p>If you are administering a repository, there are two
                          approaches you can take to managing tags.  The first approach
                          is &#8220;<span class="quote">hands off</span>&#8221;: as a matter of project policy,
                          decide where your tags will live, and make sure all users know
                          how to treat the directories they copy.  (That is, make sure
                          they know not to commit to them.)  The second approach is more
                          paranoid: you can use one of the access control scripts
                          provided with Subversion to prevent anyone from doing anything
                          but creating new copies in the tags area (see
                          <a class="xref" href="svn.serverconfig.html" title="&#31532;&nbsp;6&nbsp;&#31456;&nbsp;&#26381;&#21153;&#37197;&#32622;">&#31532;&nbsp;6&nbsp;&#31456; <i>&#26381;&#21153;&#37197;&#32622;</i></a>).  The paranoid approach,
                          however, isn't usually necessary.  If a user accidentally
                          commits a change to a tag directory, you can simply undo the
                          change as discussed in the previous section.  This is version
                          control, after all!
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.tags.mkcomplex"></a>4.6.2.&nbsp;&#24314;&#31435;&#22797;&#26434;&#26631;&#31614;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#26377;&#26102;&#20505;&#20320;&#24076;&#26395;&#20320;&#30340;&#8220;<span class="quote">&#24555;&#29031;</span>&#8221;&#33021;&#22815;&#24456;&#22797;&#26434;&#65292;&#32780;&#19981;&#21482;&#26159;&#19968;&#20010;&#21333;&#29420;&#20462;&#35746;&#29256;&#26412;&#30340;&#19968;&#20010;&#21333;&#29420;&#30446;&#24405;&#12290;
               </p>
               <p>For example, pretend your project is much larger than our
                          <code class="filename">calc</code> example: suppose it contains a
                          number of subdirectories and many more files.  In the course
                          of your work, you may decide that you need to create a working
                          copy that is designed to have specific features and bug fixes.
                          You can accomplish this by selectively backdating files or
                          directories to particular revisions (using <span class="command"><strong>svn update</strong></span>
                          with the <code class="option">-r</code> option liberally), by switching files and directories to
                          particular branches (making use of <span class="command"><strong>svn
                                switch</strong></span>), or even just by making a bunch of local
                          changes.  When you're done, your working copy is a hodgepodge
                          of repository locations from different revisions.  But after
                          testing, you know it's the precise combination of data you
                          need to tag.
               </p>
               <p>Time to make a snapshot.  Copying one URL to another won't
                          work here.  In this case, you want to make a snapshot of your
                          exact working copy arrangement and store it in the repository.
                          Luckily, <span class="command"><strong>svn copy</strong></span> actually has four
                          different uses (which you can read about in <a class="xref" href="svn.ref.html" title="&#31532;&nbsp;9&nbsp;&#31456;&nbsp;Subversion &#23436;&#20840;&#21442;&#32771;">&#31532;&nbsp;9&nbsp;&#31456; <i>Subversion &#23436;&#20840;&#21442;&#32771;</i></a>), including the ability to copy a
                          working copy tree to the repository:
               </p><pre class="screen">
$ ls
my-working-copy/

$ svn copy my-working-copy \
           http://svn.example.com/repos/calc/tags/mytag \
           -m "Tag my existing working copy state."

Committed revision 940.
</pre><p>Now there is a new directory in the repository,
                          <code class="filename">/calc/tags/mytag</code>, which is an exact
                          snapshot of your working copy&#8212;mixed revisions, URLs,
                          local changes, and all.
               </p>
               <p>Other users have found interesting uses for this feature.
                          Sometimes there are situations where you have a bunch of local
                          changes made to your working copy, and you'd like a
                          collaborator to see them.  Instead of running <span class="command"><strong>svn
                                diff</strong></span> and sending a patch file (which won't capture
                          directory, symlink, or property changes), you can
                          use <span class="command"><strong>svn copy</strong></span> to &#8220;<span class="quote">upload</span>&#8221; your
                          working copy to a private area of the repository.  Your
                          collaborator can then either check out a verbatim copy of your
                          working copy or use <span class="command"><strong>svn merge</strong></span> to receive
                          your exact changes.
               </p>
               <p>While this is a nice method for uploading a quick snapshot
                          of your working copy, note that this is <span class="emphasis"><em>not</em></span>
                          a good way to initially create a branch.  Branch creation should
                          be an event unto itself, and this method conflates the creation
                          of a branch with extra changes to files, all within a single revision.
                          This makes it very difficult (later on) to identify a single
                          revision number as a branch point.
               </p>
            </div>
         </div>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.branchmerge.maint"></a>4.7.&nbsp;&#32500;&#25252;&#20998;&#25903;
                     </h2>
                  </div>
               </div>
            </div>
            <p>&#20320;&#19968;&#23450;&#27880;&#24847;&#21040;&#20102;Subversion&#26497;&#24230;&#30340;&#28789;&#27963;&#24615;&#65292;&#22240;&#20026;&#23427;&#29992;&#30456;&#21516;&#30340;&#24213;&#23618;&#26426;&#21046;(&#30446;&#24405;&#25335;&#36125;)&#23454;&#29616;&#20102;&#20998;&#25903;&#21644;&#26631;&#31614;&#65292;&#22240;&#20026;&#20998;&#25903;&#21644;&#26631;&#31614;&#26159;&#20316;&#20026;&#26222;&#36890;&#30340;&#25991;&#20214;&#31995;&#32479;&#20986;&#29616;&#65292;&#20250;&#35753;&#20154;&#20204;&#24863;&#21040;&#23475;&#24597;&#65292;&#22240;&#20026;&#23427;<span class="emphasis"><em>&#22826;</em></span>&#28789;&#27963;&#20102;&#65292;&#22312;&#36825;&#20010;&#23567;&#33410;&#37324;&#65292;&#25105;&#20204;&#20250;&#25552;&#20379;&#23433;&#25490;&#21644;&#31649;&#29702;&#25968;&#25454;&#30340;&#19968;&#20123;&#24314;&#35758;&#12290;
            </p>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.maint.layout"></a>4.7.1.&nbsp;&#29256;&#26412;&#24211;&#24067;&#23616;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>There are some standard, recommended ways to organize a
                          repository.  Most people create a <code class="filename">trunk</code>
                          directory to hold the &#8220;<span class="quote">main line</span>&#8221; of development,
                          a <code class="filename">branches</code> directory to contain branch
                          copies, and a <code class="filename">tags</code> directory to contain
                          tag copies.  If a repository holds only one project,
                          often people create these top-level directories:
               </p><pre class="screen">
/trunk
/branches
/tags
</pre><p>&#22914;&#26524;&#19968;&#20010;&#29256;&#26412;&#24211;&#20445;&#23384;&#20102;&#22810;&#20010;&#39033;&#30446;&#65292;&#31649;&#29702;&#21592;&#20250;&#36890;&#36807;&#39033;&#30446;&#26469;&#24067;&#23616;(&#35265;<a class="xref" href="svn.reposadmin.html#svn.reposadmin.projects.chooselayout" title="5.2.1.&nbsp;&#35268;&#21010;&#20320;&#30340;&#29256;&#26412;&#24211;&#32467;&#26500;">&#31532;&nbsp;5.2.1&nbsp;&#33410; &#8220;&#35268;&#21010;&#20320;&#30340;&#29256;&#26412;&#24211;&#32467;&#26500;&#8221;</a>&#20851;&#20110;&#8220;<span class="quote">&#39033;&#30446;&#26681;&#30446;&#24405;</span>&#8221;)&#65306;
               </p><pre class="screen">
/paint/trunk
/paint/branches
/paint/tags
/calc/trunk
/calc/branches
/calc/tags
</pre><p>&#24403;&#28982;&#65292;&#20320;&#21487;&#20197;&#33258;&#30001;&#30340;&#24573;&#30053;&#36825;&#20123;&#36890;&#24120;&#30340;&#24067;&#23616;&#26041;&#24335;&#65292;&#20320;&#21487;&#20197;&#21019;&#24314;&#20219;&#24847;&#30340;&#21464;&#21270;&#65292;&#21482;&#35201;&#26159;&#23545;&#20320;&#21644;&#20320;&#30340;&#39033;&#30446;&#26377;&#30410;&#65292;&#35760;&#20303;&#26080;&#35770;&#20320;&#36873;&#25321;&#20160;&#20040;&#65292;&#36825;&#19981;&#20250;&#26159;&#19968;&#31181;&#27704;&#20037;&#30340;&#25215;&#35834;&#65292;&#20320;&#21487;&#20197;&#38543;&#26102;&#37325;&#26032;&#32452;&#32455;&#20320;&#30340;&#29256;&#26412;&#24211;&#12290;&#22240;&#20026;&#20998;&#25903;&#21644;&#26631;&#31614;&#37117;&#26159;&#26222;&#36890;&#30340;&#30446;&#24405;&#65292;<span class="command"><strong>svn move</strong></span>&#21629;&#20196;&#21487;&#20197;&#20219;&#24847;&#30340;&#25913;&#21517;&#21644;&#31227;&#21160;&#23427;&#20204;&#65292;&#20174;&#19968;&#31181;&#24067;&#23616;&#21040;&#21478;&#19968;&#31181;&#22823;&#27010;&#21482;&#26159;&#19968;&#31995;&#21015;&#26381;&#21153;&#22120;&#31471;&#30340;&#31227;&#21160;&#65292;&#22914;&#26524;&#20320;&#19981;&#21916;&#27426;&#29256;&#26412;&#24211;&#30340;&#32452;&#32455;&#26041;&#24335;&#65292;&#20320;&#21487;&#20197;&#20219;&#24847;&#20462;&#25913;&#30446;&#24405;&#32467;&#26500;&#12290;
               </p>
               <p>&#35760;&#20303;&#65292;&#23613;&#31649;&#31227;&#21160;&#30446;&#24405;&#38750;&#24120;&#23481;&#26131;&#65292;&#20320;&#24517;&#39035;&#20307;&#35845;&#20320;&#30340;&#29992;&#25143;&#65292;&#20320;&#30340;&#20462;&#25913;&#20250;&#35753;&#20320;&#30340;&#29992;&#25143;&#24863;&#21040;&#36855;&#24785;&#65292;&#22914;&#26524;&#19968;&#20010;&#29992;&#25143;&#30340;&#25317;&#26377;&#19968;&#20010;&#29256;&#26412;&#24211;&#30446;&#24405;&#30340;&#24037;&#20316;&#21103;&#26412;&#65292;&#20320;&#30340;<span class="command"><strong>svn move</strong></span>&#21629;&#20196;&#20063;&#35768;&#20250;&#21024;&#38500;&#26368;&#26032;&#30340;&#29256;&#26412;&#30340;&#36825;&#20010;&#36335;&#24452;&#65292;&#24403;&#29992;&#25143;&#36816;&#34892;<span class="command"><strong>svn update</strong></span>&#65292;&#20250;&#34987;&#21578;&#30693;&#36825;&#20010;&#24037;&#20316;&#21103;&#26412;&#24341;&#29992;&#30340;&#36335;&#24452;&#24050;&#32463;&#19981;&#20877;&#23384;&#22312;&#65292;&#29992;&#25143;&#38656;&#35201;&#24378;&#21046;&#20351;&#29992;<span class="command"><strong>svn switch</strong></span>&#36716;&#21040;&#26032;&#30340;&#20301;&#32622;&#12290;
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.maint.lifetime"></a>4.7.2.&nbsp;&#25968;&#25454;&#30340;&#29983;&#21629;&#21608;&#26399;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>&#21478;&#19968;&#20010;Subversion&#27169;&#22411;&#30340;&#21487;&#29233;&#29305;&#24615;&#26159;&#20998;&#25903;&#21644;&#26631;&#31614;&#21487;&#20197;&#26377;&#26377;&#38480;&#30340;&#29983;&#21629;&#21608;&#26399;&#65292;&#23601;&#20687;&#20854;&#23427;&#30340;&#29256;&#26412;&#21270;&#30340;&#39033;&#30446;&#65292;&#20030;&#20010;&#20363;&#23376;&#65292;&#20551;&#23450;&#20320;&#26368;&#32456;&#23436;&#25104;&#20102;<code class="filename">calc</code>&#39033;&#30446;&#20320;&#30340;&#20010;&#20154;&#20998;&#25903;&#19978;&#30340;&#25152;&#26377;&#24037;&#20316;&#65292;&#22312;&#21512;&#24182;&#20102;&#20320;&#30340;&#25152;&#26377;&#20462;&#25913;&#21040;<code class="filename">/calc/trunk</code>&#21518;&#65292;&#27809;&#26377;&#24517;&#35201;&#32487;&#32493;&#20445;&#30041;&#20320;&#30340;&#31169;&#26377;&#20998;&#25903;&#30446;&#24405;&#65306;
               </p><pre class="screen">
$ svn delete http://svn.example.com/repos/calc/branches/my-calc-branch \
             -m "Removing obsolete branch of calc project."

Committed revision 375.
</pre><p>And now your branch is gone.  Of course, it's not really
                          gone: the directory is simply missing from the
                          <code class="literal">HEAD</code> revision, no longer distracting
                          anyone.  If you use <span class="command"><strong>svn checkout</strong></span>,
                          <span class="command"><strong>svn switch</strong></span>, or <span class="command"><strong>svn list</strong></span>
                          to examine an earlier revision, you'll still be able to see
                          your old branch.
               </p>
               <p>&#22914;&#26524;&#27983;&#35272;&#20320;&#21024;&#38500;&#30340;&#30446;&#24405;&#36824;&#19981;&#36275;&#22815;&#65292;&#20320;&#21487;&#20197;&#25226;&#23427;&#25214;&#22238;&#26469;&#65292;&#24674;&#22797;&#25968;&#25454;&#23545;Subversion&#26469;&#35828;&#24456;&#31616;&#21333;&#65292;&#22914;&#26524;&#20320;&#24076;&#26395;&#24674;&#22797;&#19968;&#20010;&#24050;&#32463;&#21024;&#38500;&#30340;&#30446;&#24405;(&#25110;&#25991;&#20214;)&#21040;<code class="literal">HEAD</code>&#65292;&#20165;&#38656;&#35201;&#20351;&#29992;<span class="command"><strong>svn copy</strong></span>&#26469;&#20174;&#26087;&#30340;&#29256;&#26412;&#25335;&#36125;&#20986;&#26469;&#65306;
               </p><pre class="screen">
$ svn copy http://svn.example.com/repos/calc/branches/my-calc-branch@374 \
           http://svn.example.com/repos/calc/branches/my-calc-branch \
           -m "Restore my-calc-branch."

Committed revision 376.
</pre><p>&#22312;&#25105;&#20204;&#30340;&#20363;&#23376;&#37324;&#65292;&#20320;&#30340;&#20010;&#20154;&#20998;&#25903;&#21482;&#26377;&#19968;&#20010;&#30456;&#23545;&#30701;&#30340;&#29983;&#21629;&#21608;&#26399;&#65306;&#20320;&#20250;&#20026;&#20462;&#22797;&#19968;&#20010;Bug&#25110;&#23454;&#29616;&#19968;&#20010;&#23567;&#30340;&#29305;&#24615;&#26469;&#21019;&#24314;&#23427;&#65292;&#24403;&#20219;&#21153;&#23436;&#25104;&#65292;&#20998;&#25903;&#20063;&#35813;&#32467;&#26463;&#20102;&#12290;&#22312;&#36719;&#20214;&#24320;&#21457;&#36807;&#31243;&#20013;&#65292;&#26377;&#20004;&#20010;&#8220;<span class="quote">&#20027;&#35201;&#30340;</span>&#8221;&#20998;&#25903;&#19968;&#30452;&#23384;&#22312;&#24456;&#38271;&#30340;&#26102;&#38388;&#20063;&#26159;&#24456;&#24120;&#35265;&#30340;&#24773;&#20917;&#65292;&#20030;&#20010;&#20363;&#23376;&#65292;&#20551;&#23450;&#25105;&#20204;&#26159;&#21457;&#24067;&#19968;&#20010;&#31283;&#23450;&#30340;<code class="filename">calc</code>&#39033;&#30446;&#30340;&#26102;&#20505;&#20102;&#65292;&#20294;&#25105;&#20204;&#20173;&#20250;&#38656;&#35201;&#20960;&#20010;&#26376;&#30340;&#26102;&#38388;&#26469;&#20462;&#22797;Bug&#65292;&#20320;&#19981;&#24076;&#26395;&#28155;&#21152;&#26032;&#30340;&#29305;&#24615;&#65292;&#20294;&#20320;&#19981;&#24076;&#26395;&#21578;&#35785;&#24320;&#21457;&#32773;&#20572;&#27490;&#24320;&#21457;&#65292;&#25152;&#20197;&#20316;&#20026;&#26367;&#20195;&#65292;&#20320;&#20026;&#36719;&#20214;&#21019;&#24314;&#20102;&#19968;&#20010;&#8220;<span class="quote">&#31283;&#23450;</span>&#8221;&#20998;&#25903;&#65292;&#36825;&#20010;&#20998;&#25903;&#26356;&#25913;&#19981;&#20250;&#24456;&#22810;&#65306;
               </p><pre class="screen">
$ svn copy http://svn.example.com/repos/calc/trunk \
           http://svn.example.com/repos/calc/branches/stable-1.0 \
           -m "Creating stable branch of calc project."

Committed revision 377.
</pre><p>&#32780;&#19988;&#24320;&#21457;&#32773;&#21487;&#20197;&#33258;&#30001;&#30340;&#32487;&#32493;&#28155;&#21152;&#26032;&#30340;(&#35797;&#39564;&#30340;)&#29305;&#24615;&#21040;<code class="filename">/calc/trunk</code>&#65292;&#20320;&#21487;&#20197;&#23459;&#24067;&#36825;&#26679;&#19968;&#31181;&#25919;&#31574;&#65292;&#21482;&#26377;bug&#20462;&#27491;&#25552;&#20132;&#21040;<code class="filename">/calc/branches/stable-1.0</code>&#65292;&#36825;&#26679;&#30340;&#35805;&#65292;&#20154;&#20204;&#32487;&#32493;&#22312;&#20027;&#24178;&#19978;&#24037;&#20316;&#65292;&#26576;&#20010;&#20154;&#20250;&#36873;&#25321;&#22312;&#31283;&#23450;&#20998;&#25903;&#19978;&#20570;&#20986;&#19968;&#20123;Bug&#20462;&#27491;&#65292;&#29978;&#33267;&#22312;&#31283;&#23450;&#29256;&#26412;&#21457;&#24067;&#20043;&#21518;&#12290;&#20320;&#25110;&#35768;&#20250;&#22312;&#36825;&#20010;&#32500;&#25252;&#20998;&#25903;&#19978;&#24037;&#20316;&#24456;&#38271;&#26102;&#38388;&#8212;&#20063;&#23601;&#26159;&#35828;&#65292;&#20320;&#20250;&#19968;&#30452;&#32487;&#32493;&#20026;&#23458;&#25143;&#25552;&#20379;&#36825;&#20010;&#29256;&#26412;&#30340;&#25903;&#25345;&#65292;&#25105;&#20204;&#20250;&#22312;&#21518;&#38754;&#30340;&#37096;&#20998;&#35752;&#35770;&#26356;&#22810;&#12290;
               </p>
            </div>
         </div>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.branchmerge.commonpatterns"></a>4.8.&nbsp;&#24120;&#29992;&#20998;&#25903;&#27169;&#24335;
                     </h2>
                  </div>
               </div>
            </div>
            <p>&#20998;&#25903;&#21644;<span class="command"><strong>svn merge</strong></span>&#26377;&#24456;&#22810;&#19981;&#21516;&#30340;&#29992;&#27861;&#65292;&#36825;&#20010;&#23567;&#33410;&#25551;&#36848;&#20102;&#26368;&#24120;&#35265;&#30340;&#29992;&#27861;&#12290;
            </p>
            <p>&#29256;&#26412;&#25511;&#21046;&#22312;&#36719;&#20214;&#24320;&#21457;&#20013;&#24191;&#27867;&#20351;&#29992;&#65292;&#36825;&#37324;&#26159;&#22242;&#38431;&#37324;&#31243;&#24207;&#21592;&#26368;&#24120;&#29992;&#30340;&#20004;&#31181;&#20998;&#25903;/&#21512;&#24182;&#27169;&#24335;&#30340;&#20171;&#32461;&#65292;&#22914;&#26524;&#20320;&#19981;&#26159;&#20351;&#29992;Subversion&#36719;&#20214;&#24320;&#21457;&#65292;&#21487;&#38543;&#24847;&#36339;&#36807;&#26412;&#23567;&#33410;&#65292;&#22914;&#26524;&#20320;&#26159;&#31532;&#19968;&#27425;&#20351;&#29992;&#29256;&#26412;&#25511;&#21046;&#30340;&#36719;&#20214;&#24320;&#21457;&#32773;&#65292;&#35831;&#26356;&#21152;&#27880;&#24847;&#65292;&#20197;&#19979;&#27169;&#24335;&#34987;&#35768;&#22810;&#32769;&#20853;&#24403;&#20316;&#26368;&#20339;&#23454;&#36341;&#65292;&#36825;&#20010;&#36807;&#31243;&#24182;&#19981;&#21482;&#26159;&#38024;&#23545;Subversion&#65292;&#22312;&#20219;&#20309;&#29256;&#26412;&#25511;&#21046;&#31995;&#32479;&#20013;&#37117;&#19968;&#26679;&#65292;&#20294;&#26159;&#22312;&#36825;&#37324;&#20351;&#29992;Subversion&#26415;&#35821;&#20250;&#24863;&#35273;&#26356;&#26041;&#20415;&#19968;&#28857;&#12290;</p>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.commonpatterns.release"></a>4.8.1.&nbsp;&#21457;&#24067;&#20998;&#25903;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Most software has a typical life cycle: code, test,
                          release, repeat.  There are two problems with this process.
                          First, developers need to keep writing new features while
                          quality assurance teams take time to test supposedly stable
                          versions of the software.  New work cannot halt while the
                          software is tested.  Second, the team almost always needs to
                          support older, released versions of software; if a bug is
                          discovered in the latest code, it most likely exists in
                          released versions as well, and customers will want to get
                          that bug fix without having to wait for a major new
                          release.
               </p>
               <p>&#36825;&#26159;&#29256;&#26412;&#25511;&#21046;&#21487;&#20197;&#20570;&#30340;&#24110;&#21161;&#65292;&#20856;&#22411;&#30340;&#36807;&#31243;&#22914;&#19979;&#65306;</p>
               <div class="orderedlist">
                  <ol type="1">
                     <li>
                        <p><span class="emphasis"><em>Developers commit all new work to the
                                               trunk.</em></span>
                           
                                       Day-to-day changes are committed to
                                       <code class="filename">/trunk</code>: new features, bug fixes, and
                                       so on.
                        </p>
                     </li>
                     <li>
                        <p><span class="emphasis"><em>The trunk is copied to a
                                               &#8220;<span class="quote">release</span>&#8221; branch.</em></span>
                           
                                       When the team thinks the software is ready for release
                                       (say, a 1.0 release), <code class="filename">/trunk</code>
                                       might be copied to
                                       <code class="filename">/branches/1.0</code>.
                        </p>
                     </li>
                     <li>
                        <p><span class="emphasis"><em>&#39033;&#30446;&#32452;&#32487;&#32493;&#24182;&#34892;&#24037;&#20316;&#65292;</em></span>&#19968;&#20010;&#23567;&#32452;&#24320;&#22987;&#23545;&#20998;&#25903;&#36827;&#34892;&#20005;&#37239;&#30340;&#27979;&#35797;&#65292;&#21516;&#26102;&#21478;&#19968;&#20010;&#23567;&#32452;&#22312;<code class="filename">/trunk</code>&#32487;&#32493;&#26032;&#30340;&#24037;&#20316;(&#22914;&#65292;&#20934;&#22791;2.0)&#65292;&#22914;&#26524;&#19968;&#20010;bug&#22312;&#20219;&#20309;&#19968;&#20010;&#20301;&#32622;&#34987;&#21457;&#29616;&#65292;&#38169;&#35823;&#20462;&#27491;&#38656;&#35201;&#26469;&#22238;&#36816;&#36865;&#12290;&#28982;&#32780;&#36825;&#20010;&#36807;&#31243;&#26377;&#26102;&#20505;&#20063;&#20250;&#32467;&#26463;&#65292;&#20363;&#22914;&#20998;&#25903;&#24050;&#32463;&#20026;&#21457;&#24067;&#21069;&#30340;&#26368;&#32456;&#27979;&#35797;&#8220;<span class="quote">&#20572;&#28382;</span>&#8221;&#20102;&#12290;
                        </p>
                     </li>
                     <li>
                        <p><span class="emphasis"><em>&#20998;&#25903;&#24050;&#32463;&#20316;&#20102;&#26631;&#31614;&#24182;&#19988;&#21457;&#24067;&#65292;</em></span>&#24403;&#27979;&#35797;&#32467;&#26463;&#65292;<code class="filename">/branches/1.0</code>&#20316;&#20026;&#24341;&#29992;&#24555;&#29031;&#24050;&#32463;&#25335;&#36125;&#21040;<code class="filename">/tags/1.0.0</code>&#65292;&#36825;&#20010;&#26631;&#31614;&#34987;&#25171;&#21253;&#21457;&#24067;&#32473;&#23458;&#25143;&#12290;
                        </p>
                     </li>
                     <li>
                        <p><span class="emphasis"><em>The branch is maintained over time.</em></span>
                           
                                       While work continues on <code class="filename">/trunk</code> for
                                       version 2.0, bug fixes continue to be ported from
                                       <code class="filename">/trunk</code> to
                                       <code class="filename">/branches/1.0</code>.  When enough
                                       bug fixes have accumulated, management may decide to do a
                                       1.0.1 release: <code class="filename">/branches/1.0</code> is
                                       copied to <code class="filename">/tags/1.0.1</code>, and the tag
                                       is packaged and released.
                        </p>
                     </li>
                  </ol>
               </div>
               <p>&#25972;&#20010;&#36807;&#31243;&#38543;&#30528;&#36719;&#20214;&#30340;&#25104;&#29087;&#19981;&#26029;&#37325;&#22797;&#65306;&#24403;2.0&#23436;&#25104;&#65292;&#19968;&#20010;&#26032;&#30340;2.0&#20998;&#25903;&#34987;&#21019;&#24314;&#65292;&#27979;&#35797;&#12289;&#25171;&#26631;&#31614;&#21644;&#26368;&#32456;&#21457;&#24067;&#65292;&#32463;&#36807;&#35768;&#22810;&#24180;&#65292;&#29256;&#26412;&#24211;&#32467;&#26463;&#20102;&#35768;&#22810;&#29256;&#26412;&#21457;&#24067;&#65292;&#36827;&#20837;&#20102;&#8220;<span class="quote">&#32500;&#25252;</span>&#8221;&#27169;&#24335;&#65292;&#35768;&#22810;&#26631;&#31614;&#20195;&#34920;&#20102;&#26368;&#32456;&#30340;&#21457;&#24067;&#29256;&#26412;&#12290;
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.branchmerge.commonpatterns.feature"></a>4.8.2.&nbsp;&#29305;&#24615;&#20998;&#25903;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>A <em class="firstterm">feature branch</em> is the sort of
                          branch that's been the dominant example in this chapter (the
                          one you've been working on while Sally continues to work on
                          <code class="filename">/trunk</code>).  It's a temporary branch created
                          to work on a complex change without interfering with the
                          stability of <code class="filename">/trunk</code>.  Unlike release
                          branches (which may need to be supported forever), feature
                          branches are born, used for a while, merged back to the trunk,
                          and then ultimately deleted.  They have a finite span of
                          usefulness.
               </p>
               <p>&#36824;&#26377;&#65292;&#20851;&#20110;&#26159;&#21542;&#21019;&#24314;&#29305;&#24615;&#20998;&#25903;&#30340;&#39033;&#30446;&#25919;&#31574;&#20063;&#21464;&#21270;&#24191;&#27867;&#65292;&#19968;&#20123;&#39033;&#30446;&#27704;&#36828;&#19981;&#20351;&#29992;&#29305;&#24615;&#20998;&#25903;&#65306;&#22823;&#23478;&#37117;&#21487;&#20197;&#25552;&#20132;&#21040;<code class="filename">/trunk</code>&#65292;&#22909;&#22788;&#26159;&#31995;&#32479;&#30340;&#31616;&#21333;&#8212;&#27809;&#26377;&#20154;&#38656;&#35201;&#30693;&#36947;&#20998;&#25903;&#21644;&#21512;&#24182;&#65292;&#22351;&#22788;&#26159;&#20027;&#24178;&#20250;&#32463;&#24120;&#19981;&#31283;&#23450;&#25110;&#32773;&#19981;&#21487;&#29992;&#65292;&#21478;&#22806;&#19968;&#20123;&#39033;&#30446;&#20351;&#29992;&#20998;&#25903;&#36798;&#21040;&#26497;&#38480;&#65306;&#27809;&#26377;&#20462;&#25913;<span class="emphasis"><em>&#26366;&#32463;</em></span>&#30452;&#25509;&#25552;&#20132;&#21040;&#20027;&#24178;&#65292;&#21363;&#20351;&#26368;&#32454;&#23567;&#30340;&#20462;&#25913;&#37117;&#35201;&#21019;&#24314;&#30701;&#26242;&#30340;&#20998;&#25903;&#65292;&#28982;&#21518;&#23567;&#24515;&#30340;&#23457;&#26680;&#21512;&#24182;&#21040;&#20027;&#24178;&#65292;&#28982;&#21518;&#21024;&#38500;&#20998;&#25903;&#65292;&#36825;&#26679;&#31995;&#32479;&#20445;&#25345;&#20027;&#24178;&#19968;&#30452;&#31283;&#23450;&#21644;&#21487;&#29992;&#65292;&#20294;&#26159;&#36896;&#25104;&#20102;&#24040;&#22823;&#30340;&#36127;&#25285;&#12290;
               </p>
               <p>Most projects take a middle-of-the-road approach.  They
                          commonly insist that <code class="filename">/trunk</code> compile and
                          pass regression tests at all times.  A feature branch is
                          required only when a change requires a large number of
                          destabilizing commits.  A good rule of thumb is to ask this
                          question: if the developer worked for days in isolation and
                          then committed the large change all at once (so that
                          <code class="filename">/trunk</code> were never destabilized), would it
                          be too large a change to review?  If the answer to that
                          question is &#8220;<span class="quote">yes,</span>&#8221; the change should be
                          developed on a feature branch.  As the developer commits
                          incremental changes to the branch, they can be easily reviewed
                          by peers.
               </p>
               <p>&#26368;&#32456;&#65292;&#26377;&#19968;&#20010;&#38382;&#39064;&#23601;&#26159;&#24590;&#26679;&#20445;&#25345;&#19968;&#20010;&#29305;&#24615;&#20998;&#25903;&#8220;<span class="quote">&#21516;&#27493;</span>&#8221;&#20110;&#24037;&#20316;&#20013;&#30340;&#20027;&#24178;&#65292;&#22312;&#21069;&#38754;&#25552;&#21040;&#36807;&#65292;&#22312;&#19968;&#20010;&#20998;&#25903;&#19978;&#24037;&#20316;&#25968;&#21608;&#25110;&#20960;&#20010;&#26376;&#26159;&#24456;&#26377;&#39118;&#38505;&#30340;&#65292;&#20027;&#24178;&#30340;&#20462;&#25913;&#20063;&#35768;&#20250;&#25345;&#32493;&#28044;&#20837;&#65292;&#22240;&#20026;&#36825;&#19968;&#28857;&#65292;&#20004;&#26465;&#32447;&#30340;&#24320;&#21457;&#20250;&#21306;&#21035;&#24040;&#22823;&#65292;&#21512;&#24182;&#20998;&#25903;&#22238;&#21040;&#20027;&#24178;&#20250;&#25104;&#20026;&#19968;&#20010;&#22121;&#26790;&#12290;
               </p>
               <p>This situation is best avoided by regularly merging trunk
                          changes to the branch.  Make up a policy: once a week, merge
                          the last week's worth of trunk changes to the branch.
               </p>
               <p>&#22312;&#19968;&#20123;&#26102;&#20505;&#65292;&#20320;&#24050;&#32463;&#20934;&#22791;&#22909;&#20102;&#23558;&#8220;<span class="quote">&#21516;&#27493;&#30340;</span>&#8221;&#29305;&#24615;&#20998;&#25903;&#21512;&#24182;&#22238;&#21040;&#20027;&#24178;&#65292;&#20026;&#27492;&#65292;&#24320;&#22987;&#20570;&#19968;&#27425;&#23558;&#20027;&#24178;&#26368;&#26032;&#20462;&#25913;&#21644;&#20998;&#25903;&#30340;&#26368;&#32456;&#21512;&#24182;&#65292;&#36825;&#26679;&#20197;&#21518;&#65292;&#38500;&#20102;&#20320;&#30340;&#20998;&#25903;&#20462;&#25913;&#30340;&#37096;&#20998;&#65292;&#26368;&#26032;&#30340;&#20998;&#25903;&#21644;&#20027;&#24178;&#23558;&#20250;&#32477;&#23545;&#19968;&#33268;&#65292;&#20320;&#25110;&#35768;&#38656;&#35201;&#20351;&#29992;<code class="option">--reintegrate</code>&#36873;&#39033;&#21512;&#24182;&#22238;&#21435;&#65306;
               </p><pre class="screen">
$ cd trunk-working-copy

$ svn update
At revision 1910.

$ svn merge --reintegrate ^/branches/mybranch
--- Merging differences between repository URLs into '.':
U    real.c
U    integer.c
A    newdirectory
A    newdirectory/newfile
 U   .
&#8230;
</pre><p>Another way of thinking about this pattern is that your
                          weekly sync of trunk to branch is analogous to running
                          <span class="command"><strong>svn update</strong></span> in a working copy, while the
                          final merge step is analogous to running <span class="command"><strong>svn
                                  commit</strong></span> from a working copy.  After all, what else
                          <span class="emphasis"><em>is</em></span> a working copy but a very shallow
                          private branch?  It's a branch that's capable of
                          storing only one change at a time.
               </p>
            </div>
         </div>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.advanced.vendorbr"></a>4.9.&nbsp;&#20379;&#26041;&#20998;&#25903;
                     </h2>
                  </div>
               </div>
            </div>
            <p>&#24403;&#24320;&#21457;&#36719;&#20214;&#26102;&#26377;&#36825;&#26679;&#19968;&#20010;&#24773;&#20917;&#65292;&#20320;&#29256;&#26412;&#25511;&#21046;&#30340;&#25968;&#25454;&#21487;&#33021;&#20851;&#32852;&#20110;&#25110;&#32773;&#26159;&#20381;&#36182;&#20110;&#20854;&#20182;&#20154;&#30340;&#25968;&#25454;&#65292;&#36890;&#24120;&#26469;&#35762;&#65292;&#20320;&#30340;&#39033;&#30446;&#30340;&#38656;&#35201;&#20250;&#35201;&#27714;&#20320;&#33258;&#24049;&#30340;&#39033;&#30446;&#23545;&#22806;&#37096;&#23454;&#20307;&#25552;&#20379;&#30340;&#25968;&#25454;&#20445;&#25345;&#23613;&#21487;&#33021;&#26368;&#26032;&#30340;&#29256;&#26412;&#65292;&#21516;&#26102;&#19981;&#20250;&#29306;&#29298;&#31283;&#23450;&#24615;&#65292;&#36825;&#31181;&#24773;&#20917;&#24635;&#26159;&#20250;&#20986;&#29616;&#8212;&#21482;&#35201;&#26576;&#20010;&#23567;&#32452;&#30340;&#20449;&#24687;&#23545;&#21478;&#19968;&#20010;&#23567;&#32452;&#30340;&#20449;&#24687;&#26377;&#30452;&#25509;&#30340;&#24433;&#21709;&#12290;</p>
            <p>For example, software developers might be working on an
                     application that makes use of a third-party library.  Subversion
                     has just such a relationship with the Apache Portable Runtime (APR)
                     library (see <a class="xref" href="svn.developer.html#svn.developer.usingapi.apr" title="8.3.1.&nbsp;Apache &#21487;&#31227;&#26893;&#36816;&#34892;&#24211;">&#31532;&nbsp;8.3.1&nbsp;&#33410; &#8220;Apache &#21487;&#31227;&#26893;&#36816;&#34892;&#24211;&#8221;</a>).
                     The Subversion source code depends on the APR library for all
                     its portability needs.  In earlier stages of Subversion's
                     development, the project closely tracked APR's changing API,
                     always sticking to the &#8220;<span class="quote">bleeding edge</span>&#8221; of the
                     library's code churn.  Now that both APR and Subversion have
                     matured, Subversion attempts to synchronize with APR's library
                     API only at well-tested, stable release points.
            </p>
            <p>Now, if your project depends on someone else's information,
                     you could attempt to synchronize that information with your own
                     in several ways.  Most painfully, you could issue oral or
                     written instructions to all the contributors of your project,
                     telling them to make sure they have the specific versions
                     of that third-party information that your project needs.  If the
                     third-party information is maintained in a Subversion
                     repository, you could also use Subversion's externals
                     definitions to effectively &#8220;<span class="quote">pin down</span>&#8221; specific
                     versions of that information to some location in your own
                     working copy directory (see
                     <a class="xref" href="svn.advanced.html#svn.advanced.externals" title="3.8.&nbsp;&#22806;&#37096;&#23450;&#20041;">&#31532;&nbsp;3.8&nbsp;&#33410; &#8220;&#22806;&#37096;&#23450;&#20041;&#8221;</a>).
            </p>
            <p>&#20294;&#26159;&#26377;&#26102;&#20505;&#65292;&#20320;&#24076;&#26395;&#22312;&#20320;&#33258;&#24049;&#30340;&#29256;&#26412;&#25511;&#21046;&#31995;&#32479;&#32500;&#25252;&#19968;&#20010;&#38024;&#23545;&#31532;&#19977;&#26041;&#25968;&#25454;&#30340;&#33258;&#23450;&#20041;&#20462;&#25913;&#65292;&#22238;&#21040;&#36719;&#20214;&#24320;&#21457;&#30340;&#20363;&#23376;&#65292;&#31243;&#24207;&#21592;&#20026;&#20102;&#20182;&#20204;&#33258;&#24049;&#30340;&#30446;&#30340;&#20250;&#38656;&#35201;&#20462;&#25913;&#31532;&#19977;&#26041;&#24211;&#65292;&#36825;&#20123;&#20462;&#25913;&#20250;&#21253;&#25324;&#26032;&#30340;&#21151;&#33021;&#21644;bug&#20462;&#27491;&#65292;&#22312;&#25104;&#20026;&#31532;&#19977;&#26041;&#24037;&#20855;&#23448;&#26041;&#21457;&#24067;&#20043;&#21069;&#65292;&#21482;&#26159;&#20869;&#37096;&#32500;&#25252;&#12290;&#25110;&#32773;&#36825;&#20123;&#20462;&#25913;&#27704;&#36828;&#19981;&#20250;&#20256;&#32473;&#24211;&#30340;&#32500;&#25252;&#32773;&#65292;&#21482;&#26159;&#20316;&#20026;&#28385;&#36275;&#36719;&#20214;&#24320;&#21457;&#38656;&#35201;&#30340;&#21333;&#29420;&#30340;&#33258;&#23450;&#20041;&#20462;&#25913;&#23384;&#22312;&#12290;</p>
            <p>Now you face an interesting situation.  Your project could
                     house its custom modifications to the third-party data in some
                     disjointed fashion, such as using patch files or full-fledged
                     alternative versions of files and directories.  But these quickly
                     become maintenance headaches, requiring some mechanism by which
                     to apply your custom changes to the third-party code and
                     necessitating regeneration of those changes with each successive
                     version of the third-party code that you track.
            </p>
            <p>&#36825;&#20010;&#38382;&#39064;&#30340;&#35299;&#20915;&#26041;&#26696;&#26159;&#20351;&#29992;<em class="firstterm">&#20379;&#26041;&#20998;&#25903;</em>&#65292;&#19968;&#20010;&#20379;&#26041;&#20998;&#25903;&#26159;&#19968;&#20010;&#30446;&#24405;&#26641;&#20445;&#23384;&#20102;&#31532;&#19977;&#26041;&#23454;&#20307;&#25110;&#20379;&#24212;&#26041;&#30340;&#20449;&#24687;&#65292;&#27599;&#19968;&#20010;&#20379;&#24212;&#26041;&#25968;&#25454;&#30340;&#29256;&#26412;&#21560;&#25910;&#21040;&#20320;&#30340;&#39033;&#30446;&#21483;&#20570;<em class="firstterm">&#20379;&#26041;drop</em>&#12290;
            </p>
            <p>Vendor branches provide two benefits.  First, by storing
                     the currently supported vendor drop in your own version control
                     system, you ensure that the members of your project never need to question
                     whether they have the right version of the vendor's data.  They
                     simply receive that correct version as part of their regular
                     working copy updates.  Second, because the data lives in your
                     own Subversion repository, you can store your custom changes to
                     it in-place&#8212;you have no more need of an automated (or
                     worse, manual) method for swapping in your customizations.
            </p>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.advanced.vendorbr.general"></a>4.9.1.&nbsp;&#24120;&#35268;&#30340;&#20379;&#26041;&#20998;&#25903;&#31649;&#29702;&#36807;&#31243;
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Managing vendor branches generally works like this: first,
                          you create a top-level directory (such as
                          <code class="filename">/vendor</code>) to hold the vendor branches.
                          Then you import the third-party code into a subdirectory of
                          that top-level directory.  You then copy that subdirectory
                          into your main development branch (e.g.,
                          <code class="filename">/trunk</code>) at the appropriate location.  You
                          always make your local changes in the main development branch.
                          With each new release of the code you are tracking, you bring
                          it into the vendor branch and merge the changes into
                          <code class="filename">/trunk</code>, resolving whatever conflicts
                          occur between your local changes and the upstream
                          changes.
               </p>
               <p>&#20063;&#35768;&#19968;&#20010;&#20363;&#23376;&#26377;&#21161;&#20110;&#25105;&#20204;&#38416;&#36848;&#36825;&#20010;&#31639;&#27861;&#65292;&#25105;&#20204;&#20250;&#20351;&#29992;&#36825;&#26679;&#19968;&#20010;&#22330;&#26223;&#65292;&#25105;&#20204;&#30340;&#24320;&#21457;&#22242;&#38431;&#27491;&#22312;&#24320;&#21457;&#19968;&#20010;&#35745;&#31639;&#22120;&#31243;&#24207;&#65292;&#19982;&#19968;&#20010;&#31532;&#19977;&#26041;&#30340;&#22797;&#26434;&#25968;&#23383;&#36816;&#31639;&#24211;libcomplex&#20851;&#32852;&#12290;&#25105;&#20204;&#20174;&#20379;&#26041;&#20998;&#25903;&#30340;&#21021;&#22987;&#21019;&#24314;&#24320;&#22987;&#65292;&#24182;&#19988;&#23548;&#20837;&#20379;&#26041;drop&#65292;&#25105;&#20204;&#20250;&#25226;&#27599;&#26666;&#20998;&#25903;&#30446;&#24405;&#21483;&#20570;<code class="filename">libcomplex</code>&#65292;&#25105;&#20204;&#30340;&#20195;&#30721;drop&#20250;&#36827;&#20837;&#21040;&#20379;&#26041;&#20998;&#25903;&#30340;&#23376;&#30446;&#24405;<code class="filename">current</code>&#65292;&#24182;&#19988;&#22240;&#20026;<span class="command"><strong>svn import</strong></span>&#21019;&#24314;&#25152;&#26377;&#30340;&#38656;&#35201;&#30340;&#20013;&#38388;&#29238;&#30446;&#24405;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#21629;&#20196;&#23436;&#25104;&#36825;&#19968;&#27493;&#65306;
               </p><pre class="screen">
$ svn import /path/to/libcomplex-1.0 \
             http://svn.example.com/repos/vendor/libcomplex/current \
             -m 'importing initial 1.0 vendor drop'
&#8230;
</pre><p>&#25105;&#20204;&#29616;&#22312;&#22312;<code class="filename">/vendor/libcomplex/current</code>&#26377;&#20102;libcomplex&#24403;&#21069;&#29256;&#26412;&#30340;&#20195;&#30721;&#65292;&#29616;&#22312;&#25105;&#20204;&#20026;&#37027;&#20010;&#29256;&#26412;&#20316;&#26631;&#31614;(&#35265;<a class="xref" href="svn.branchmerge.html#svn.branchmerge.tags" title="4.6.&nbsp;&#26631;&#31614;">&#31532;&nbsp;4.6&nbsp;&#33410; &#8220;&#26631;&#31614;&#8221;</a>)&#65292;&#28982;&#21518;&#25335;&#36125;&#23427;&#21040;&#20027;&#35201;&#24320;&#21457;&#20998;&#25903;&#65292;&#25105;&#20204;&#30340;&#25335;&#36125;&#20250;&#22312;<code class="filename">calc</code>&#39033;&#30446;&#30446;&#24405;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;&#30446;&#24405;<code class="filename">libcomplex</code>&#65292;&#23427;&#26159;&#36825;&#20010;&#25105;&#20204;&#23558;&#35201;&#36827;&#34892;&#33258;&#23450;&#20041;&#30340;&#20379;&#26041;&#25968;&#25454;&#30340;&#25335;&#36125;&#29256;&#26412;&#12290;
               </p><pre class="screen">
$ svn copy http://svn.example.com/repos/vendor/libcomplex/current  \
           http://svn.example.com/repos/vendor/libcomplex/1.0      \
           -m 'tagging libcomplex-1.0'
&#8230;
$ svn copy http://svn.example.com/repos/vendor/libcomplex/1.0  \
           http://svn.example.com/repos/calc/libcomplex        \
           -m 'bringing libcomplex-1.0 into the main branch'
&#8230;
</pre><p>&#25105;&#20204;&#21462;&#20986;&#25105;&#20204;&#39033;&#30446;&#30340;&#20027;&#20998;&#25903;&#8212;&#29616;&#22312;&#21253;&#25324;&#20102;&#31532;&#19968;&#20010;&#20379;&#26041;&#37322;&#25918;&#30340;&#25335;&#36125;&#8212;&#25105;&#20204;&#24320;&#22987;&#33258;&#23450;&#20041;libcomplex&#30340;&#20195;&#30721;&#65292;&#22312;&#25105;&#20204;&#30693;&#36947;&#20043;&#21069;&#65292;&#25105;&#20204;&#30340;libcomplex&#20462;&#25913;&#29256;&#26412;&#26159;&#24050;&#32463;&#19982;&#25105;&#20204;&#30340;&#35745;&#31639;&#22120;&#31243;&#24207;&#23436;&#20840;&#38598;&#25104;&#20102;&#12290; <sup>[<a name="d0e8830" href="#ftn.d0e8830" class="footnote">26</a>]</sup></p>
               <p>&#20960;&#21608;&#20043;&#21518;&#65292;libcomplex&#24471;&#24320;&#21457;&#32773;&#21457;&#24067;&#20102;&#19968;&#20010;&#26032;&#30340;&#29256;&#26412;&#8212;&#29256;&#26412;1.1&#8212;&#21253;&#25324;&#20102;&#25105;&#20204;&#24456;&#38656;&#35201;&#30340;&#19968;&#20123;&#29305;&#24615;&#21644;&#21151;&#33021;&#12290;&#25105;&#20204;&#24456;&#24076;&#26395;&#21319;&#32423;&#21040;&#36825;&#20010;&#29256;&#26412;&#65292;&#20294;&#19981;&#24076;&#26395;&#22833;&#21435;&#22312;&#24403;&#21069;&#29256;&#26412;&#25152;&#20316;&#30340;&#20462;&#25913;&#12290;&#25105;&#20204;&#26412;&#36136;&#19978;&#20250;&#24076;&#26395;&#25226;&#25105;&#20204;&#24403;&#21069;&#22522;&#32447;&#29256;&#26412;&#26159;&#30340;libcomplex1.0&#30340;&#25335;&#36125;&#26367;&#25442;&#20026;libcomplex
                  1.1&#65292;&#28982;&#21518;&#25226;&#21069;&#38754;&#33258;&#23450;&#20041;&#30340;&#20462;&#25913;&#24212;&#29992;&#21040;&#26032;&#30340;&#29256;&#26412;&#12290;&#20294;&#26159;&#23454;&#38469;&#19978;&#25105;&#20204;&#36890;&#36807;&#19968;&#20010;&#30456;&#21453;&#30340;&#26041;&#21521;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65292;&#24212;&#29992;libcomplex&#20174;&#29256;&#26412;1.0&#21040;1.1&#30340;&#20462;&#25913;&#21040;&#25105;&#20204;&#20462;&#25913;&#30340;&#25335;&#36125;&#12290;
               </p>
               <p>&#20026;&#20102;&#25191;&#34892;&#36825;&#20010;&#21319;&#32423;&#65292;&#25105;&#20204;&#21462;&#20986;&#19968;&#20010;&#25105;&#20204;&#20379;&#26041;&#20998;&#25903;&#30340;&#25335;&#36125;&#65292;&#26367;&#25442;<code class="filename">current</code>&#30446;&#24405;&#20026;&#26032;&#30340;libcomplex 1.1&#30340;&#20195;&#30721;&#65292;&#25105;&#20204;&#21482;&#26159;&#25335;&#36125;&#26032;&#25991;&#20214;&#21040;&#23384;&#22312;&#30340;&#25991;&#20214;&#19978;&#65292;&#25110;&#32773;&#26159;&#35299;&#21387;&#32553;libcomplex 1.1&#30340;&#25171;&#21253;&#25991;&#20214;&#21040;&#25105;&#20204;&#23384;&#22312;&#30340;&#25991;&#20214;&#21644;&#30446;&#24405;&#12290;&#27492;&#26102;&#30340;&#30446;&#26631;&#26159;&#35753;&#25105;&#20204;&#30340;<code class="filename">current</code>&#30446;&#24405;&#21482;&#20445;&#30041;libcomplex 1.1&#30340;&#20195;&#30721;&#65292;&#24182;&#19988;&#20445;&#35777;&#25152;&#26377;&#30340;&#20195;&#30721;&#22312;&#29256;&#26412;&#25511;&#21046;&#20043;&#19979;&#65292;&#21734;&#65292;&#25105;&#20204;&#24076;&#26395;&#22312;&#26368;&#23567;&#30340;&#29256;&#26412;&#25511;&#21046;&#21382;&#21490;&#25200;&#21160;&#19979;&#23436;&#25104;&#36825;&#20214;&#20107;&#12290;
               </p>
               <p>&#23436;&#25104;&#20102;&#36825;&#20010;&#20174;1.0&#21040;1.1&#30340;&#20195;&#30721;&#26367;&#25442;&#65292;<span class="command"><strong>svn status</strong></span>&#20250;&#26174;&#31034;&#25991;&#20214;&#30340;&#26412;&#22320;&#20462;&#25913;&#65292;&#25110;&#35768;&#20063;&#21253;&#25324;&#20102;&#19968;&#20123;&#26410;&#29256;&#26412;&#21270;&#25110;&#32773;&#20002;&#22833;&#30340;&#25991;&#20214;&#65292;&#22914;&#26524;&#25105;&#20204;&#20570;&#20102;&#25105;&#20204;&#24212;&#35813;&#20570;&#30340;&#20107;&#24773;&#65292;&#26410;&#29256;&#26412;&#21270;&#30340;&#25991;&#20214;&#24212;&#35813;&#37117;&#26159;libcomplex&#22312;1.1&#26032;&#24341;&#20837;&#30340;&#25991;&#20214;&#8212;&#25105;&#20204;&#36816;&#34892;<span class="command"><strong>svn add</strong></span>&#26469;&#23558;&#23427;&#20204;&#21152;&#20837;&#21040;&#29256;&#26412;&#25511;&#21046;&#12290;&#20002;&#22833;&#30340;&#25991;&#20214;&#26159;&#23384;&#22312;&#20110;1.1&#20294;&#26159;&#19981;&#26159;&#22312;1.1&#65292;&#22312;&#36825;&#20123;&#36335;&#24452;&#25105;&#20204;&#36816;&#34892;<span class="command"><strong>svn delete</strong></span>&#12290;&#26368;&#32456;&#19968;&#26086;&#25105;&#20204;&#30340;<code class="filename">&#24403;&#21069;&#30340;</code>&#24037;&#20316;&#21103;&#26412;&#21482;&#26159;&#21253;&#25324;&#20102;libcomplex1.1&#30340;&#20195;&#30721;&#65292;&#25105;&#20204;&#21487;&#20197;&#25552;&#20132;&#36825;&#20123;&#25913;&#21464;&#30446;&#24405;&#21644;&#25991;&#20214;&#30340;&#20462;&#25913;&#12290;
               </p>
               <p>&#25105;&#20204;&#30340;<code class="filename">&#24403;&#21069;</code>&#20998;&#25903;&#29616;&#22312;&#20445;&#23384;&#20102;&#26032;&#30340;&#20379;&#26041;drop&#65292;&#25105;&#20204;&#20026;&#36825;&#20010;&#26032;&#30340;&#29256;&#26412;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;&#26631;&#31614;1.1(&#23601;&#20687;&#25105;&#20204;&#20026;1.0&#29256;&#26412;drop&#25152;&#20316;&#30340;)&#65292;&#28982;&#21518;&#21512;&#24182;&#36825;&#20174;&#20010;&#26631;&#31614;&#21069;&#19968;&#20010;&#29256;&#26412;&#30340;&#21306;&#21035;&#21040;&#20027;&#35201;&#24320;&#21457;&#20998;&#25903;&#12290;
               </p><pre class="screen">
$ cd working-copies/calc
$ svn merge ^/vendor/libcomplex/1.0      \
            ^/vendor/libcomplex/current  \
            libcomplex
&#8230; # resolve all the conflicts between their changes and our changes
$ svn commit -m 'merging libcomplex-1.1 into the main branch'
&#8230;
</pre><p>&#22312;&#36825;&#20010;&#29712;&#30862;&#30340;&#29992;&#20363;&#37324;&#65292;&#31532;&#19977;&#26041;&#24037;&#20855;&#30340;&#26032;&#29256;&#26412;&#20250;&#20174;&#19968;&#20010;&#25991;&#20214;&#21644;&#30446;&#24405;&#30340;&#35282;&#24230;&#26469;&#30475;&#65292;&#23601;&#20687;&#21069;&#19968;&#20010;&#29256;&#26412;&#12290;&#27809;&#26377;&#20219;&#20309;libcomplex&#28304;&#25991;&#20214;&#20250;&#34987;&#21024;&#38500;&#12289;&#34987;&#25913;&#21517;&#25110;&#26159;&#31227;&#21160;&#21040;&#21035;&#30340;&#20301;&#32622;&#8212;&#26032;&#30340;&#29256;&#26412;&#21482;&#20250;&#20445;&#23384;&#38024;&#23545;&#19978;&#19968;&#20010;&#29256;&#26412;&#30340;&#25991;&#26412;&#20462;&#25913;&#12290;&#22312;&#23436;&#32654;&#19990;&#30028;&#65292;&#25105;&#20204;&#23545;&#21602;&#20462;&#25913;&#20250;&#24178;&#20928;&#24471;&#24212;&#29992;&#21040;&#24211;&#30340;&#26032;&#29256;&#26412;&#65292;&#19981;&#20250;&#20135;&#29983;&#20219;&#20309;&#24182;&#21457;&#21644;&#20914;&#31361;&#12290;</p>
               <p>But things aren't always that simple, and in fact it is
                          quite common for source files to get moved around between
                          releases of software.  This complicates the process of
                          ensuring that our modifications are still valid for the new
                          version of code, and things can quickly degrade into a
                          situation where we have to manually re-create our
                          customizations in the new version.  Once Subversion knows
                          about the history of a given source file&#8212;including all
                          its previous locations&#8212;the process of merging in the new
                          version of the library is pretty simple.  But we are
                          responsible for telling Subversion how the source file layout
                          changed from vendor drop to vendor drop.
               </p>
            </div>
            <div class="sect2" lang="zh-cn">
               <div class="titlepage">
                  <div>
                     <div>
                        <h3 class="title"><a name="svn.advanced.vendorbr.svn_load_dirs"></a>4.9.2.&nbsp;svn_load_dirs.pl
                        </h3>
                     </div>
                  </div>
               </div>
               <p>Vendor drops that contain more than a few deletes,
                          additions, and moves complicate the process of upgrading to
                          each successive version of the third-party data.  So
                          Subversion supplies the <span class="command"><strong>svn_load_dirs.pl</strong></span>
                          script to assist with this process.  This script automates the
                          importing steps we mentioned in the general vendor branch
                          management procedure to make sure mistakes are minimized.
                          You will still be responsible for using the merge commands to
                          merge the new versions of the third-party data into your main
                          development branch, but <span class="command"><strong>svn_load_dirs.pl</strong></span>
                          can help you more quickly and easily arrive at that
                          stage.
               </p>
               <p>&#19968;&#21477;&#35805;&#65292;<span class="command"><strong>svn_load_dirs.pl</strong></span>&#26159;&#19968;&#20010;&#22686;&#24378;&#30340;<span class="command"><strong>svn import</strong></span>&#65292;&#20855;&#22791;&#20102;&#35768;&#22810;&#37325;&#35201;&#30340;&#29305;&#24615;&#65306;
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>&#23427;&#21487;&#20197;&#22312;&#20219;&#20309;&#26377;&#19968;&#20010;&#23384;&#22312;&#30340;&#29256;&#26412;&#24211;&#30446;&#24405;&#19982;&#19968;&#20010;&#22806;&#37096;&#30340;&#30446;&#24405;&#21305;&#37197;&#26102;&#25191;&#34892;&#65292;&#20250;&#25191;&#34892;&#25152;&#26377;&#24517;&#35201;&#30340;&#28155;&#21152;&#21644;&#21024;&#38500;&#24182;&#19988;&#21487;&#20197;&#36873;&#21017;&#25191;&#34892;&#31227;&#21160;&#12290;</p>
                     </li>
                     <li>
                        <p>&#23427;&#21487;&#20197;&#29992;&#26469;&#25805;&#20316;&#19968;&#31995;&#21015;&#22797;&#26434;&#30340;&#25805;&#20316;&#65292;&#22914;&#37027;&#20123;&#38656;&#35201;&#19968;&#20010;&#20013;&#38388;&#23186;&#20171;&#30340;&#25552;&#20132;&#8212;&#22914;&#22312;&#25805;&#20316;&#20043;&#21069;&#37325;&#21629;&#21517;&#19968;&#20010;&#25991;&#20214;&#25110;&#32773;&#30446;&#24405;&#20004;&#27425;&#12290;</p>
                     </li>
                     <li>
                        <p>&#23427;&#21487;&#20197;&#38543;&#24847;&#30340;&#20026;&#26032;&#23548;&#20837;&#30446;&#24405;&#25171;&#19978;&#26631;&#31614;&#12290;</p>
                     </li>
                     <li>
                        <p>&#23427;&#21487;&#20197;&#38543;&#24847;&#20026;&#31526;&#21512;&#27491;&#21017;&#34920;&#36798;&#24335;&#30340;&#25991;&#20214;&#21644;&#30446;&#24405;&#28155;&#21152;&#20219;&#24847;&#30340;&#23646;&#24615;&#12290;</p>
                     </li>
                  </ul>
               </div>
               <p><span class="command"><strong>svn_load_dirs.pl</strong></span> takes three mandatory
                          arguments.  The first argument is the URL to the base
                          Subversion directory to work in.  This argument is followed by
                          the URL&#8212;relative to the first argument&#8212;into which the
                          current vendor drop will be imported.  Finally, the third
                          argument is the local directory to import.  Using our previous
                          example, a typical run of <span class="command"><strong>svn_load_dirs.pl</strong></span>
                          might look like this:
               </p><pre class="screen">
$ svn_load_dirs.pl http://svn.example.com/repos/vendor/libcomplex \
                   current                                        \
                   /path/to/libcomplex-1.1
&#8230;
</pre><p>&#20320;&#21487;&#20197;&#35828;&#26126;&#20320;&#20250;&#24076;&#26395;<span class="command"><strong>svn_load_dirs.pl</strong></span>&#21516;&#26102;&#25171;&#19978;&#26631;&#31614;&#65292;&#36825;&#20351;&#29992;<code class="option">-t</code>&#21629;&#20196;&#34892;&#36873;&#39033;&#65292;&#38656;&#35201;&#25351;&#23450;&#19968;&#20010;&#26631;&#31614;&#21517;&#65292;&#36825;&#20010;&#26631;&#31614;&#26159;&#31532;&#19968;&#20010;&#21442;&#25968;&#30340;&#19968;&#20010;&#30456;&#23545;URL&#12290;
               </p><pre class="screen">
$ svn_load_dirs.pl -t libcomplex-1.1                              \
                   http://svn.example.com/repos/vendor/libcomplex \
                   current                                        \
                   /path/to/libcomplex-1.1
&#8230;
</pre><p>When you run <span class="command"><strong>svn_load_dirs.pl</strong></span>, it
                          examines the contents of your existing &#8220;<span class="quote">current</span>&#8221;
                          vendor drop and compares them with the proposed new vendor
                          drop.  In the trivial case, no files will be in
                          one version and not the other, and the script will perform the
                          new import without incident.  If, however, there are
                          discrepancies in the file layouts between versions,
                          <span class="command"><strong>svn_load_dirs.pl</strong></span> will ask you how
                          to resolve those differences.  For example, you
                          will have the opportunity to tell the script that you know
                          that the file <code class="filename">math.c</code> in version 1.0 of
                          libcomplex was renamed to <code class="filename">arithmetic.c</code> in
                          libcomplex 1.1.  Any discrepancies not explained by moves
                          are treated as regular additions and deletions.
               </p>
               <p>The script also accepts a separate configuration file for
                          setting properties on files and directories matching a regular
                          expression that are <span class="emphasis"><em>added</em></span> to the
                          repository.  This configuration file is specified to
                          <span class="command"><strong>svn_load_dirs.pl</strong></span> using the
                          <code class="option">-p</code> command-line option.  Each line of the
                          configuration file is a whitespace-delimited set of two or
                          four values: a Perl-style regular expression against which to match the
                          added path, a control keyword (either
                          <code class="literal">break</code> or <code class="literal">cont</code>), and then
                          optionally a property name and value.
               </p><pre class="screen">
\.png$              break   svn:mime-type   image/png
\.jpe?g$            break   svn:mime-type   image/jpeg
\.m3u$              cont    svn:mime-type   audio/x-mpegurl
\.m3u$              break   svn:eol-style   LF
.*                  break   svn:eol-style   native
</pre><p>For each added path, the configured property changes whose
                          regular expression matches the path are applied in order,
                          unless the control specification is <code class="literal">break</code>
                          (which means that no more property changes should be applied
                          to that path).  If the control specification is
                          <code class="literal">cont</code>&#8212;an abbreviation for
                          <code class="literal">continue</code>&#8212;matching will continue
                          with the next line of the configuration file.
               </p>
               <p>Any whitespace in the regular expression, property name,
                          or property value must be surrounded by either single or
                          double quotes.  You can escape quotes that
                          are not used for wrapping whitespace by preceding them with a
                          backslash (<code class="literal">\</code>) character.  The backslash
                          escapes only quotes when parsing the configuration file, so do
                          not protect any other characters beyond what is necessary for
                          the regular expression.
               </p>
            </div>
         </div>
         <div class="sect1" lang="zh-cn">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title" style="clear: both"><a name="svn.branchmerge.summary"></a>4.10.&nbsp;&#24635;&#32467;
                     </h2>
                  </div>
               </div>
            </div>
            <p>We covered a lot of ground in this chapter.  We
                     discussed the concepts of tags and branches and demonstrated
                     how Subversion implements these concepts by copying directories
                     with the <span class="command"><strong>svn copy</strong></span> command.  We showed how
                     to use <span class="command"><strong>svn merge</strong></span> to copy changes from one
                     branch to another or roll back bad changes.  We went over
                     the use of <span class="command"><strong>svn switch</strong></span> to create
                     mixed-location working copies.  And we talked about how one
                     might manage the organization and lifetimes of branches in a
                     repository.
            </p>
            <p>Remember the Subversion mantra: branches and tags are cheap.
                     So don't be afraid to use them when needed!
            </p>
            <p>As a helpful reminder of all the operations we discussed,
                     here is handy reference table you can consult as
                     you begin to make use of branches.
            </p>
            <div class="table"><a name="svn.branchemerge.summary.tbl-1"></a><p class="title"><b>&#34920;&nbsp;4.1.&nbsp;&#20998;&#25903;&#19982;&#21512;&#24182;&#21629;&#20196;</b></p>
               <div class="table-contents">
                  <table summary="&#20998;&#25903;&#19982;&#21512;&#24182;&#21629;&#20196;" border="1">
                     <colgroup>
                        <col width="50%">
                        <col width="50%">
                     </colgroup>
                     <thead>
                        <tr>
                           <th>&#21160;&#20316;</th>
                           <th>Command</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td>&#21019;&#24314;&#19968;&#20010;&#20998;&#25903;&#25110;&#26631;&#31614;</td>
                           <td><strong class="userinput"><code>svn copy <em class="replaceable"><code>URL1</code></em> <em class="replaceable"><code>URL2</code></em></code></strong></td>
                        </tr>
                        <tr>
                           <td>Switch a working copy to a branch or tag</td>
                           <td><strong class="userinput"><code>svn switch <em class="replaceable"><code>URL</code></em></code></strong></td>
                        </tr>
                        <tr>
                           <td>Synchronize a branch with trunk</td>
                           <td><strong class="userinput"><code>svn merge <em class="replaceable"><code>trunkURL</code></em>; svn commit</code></strong></td>
                        </tr>
                        <tr>
                           <td>See merge history or eligible changesets</td>
                           <td><strong class="userinput"><code>svn mergeinfo target --from-source=<em class="replaceable"><code>URL</code></em></code></strong></td>
                        </tr>
                        <tr>
                           <td>Merge a branch back into trunk</td>
                           <td><strong class="userinput"><code>svn merge --reintegrate <em class="replaceable"><code>branchURL</code></em>; svn commit</code></strong></td>
                        </tr>
                        <tr>
                           <td>&#22797;&#21046;&#29305;&#23450;&#30340;&#20462;&#25913;</td>
                           <td><strong class="userinput"><code>svn merge -c <em class="replaceable"><code>REV</code></em> <em class="replaceable"><code>URL</code></em>; svn commit</code></strong></td>
                        </tr>
                        <tr>
                           <td>&#21512;&#24182;&#19968;&#20010;&#33539;&#22260;&#30340;&#20462;&#25913;</td>
                           <td><strong class="userinput"><code>svn merge -r <em class="replaceable"><code>REV1</code></em>:<em class="replaceable"><code>REV2</code></em> <em class="replaceable"><code>URL</code></em>; svn commit</code></strong></td>
                        </tr>
                        <tr>
                           <td>Block a change from automatic merging</td>
                           <td><strong class="userinput"><code>svn merge -c <em class="replaceable"><code>REV</code></em> --record-only <em class="replaceable"><code>URL</code></em>; svn commit</code></strong></td>
                        </tr>
                        <tr>
                           <td>&#39044;&#35272;&#21512;&#24182;</td>
                           <td><strong class="userinput"><code>svn merge <em class="replaceable"><code>URL</code></em> --dry-run</code></strong></td>
                        </tr>
                        <tr>
                           <td>Abandon merge results</td>
                           <td><strong class="userinput"><code>svn revert -R .</code></strong></td>
                        </tr>
                        <tr>
                           <td>Resurrect something from history</td>
                           <td><strong class="userinput"><code>svn copy <em class="replaceable"><code>URL</code></em>@<em class="replaceable"><code>REV</code></em> <em class="replaceable"><code>localPATH</code></em></code></strong></td>
                        </tr>
                        <tr>
                           <td>Undo a committed change</td>
                           <td><strong class="userinput"><code>svn merge -c -<em class="replaceable"><code>REV</code></em> <em class="replaceable"><code>URL</code></em>; svn commit</code></strong></td>
                        </tr>
                        <tr>
                           <td>Examine merge-sensitive history</td>
                           <td><strong class="userinput"><code>svn log -g; svn blame -g</code></strong></td>
                        </tr>
                        <tr>
                           <td>&#20174;&#24037;&#20316;&#21103;&#26412;&#21019;&#24314;&#19968;&#20010;&#26631;&#31614;</td>
                           <td><strong class="userinput"><code>svn copy . <em class="replaceable"><code>tagURL</code></em></code></strong></td>
                        </tr>
                        <tr>
                           <td>Rearrange a branch or tag</td>
                           <td><strong class="userinput"><code>svn mv <em class="replaceable"><code>URL1</code></em> <em class="replaceable"><code>URL2</code></em></code></strong></td>
                        </tr>
                        <tr>
                           <td>Remove a branch or tag</td>
                           <td><strong class="userinput"><code>svn rm <em class="replaceable"><code>URL</code></em></code></strong></td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div><br class="table-break"></div>
         <div class="footnotes"><br><hr width="100" align="left">
            <div class="footnote">
               <p><sup>[<a name="ftn.d0e6678" href="#d0e6678" class="para">20</a>] </sup>Subversion&#19981;&#25903;&#25345;&#36328;&#29256;&#26412;&#24211;&#30340;&#25335;&#36125;&#65292;&#24403;&#20351;&#29992;<span class="command"><strong>svn copy</strong></span>&#25110;&#32773;<span class="command"><strong>svn move</strong></span>&#30452;&#25509;&#25805;&#20316;URL&#26102;&#20320;&#21482;&#33021;&#22312;&#21516;&#19968;&#20010;&#29256;&#26412;&#24211;&#20869;&#25805;&#20316;&#12290;
               </p>
            </div>
            <div class="footnote">
               <p><sup>[<a name="ftn.d0e6933" href="#d0e6933" class="para">21</a>] </sup>This was
                          introduced in svn 1.6.
               </p>
            </div>
            <div class="footnote">
               <p><sup>[<a name="ftn.d0e7309" href="#d0e7309" class="para">22</a>] </sup>Subversion&#39033;&#30446;&#26377;&#35745;&#21010;&#65292;&#19981;&#31649;&#29992;&#20160;&#20040;&#26041;&#24335;&#65292;&#20250;&#26377;&#19968;&#22825;&#35201;&#23454;&#29616;<span class="command"><strong>svnadmin obliterate</strong></span>&#21629;&#20196;&#26469;&#36827;&#34892;&#27704;&#20037;&#21024;&#38500;&#25805;&#20316;&#65292;&#32780;&#27492;&#26102;&#21487;&#20197;&#30475;<a class="xref" href="svn.reposadmin.html#svn.reposadmin.maint.tk.svndumpfilter" title="5.4.1.3.&nbsp;svndumpfilter">&#31532;&nbsp;5.4.1.3&nbsp;&#33410; &#8220;svndumpfilter&#8221;</a>&#25214;&#21040;&#21487;&#34892;&#30340;&#26041;&#26696;&#12290;
               </p>
            </div>
            <div class="footnote">
               <p><sup>[<a name="ftn.d0e7503" href="#d0e7503" class="para">23</a>] </sup>At least, this is true in Subversion 1.5 at the time
                                of this writing.  This behavior may improve in future
                                versions of Subversion.
               </p>
            </div>
            <div class="footnote">
               <p><sup>[<a name="ftn.d0e7705" href="#d0e7705" class="para">24</a>] </sup>Interestingly, after rolling back a
                                  revision like this, we wouldn't be able to reapply
                                  the revision using <strong class="userinput"><code>svn merge . -c 5</code></strong>,
                                  since the mergeinfo would already list r5 as being
                                  applied.  We would have to use
                                  the <code class="option">--ignore-ancestry</code> option to make
                                  the merge command ignore the existing
                                  mergeinfo!
               </p>
            </div>
            <div class="footnote">
               <p><sup>[<a name="ftn.d0e8247" href="#d0e8247" class="para">25</a>] </sup>&#22914;&#26524;&#20320;&#19981;&#24076;&#26395;&#25243;&#24323;&#24050;&#23384;&#22312;&#30340;&#24037;&#20316;&#21103;&#26412;&#65292;&#20320;<span class="emphasis"><em>&#21487;&#20197;</em></span>&#20351;&#29992;&#24102;<code class="option">--relocate</code>&#36873;&#39033;&#30340;<span class="command"><strong>svn switch</strong></span>&#21629;&#20196;&#36716;&#25442;URL&#65292;&#26356;&#22810;&#20449;&#24687;&#21644;&#20363;&#23376;&#21487;&#20197;&#30475;<a class="xref" href="svn.ref.svn.c.switch.html" title="svn switch">svn switch</a>&#12290;
               </p>
            </div>
            <div class="footnote">
               <p><sup>[<a name="ftn.d0e8830" href="#d0e8830" class="para">26</a>] </sup>And is entirely bug-free, of course!
               </p>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="svn.advanced.html">&#19978;&#19968;&#39029;</a>&nbsp;
               </td>
               <td width="20%" align="center">&nbsp;</td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="svn.reposadmin.html">&#19979;&#19968;&#39029;</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">&#31532;&nbsp;3&nbsp;&#31456;&nbsp;&#39640;&#32423;&#20027;&#39064;&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td>
               <td width="40%" align="right" valign="top">&nbsp;&#31532;&nbsp;5&nbsp;&#31456;&nbsp;&#29256;&#26412;&#24211;&#31649;&#29702;</td>
            </tr>
         </table>
      </div>
   </body>
</html>