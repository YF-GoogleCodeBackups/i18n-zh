<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>B.4. 区分状态和更新</title>
<link rel="stylesheet" href="styles.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.74.3">
<link rel="home" href="index.html" title="Subversion 权威指南">
<link rel="up" href="svn.forcvs.html" title="附录 B. CVS 用户的 Subversion 指南">
<link rel="prev" href="svn.forcvs.disconnected.html" title="B.3. 更多离线操作">
<link rel="next" href="svn.forcvs.branches-and-tags.html" title="B.5. 分支和标签">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">B.4. 区分状态和更新</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="svn.forcvs.disconnected.html">上一页</a> </td>
<th width="60%" align="center">附录 B. CVS 用户的 Subversion 指南</th>
<td width="20%" align="right"> <a accesskey="n" href="svn.forcvs.branches-and-tags.html">下一页</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="sect1" lang="zh">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="svn.forcvs.status-vs-update"></a>B.4. 区分状态和更新</h2></div></div></div>
<p>在Subversion，我们已经设法抹去<span class="command"><strong>cvs status</strong></span>和<span class="command"><strong>cvs
update</strong></span>之间的混乱。</p>
<p>The <span class="command"><strong>cvs status</strong></span> command has two purposes: first, to show
the user any local modifications in the working copy, and second, to show
the user which files are out of date.  Unfortunately, because of CVS's
hard-to-read status output, many CVS users don't take advantage of this
command at all.  Instead, they've developed a habit of running
<strong class="userinput"><code>cvs update</code></strong> or <strong class="userinput"><code>cvs -n update</code></strong> to
quickly see their changes.  If users forget to use the <code class="option">-n</code>
option, this has the side effect of merging repository changes they may not
be ready to deal with.</p>
<p>Subversion removes this muddle by making the output of <span class="command"><strong>svn
status</strong></span> easy to read for both humans and parsers.  Also,
<span class="command"><strong>svn update</strong></span> prints only information about files that are
updated, <span class="emphasis"><em>not</em></span> local modifications.</p>
<div class="sect2" lang="zh">
<div class="titlepage"><div><div><h3 class="title">
<a name="svn.forcvs.status-vs-update.status"></a>B.4.1. 状态</h3></div></div></div>
<p><span class="command"><strong>svn status</strong></span> prints all files that have local
modifications.  By default, the repository is not contacted.  While this
subcommand accepts a fair number of options, the following are the most
commonly used ones:</p>
<div class="variablelist"><dl>
<dt><span class="term"><code class="option">-u</code></span></dt>
<dd><p>访问版本库检测并显示过期的信息。</p></dd>
<dt><span class="term"><code class="option">-v</code></span></dt>
<dd><p>显示<span class="emphasis"><em>所有</em></span>版本控制下的文件。</p></dd>
<dt><span class="term"><code class="option">-N</code></span></dt>
<dd><p>非递归方式运行(不会访问子目录)。</p></dd>
</dl></div>
<p>The <span class="command"><strong>svn status</strong></span> command has two output formats.  In the
default “<span class="quote">short</span>” format, local modifications look like this:</p>
<pre class="screen">
$ svn status
M      foo.c
M      bar/baz.c
</pre>
<p>如果你指定<code class="option">--show-updates</code>(<code class="option">-u</code>)选项，就会使用较长的格式输出：</p>
<pre class="screen">
$ svn status -u
M            1047   foo.c
       *     1045   faces.html
       *            bloo.png
M            1050   bar/baz.c
Status against revision:   1066
</pre>
<p>In this case, two new columns appear.  The second column contains an
asterisk if the file or directory is out of date.  The third column shows
the working copy's revision number of the item.  In the previous example,
the asterisk indicates that <code class="filename">faces.html</code> would be patched
if we updated, and that <code class="filename">bloo.png</code> is a newly added file
in the repository.  (The absence of any revision number next to
<code class="filename">bloo.png</code> means that it doesn't yet exist in the working
copy.)</p>
<p>At this point, you should take a quick look at the list of all possible
status codes in <a class="xref" href="svn.ref.svn.c.status.html" title="svn status">svn status</a>.  Here are a few of
the more common status codes you'll see:</p>
<pre class="screen">
A    Resource is scheduled for Addition
D    Resource is scheduled for Deletion
M    Resource has local Modifications
C    Resource has Conflicts (changes have not been completely merged
       between the repository and working copy version)
X    Resource is eXternal to this working copy (may come from another
       repository).  See <a class="xref" href="svn.advanced.externals.html" title="3.8. 外部定义">第 3.8 节 “外部定义”</a>
?    Resource is not under version control
!    Resource is missing or incomplete (removed by a tool other than
       Subversion)
</pre>
<p>For a more detailed discussion of <span class="command"><strong>svn status</strong></span>, see <a class="xref" href="svn.tour.cycle.html#svn.tour.cycle.examine.status" title="2.4.3.1. 查看你的修改概况">第 2.4.3.1 节 “查看你的修改概况”</a>.</p>
</div>
<div class="sect2" lang="zh">
<div class="titlepage"><div><div><h3 class="title">
<a name="svn.forcvs.status-vs-update.update"></a>B.4.2. 更新</h3></div></div></div>
<p><span class="command"><strong>svn update</strong></span>会更新你的工作副本，只打印这次更新的文件。</p>
<p>Subversion has combined CVS's <code class="literal">P</code> and <code class="literal">U</code>
codes into just <code class="literal">U</code>.  When a merge or conflict occurs,
Subversion simply prints <code class="literal">G</code> or <code class="literal">C</code>,
rather than a whole sentence about it.</p>
<p>For a more detailed discussion of <span class="command"><strong>svn update</strong></span>, see <a class="xref" href="svn.tour.cycle.html#svn.tour.cycle.update" title="2.4.1. 更新你的工作副本">第 2.4.1 节 “更新你的工作副本”</a>.</p>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="svn.forcvs.disconnected.html">上一页</a> </td>
<td width="20%" align="center"><a accesskey="u" href="svn.forcvs.html">上一级</a></td>
<td width="40%" align="right"> <a accesskey="n" href="svn.forcvs.branches-and-tags.html">下一页</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">B.3. 更多离线操作 </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td>
<td width="40%" align="right" valign="top"> B.5. 分支和标签</td>
</tr>
</table>
</div>
</body>
</html>
