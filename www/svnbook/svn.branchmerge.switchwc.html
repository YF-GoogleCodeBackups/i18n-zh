<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>&#20351;&#29992;&#20998;&#25903;</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot_8167"><link rel="home" href="index.html" title="Subversion &#26435;&#23041;&#25351;&#21335;"><link rel="up" href="svn.branchmerge.html" title="&#31532;&nbsp;4&nbsp;&#31456;&nbsp;&#20998;&#25903;&#19982;&#21512;&#24182;"><link rel="prev" href="svn.branchmerge.advanced.html" title="&#39640;&#32423;&#21512;&#24182;"><link rel="next" href="svn.branchmerge.tags.html" title="&#26631;&#31614;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">&#20351;&#29992;&#20998;&#25903;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="svn.branchmerge.advanced.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><th width="60%" align="center">&#31532;&nbsp;4&nbsp;&#31456;&nbsp;&#20998;&#25903;&#19982;&#21512;&#24182;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="svn.branchmerge.tags.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="section" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="svn.branchmerge.switchwc"></a>&#20351;&#29992;&#20998;&#25903;</h2></div></div></div>
      
      <p><span class="command"><strong>svn switch</strong></span>&#21629;&#20196;&#25913;&#21464;&#23384;&#22312;&#30340;&#24037;&#20316;&#25335;&#36125;&#21040;&#21478;&#19968;&#20010;&#20998;&#25903;&#65292;&#28982;&#32780;&#36825;&#20010;&#21629;&#20196;&#22312;&#20998;&#25903;&#19978;&#24037;&#20316;&#26102;&#19981;&#26159;&#20005;&#26684;&#24517;&#35201;&#30340;&#65292;&#23427;&#21482;&#26159;&#25552;&#20379;&#20102;&#19968;&#20010;&#24555;&#25463;&#26041;&#24335;&#12290;&#22312;&#21069;&#38754;&#30340;&#20363;&#23376;&#37324;&#65292;&#23436;&#25104;&#20102;&#31169;&#26377;&#20998;&#25903;&#30340;&#24314;&#31435;&#65292;&#20320;&#21462;&#20986;&#20102;&#26032;&#30446;&#24405;&#30340;&#24037;&#20316;&#25335;&#36125;&#65292;&#30456;&#21453;&#65292;&#20320;&#21487;&#20197;&#31616;&#21333;&#30340;&#21578;&#35785;Subversion&#25913;&#21464;&#20320;&#30340;<code class="filename">/calc/trunk</code>&#30340;&#24037;&#20316;&#25335;&#36125;&#21040;&#20998;&#25903;&#30340;&#36335;&#24452;&#65306;</p>
      <pre class="screen">
$ cd calc

$ svn info | grep URL
URL: http://svn.example.com/repos/calc/trunk

$ svn switch http://svn.example.com/repos/calc/branches/my-calc-branch
U   integer.c
U   button.c
U   Makefile
Updated to revision 341.

$ svn info | grep URL
URL: http://svn.example.com/repos/calc/branches/my-calc-branch
</pre>
      <p>&#8220;<span class="quote">Switching</span>&#8221; a working copy that has no local
      modifications to a different branch results in the working copy
      looking just as it would if you'd done a fresh checkout of the
      directory.  It's usually more efficient to
      use this command, because often branches differ by only a small
      degree.  The server sends only the minimal set of changes
      necessary to make your working copy reflect the branch
      directory.</p>
      <p><span class="command"><strong>svn switch</strong></span>&#21629;&#20196;&#20063;&#21487;&#20197;&#24102;<code class="option">--revision</code>(<code class="option">-r</code>)&#21442;&#25968;&#65292;&#25152;&#20197;&#20320;&#19981;&#38656;&#35201;&#19968;&#30452;&#31227;&#21160;&#20320;&#30340;&#24037;&#20316;&#25335;&#36125;&#21040;&#20998;&#25903;&#30340;<code class="literal">HEAD</code>&#12290;</p>
      <p>&#24403;&#28982;&#65292;&#35768;&#22810;&#39033;&#30446;&#27604;&#25105;&#20204;&#30340;<code class="filename">calc</code>&#35201;&#22797;&#26434;&#30340;&#22810;&#65292;&#26377;&#26356;&#22810;&#30340;&#23376;&#30446;&#24405;&#65292;Subversion&#29992;&#25143;&#36890;&#24120;&#29992;&#22914;&#19979;&#30340;&#27861;&#21017;&#20351;&#29992;&#20998;&#25903;&#65306;</p>
      <div class="orderedlist"><ol type="1"><li>
          <p>&#25335;&#36125;&#25972;&#20010;&#39033;&#30446;&#30340;&#8220;<span class="quote">trunk</span>&#8221;&#30446;&#24405;&#21040;&#19968;&#20010;&#26032;&#30340;&#20998;&#25903;&#30446;&#24405;&#12290;</p>
        </li><li>
          <p>&#21482;&#26159;&#36716;&#25442;&#24037;&#20316;&#25335;&#36125;&#30340;<span class="emphasis"><em>&#37096;&#20998;</em></span>&#30446;&#24405;&#21040;&#20998;&#25903;&#12290;</p>
        </li></ol></div>
      <p>In other words, if a user knows that the branch work needs
      to happen on only a specific subdirectory, she uses
      <span class="command"><strong>svn switch</strong></span> to move only that subdirectory to
      the branch.  (Or sometimes users will switch just a single
      working file to the branch!)  That way, the user can continue to
      receive normal &#8220;<span class="quote">trunk</span>&#8221; updates to most of her
      working copy, but the switched portions will remain immune
      (unless someone commits a change to her branch).  This feature
      adds a whole new dimension to the concept of a &#8220;<span class="quote">mixed
      working copy</span>&#8221;&#8212;not only can working copies contain a
      mixture of working revisions, but they can also contain a
      mixture of repository locations as well.</p>
      <p>&#22914;&#26524;&#20320;&#30340;&#24037;&#20316;&#25335;&#36125;&#21253;&#21547;&#35768;&#22810;&#26469;&#33258;&#19981;&#21516;&#29256;&#26412;&#24211;&#30446;&#24405;&#36339;&#36716;&#30340;&#23376;&#26641;&#65292;&#23427;&#20250;&#24037;&#20316;&#22914;&#24120;&#12290;&#24403;&#20320;&#26356;&#26032;&#26102;&#65292;&#20320;&#20250;&#24471;&#21040;&#27599;&#19968;&#20010;&#30446;&#24405;&#36866;&#24403;&#30340;&#34917;&#19969;&#65292;&#24403;&#20320;&#25552;&#20132;&#26102;&#65292;&#20320;&#30340;&#26412;&#22320;&#20462;&#25913;&#20250;&#19968;&#30452;&#20316;&#20026;&#19968;&#20010;&#21333;&#29420;&#30340;&#21407;&#23376;&#20462;&#25913;&#25552;&#20132;&#21040;&#29256;&#26412;&#24211;&#12290;</p>
      <p>Note that while it's okay for your working copy to reflect a
      mixture of repository locations, these locations must all be
      within the <span class="emphasis"><em>same</em></span> repository.  Subversion
      repositories aren't yet able to communicate with one another;
      that feature is planned for the future.
      <sup>[<a name="d4e3832" href="#ftn.d4e3832" class="footnote">24</a>]</sup>
    </p>
      <div class="sidebar"><p class="title"><b>&#20999;&#25442;&#21644;&#26356;&#26032;</b></p>
        
        <p>Have you noticed that the output of <span class="command"><strong>svn
        switch</strong></span> and <span class="command"><strong>svn update</strong></span> looks the
        same?  The switch command is actually a superset of the update
        command.</p>
        <p>&#24403;&#20320;&#36816;&#34892;<span class="command"><strong>svn update</strong></span>&#26102;&#65292;&#20320;&#20250;&#21578;&#35785;&#29256;&#26412;&#24211;&#27604;&#36739;&#20004;&#20010;&#30446;&#24405;&#26641;&#65292;&#29256;&#26412;&#24211;&#36825;&#26679;&#20570;&#65292;&#24182;&#19988;&#36820;&#22238;&#32473;&#23458;&#25143;&#21306;&#21035;&#30340;&#25551;&#36848;&#65292;<span class="command"><strong>svn switch</strong></span>&#21644;<span class="command"><strong>svn update</strong></span>&#20004;&#20010;&#21629;&#20196;&#21807;&#19968;&#21306;&#21035;&#23601;&#26159;<span class="command"><strong>update</strong></span>&#20250;&#19968;&#30452;&#27604;&#36739;&#21516;&#19968;&#36335;&#24452;&#12290;</p>
        <p>That is, if your working copy is a mirror of
        <code class="filename">/calc/trunk</code>, <span class="command"><strong>svn
        update</strong></span> will automatically compare your working copy
        of <code class="filename">/calc/trunk</code> to
        <code class="filename">/calc/trunk</code> in the
        <code class="literal">HEAD</code> revision.  If you're switching your
        working copy to a branch, <span class="command"><strong>svn switch</strong></span>
        will compare your working copy of
        <code class="filename">/calc/trunk</code> to some
        <span class="emphasis"><em>other</em></span> branch directory in the
        <code class="literal">HEAD</code> revision.</p>
        <p>&#25442;&#21477;&#35805;&#35828;&#65292;&#19968;&#20010;&#26356;&#26032;&#36890;&#36807;&#26102;&#38388;&#31227;&#21160;&#20320;&#30340;&#24037;&#20316;&#25335;&#36125;&#65292;&#19968;&#20010;&#36716;&#25442;&#36890;&#36807;&#26102;&#38388;&#21644;&#31354;&#38388;&#31227;&#21160;&#24037;&#20316;&#25335;&#36125;&#12290;</p>
      </div>
      <p>&#22240;&#20026;<span class="command"><strong>svn switch</strong></span>&#26159;<span class="command"><strong>svn update</strong></span>&#30340;&#19968;&#20010;&#21464;&#31181;&#65292;&#20855;&#26377;&#30456;&#21516;&#30340;&#34892;&#20026;&#65292;&#24403;&#26032;&#30340;&#25968;&#25454;&#21040;&#36798;&#26102;&#65292;&#20219;&#20309;&#24037;&#20316;&#25335;&#36125;&#30340;&#24050;&#32463;&#23436;&#25104;&#30340;&#26412;&#22320;&#20462;&#25913;&#20250;&#34987;&#20445;&#23384;&#12290;</p>
      <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">&#25552;&#31034;</h3>
        <p>&#20320;&#26159;&#21542;&#21457;&#29616;&#20320;&#20570;&#20986;&#20102;&#22797;&#26434;&#30340;&#20462;&#25913;(&#22312;<code class="filename">/trunk</code>&#30340;&#24037;&#20316;&#25335;&#36125;)&#65292;&#24182;&#31361;&#28982;&#21457;&#29616;&#65292;&#8220;<span class="quote">&#36825;&#20123;&#20462;&#25913;&#24517;&#39035;&#22312;&#23427;&#20204;&#33258;&#24049;&#30340;&#20998;&#25903;&#65311;</span>&#8221;&#22788;&#29702;&#36825;&#20010;&#38382;&#39064;&#30340;&#25216;&#26415;&#21487;&#20197;&#24635;&#32467;&#20026;&#20004;&#27493;&#65306;</p>
        <pre class="screen">
$ svn copy http://svn.example.com/repos/calc/trunk \
           http://svn.example.com/repos/calc/branches/newbranch \
      -m "Create branch 'newbranch'."
Committed revision 353.
$ svn switch http://svn.example.com/repos/calc/branches/newbranch
At revision 353.
</pre>
        <p>&#23601;&#20687;<span class="command"><strong>svn update</strong></span>&#21629;&#20196;&#65292;<span class="command"><strong>svn switch</strong></span>&#20250;&#20445;&#30041;&#24037;&#20316;&#25335;&#36125;&#30340;&#26412;&#22320;&#20462;&#25913;&#65292;&#27492;&#21051;&#65292;&#20320;&#30340;&#24037;&#20316;&#25335;&#36125;&#21453;&#26144;&#21040;&#26032;&#24314;&#30340;&#20998;&#25903;&#19978;&#65292;&#32780;&#20320;&#30340;&#19979;&#19968;&#27425;<span class="command"><strong>svn commit</strong></span>&#20250;&#21457;&#36865;&#20462;&#25913;&#21040;&#26381;&#21153;&#22120;&#12290;</p>
      </div>
    <div class="footnotes"><br><hr width="100" align="left"><div class="footnote"><p><sup>[<a name="ftn.d4e3832" href="#d4e3832" class="para">24</a>] </sup>&#22914;&#26524;&#20320;&#19981;&#24076;&#26395;&#25243;&#24323;&#24050;&#23384;&#22312;&#30340;&#24037;&#20316;&#25335;&#36125;&#65292;&#20320;<span class="emphasis"><em>&#21487;&#20197;</em></span>&#20351;&#29992;&#24102;<code class="option">--relocate</code>&#36873;&#39033;&#30340;<span class="command"><strong>svn switch</strong></span>&#21629;&#20196;&#36716;&#25442;URL&#65292;&#26356;&#22810;&#20449;&#24687;&#21644;&#20363;&#23376;&#21487;&#20197;&#30475;<a class="xref" href="svn.ref.svn.c.switch.html" title="svn switch">svn switch</a>&#12290;</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="svn.branchmerge.advanced.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="svn.branchmerge.html">&#19978;&#19968;&#32423;</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="svn.branchmerge.tags.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">&#39640;&#32423;&#21512;&#24182;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top">&nbsp;&#26631;&#31614;</td></tr></table></div></body></html>