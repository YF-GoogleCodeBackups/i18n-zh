<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>&#26631;&#31614;</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot_8167"><link rel="home" href="index.html" title="Subversion &#26435;&#23041;&#25351;&#21335;"><link rel="up" href="svn.branchmerge.html" title="&#31532;&nbsp;4&nbsp;&#31456;&nbsp;&#20998;&#25903;&#19982;&#21512;&#24182;"><link rel="prev" href="svn.branchmerge.switchwc.html" title="&#20351;&#29992;&#20998;&#25903;"><link rel="next" href="svn.branchmerge.maint.html" title="&#32500;&#25252;&#20998;&#25903;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">&#26631;&#31614;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="svn.branchmerge.switchwc.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><th width="60%" align="center">&#31532;&nbsp;4&nbsp;&#31456;&nbsp;&#20998;&#25903;&#19982;&#21512;&#24182;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="svn.branchmerge.maint.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="section" lang="zh-cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="svn.branchmerge.tags"></a>&#26631;&#31614;</h2></div></div></div>
      
      <p>&#21478;&#19968;&#20010;&#24120;&#35265;&#30340;&#29256;&#26412;&#25511;&#21046;&#31995;&#32479;&#27010;&#24565;&#26159;&#26631;&shy;&frac34;(<em class="firstterm">tag</em>)&#65292;&#19968;&#20010;&#26631;&#31614;&#21482;&#26159;&#19968;&#20010;&#39033;&#30446;&#26576;&#19968;&#26102;&#38388;&#30340;&#8220;<span class="quote">&#24555;&#29031;</span>&#8221;&#65292;&#22312;Subversion&#37324;&#36825;&#20010;&#27010;&#24565;&#26080;&#22788;&#19981;&#22312;&#8212;&#27599;&#19968;&#27425;&#25552;&#20132;&#30340;&#20462;&#35746;&#29256;&#26412;&#37117;&#26159;&#19968;&#20010;&#31934;&#30830;&#30340;&#24555;&#29031;&#12290;</p>
      <p>&#28982;&#32780;&#20154;&#20204;&#24076;&#26395;&#26356;&#20154;&#24615;&#21270;&#30340;&#26631;&#31614;&#21517;&#31216;&#65292;&#20687;<code class="literal">release-1.0</code>&#12290;&#20182;&#20204;&#20063;&#24076;&#26395;&#21487;&#20197;&#23545;&#19968;&#20010;&#23376;&#30446;&#24405;&#24555;&#29031;&#65292;&#27605;&#31455;&#65292;&#35760;&#20303;release-1.0&#26159;&#20462;&#35746;&#29256;&#26412;4822&#30340;&#26576;&#19968;&#23567;&#37096;&#20998;&#19981;&#26159;&#20214;&#24456;&#23481;&#26131;&#30340;&#20107;&#12290;</p>
      
      <div class="section" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="svn.branchmerge.tags.mksimple"></a>&#24314;&#31435;&#31616;&#21333;&#26631;&#31614;</h3></div></div></div>
        
        <p>Once again, <span class="command"><strong>svn copy</strong></span> comes to the
        rescue.  If you want to create a snapshot of
        <code class="filename">/calc/trunk</code> exactly as it looks in the
        <code class="literal">HEAD</code> revision, make a copy of it:</p>
        <pre class="screen">
$ svn copy http://svn.example.com/repos/calc/trunk \
           http://svn.example.com/repos/calc/tags/release-1.0 \
      -m "Tagging the 1.0 release of the 'calc' project."

Committed revision 902.
</pre>
        <p>This example assumes that a
        <code class="filename">/calc/tags</code> directory already exists.  (If
        it doesn't, you can create it using <span class="command"><strong>svn
        mkdir</strong></span>.)  After the copy completes, the new
        <code class="filename">release-1.0</code> directory is forever a
        snapshot of how the <code class="filename">/trunk</code> directory
        looked in the <code class="literal">HEAD</code> revision at the time you
        made the copy.  Of course, you might want to be more precise
        about exactly which revision you copy, in case somebody else
        may have committed changes to the project when you weren't
        looking.  So if you know that revision 901 of
        <code class="filename">/calc/trunk</code> is exactly the snapshot you
        want, you can specify it by passing <code class="option">-r 901</code> to
        the <span class="command"><strong>svn copy</strong></span> command.</p>
        <p>But wait a moment: isn't this tag creation procedure the
        same procedure we used to create a branch?  Yes, in fact, it
        is.  In Subversion, there's no difference between a tag and a
        branch.  Both are just ordinary directories that are created
        by copying.  Just as with branches, the only reason a copied
        directory is a &#8220;<span class="quote">tag</span>&#8221; is because
        <span class="emphasis"><em>humans</em></span> have decided to treat it that way:
        as long as nobody ever commits to the directory, it forever
        remains a snapshot.  If people start committing to it, it
        becomes a branch.</p>
        <p>If you are administering a repository, there are two
        approaches you can take to managing tags.  The first approach
        is &#8220;<span class="quote">hands off</span>&#8221;: as a matter of project policy,
        decide where your tags will live, and make sure all users know
        how to treat the directories they copy.  (That is, make sure
        they know not to commit to them.)  The second approach is more
        paranoid: you can use one of the access control scripts
        provided with Subversion to prevent anyone from doing anything
        but creating new copies in the tags area (see
        <a class="xref" href="svn.serverconfig.html" title="&#31532;&nbsp;6&nbsp;&#31456;&nbsp;&#26381;&#21153;&#37197;&#32622;">&#31532;&nbsp;6&nbsp;&#31456; <i>&#26381;&#21153;&#37197;&#32622;</i></a>).  The paranoid approach,
        however, isn't usually necessary.  If a user accidentally
        commits a change to a tag directory, you can simply undo the
        change as discussed in the previous section.  This is version
        control, after all!</p>
      </div>
      
      <div class="section" lang="zh-cn"><div class="titlepage"><div><div><h3 class="title"><a name="svn.branchmerge.tags.mkcomplex"></a>&#24314;&#31435;&#22797;&#26434;&#26631;&#31614;</h3></div></div></div>
        
        <p>&#26377;&#26102;&#20505;&#20320;&#24076;&#26395;&#20320;&#30340;&#8220;<span class="quote">&#24555;&#29031;</span>&#8221;&#33021;&#22815;&#24456;&#22797;&#26434;&#65292;&#32780;&#19981;&#21482;&#26159;&#19968;&#20010;&#21333;&#29420;&#20462;&#35746;&#29256;&#26412;&#30340;&#19968;&#20010;&#21333;&#29420;&#30446;&#24405;&#12290;</p>
        <p>For example, pretend your project is much larger than our
        <code class="filename">calc</code> example: suppose it contains a
        number of subdirectories and many more files.  In the course
        of your work, you may decide that you need to create a working
        copy that is designed to have specific features and bug fixes.
        You can accomplish this by selectively backdating files or
        directories to particular revisions (using <span class="command"><strong>svn update</strong></span>
        with the <code class="option">-r</code> option liberally), by switching files and directories to
        particular branches (making use of <span class="command"><strong>svn
        switch</strong></span>), or even just by making a bunch of local
        changes.  When you're done, your working copy is a hodgepodge
        of repository locations from different revisions.  But after
        testing, you know it's the precise combination of data you
        need to tag.</p>
        <p>Time to make a snapshot.  Copying one URL to another won't
        work here.  In this case, you want to make a snapshot of your
        exact working copy arrangement and store it in the repository.
        Luckily, <span class="command"><strong>svn copy</strong></span> actually has four
        different uses (which you can read about in <a class="xref" href="svn.ref.html" title="&#31532;&nbsp;9&nbsp;&#31456;&nbsp;Subversion &#23436;&#20840;&#21442;&#32771;">&#31532;&nbsp;9&nbsp;&#31456; <i>Subversion &#23436;&#20840;&#21442;&#32771;</i></a>), including the ability to copy a
        working copy tree to the repository:</p>
        <pre class="screen">
$ ls
my-working-copy/

$ svn copy my-working-copy \
           http://svn.example.com/repos/calc/tags/mytag \
           -m "Tag my existing working copy state."

Committed revision 940.
</pre>
        <p>Now there is a new directory in the repository,
        <code class="filename">/calc/tags/mytag</code>, which is an exact
        snapshot of your working copy&#8212;mixed revisions, URLs,
        local changes, and all.</p>
        <p>Other users have found interesting uses for this feature.
        Sometimes there are situations where you have a bunch of local
        changes made to your working copy, and you'd like a
        collaborator to see them.  Instead of running <span class="command"><strong>svn
        diff</strong></span> and sending a patch file (which won't capture
        directory, symlink, or property changes), you can
        use <span class="command"><strong>svn copy</strong></span> to &#8220;<span class="quote">upload</span>&#8221; your
        working copy to a private area of the repository.  Your
        collaborator can then either check out a verbatim copy of your
        working copy or use <span class="command"><strong>svn merge</strong></span> to receive
        your exact changes.</p>
        <p>While this is a nice method for uploading a quick snapshot
        of your working copy, note that this is <span class="emphasis"><em>not</em></span>
        a good way to initially create a branch.  Branch creation should
        be an event unto itself, and this method conflates the creation
        of a branch with extra changes to files, all within a single revision.
        This makes it very difficult (later on) to identify a single
        revision number as a branch point.</p>
      </div>
    </div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="svn.branchmerge.switchwc.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="svn.branchmerge.html">&#19978;&#19968;&#32423;</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="svn.branchmerge.maint.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">&#20351;&#29992;&#20998;&#25903;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top">&nbsp;&#32500;&#25252;&#20998;&#25903;</td></tr></table></div></body></html>