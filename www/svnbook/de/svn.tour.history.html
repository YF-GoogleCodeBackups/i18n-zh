<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>2.5. Geschichtsforschung</title>
<link rel="stylesheet" href="styles.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.74.3">
<link rel="home" href="index.html" title="Versionskontrolle mit Subversion">
<link rel="up" href="svn.tour.html" title="Kapitel 2. Grundlegende Benutzung">
<link rel="prev" href="svn.tour.cycle.html" title="2.4. Der grundlegende Arbeitszyklus">
<link rel="next" href="svn.tour.cleanup.html" title="2.6. Manchmal müssen Sie einfach nur aufräumen">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">2.5. Geschichtsforschung</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="svn.tour.cycle.html">Zurück</a> </td>
<th width="60%" align="center">Kapitel 2. Grundlegende Benutzung</th>
<td width="20%" align="right"> <a accesskey="n" href="svn.tour.cleanup.html">Weiter</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="sect1" lang="de">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="svn.tour.history"></a>2.5. Geschichtsforschung</h2></div></div></div>
<p>Ihr Subversion-Repository ist wie eine Zeitmaschine. Es legt
      einen Eintrag für jede jemals übergebene Änderung an und erlaubt
      Ihnen, diese Geschichte durch die Untersuchung sowohl ehemaliger
      Datei- und Verzeichnisversionen als auch der begleitenden
      Metadaten zu erforschen. Mit einem einzigen Subversion-Befehl
      können Sie das Repository genauso auschecken (oder eine
      bestehende Arbeitskopie wiederherstellen), wie es zu einem
      beliebigen Zeitpunkt oder einer Revisionsnummer in der
      Vergangenheit war. Allerdings möchten Sie manchmal nur in die
      Vergangenheit <span class="emphasis"><em>spähen</em></span> anstatt dorthin zu
      <span class="emphasis"><em>gehen</em></span>.</p>
<p>Es gibt mehrere Befehle, die Sie mit historischen Daten aus dem
      Repository versorgen können:</p>
<div class="variablelist"><dl>
<dt><span class="term"><span class="command"><strong>svn log</strong></span></span></dt>
<dd><p>Zeigt Ihnen grobe Informationen: Mit Revisionen
              verknüpfte Protokolleinträge zu Datum
              und Autor und welche Pfade sich in jeder Revision
              geändert haben.</p></dd>
<dt><span class="term"><span class="command"><strong>svn diff</strong></span></span></dt>
<dd><p>Zeigt die Details einer bestimmten Änderung auf
              Zeilenebene</p></dd>
<dt><span class="term"><span class="command"><strong>svn cat</strong></span></span></dt>
<dd><p>Holt eine Datei hervor wie sie mit einer bestimmten
              Revisionsnummer einmal ausgesehen hat und zeigt sie auf
              dem Bildschirm an</p></dd>
<dt><span class="term"><span class="command"><strong>svn list</strong></span></span></dt>
<dd><p>Zeigt die Dateien in einem Verzeichnis für eine
              gewünschte Revision an</p></dd>
</dl></div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="svn.tour.history.log"></a>2.5.1. Erzeugung einer Liste der Änderungsgeschichte</h3></div></div></div>
<p>Um Informationen über den Werdegang einer Datei oder eines
        Verzeichnisses zu bekommen, benutzen Sie den Befehl
        <span class="command"><strong>svn log</strong></span>. <span class="command"><strong>svn log</strong></span>
        versorgt Sie mit einem Eintrag, der Auskunft darüber gibt, wer
        Änderungen an einer Datei oder einem Verzeichnis gemacht hat,
        in welcher Revision die Änderung stattfand, zu welcher Zeit und
        welchem Datum die Revision entstand sowie – falls
        verfügbar – dem die Übergabe begleitenden
        Protokolleintrag:</p>
<pre class="screen">
$ svn log
------------------------------------------------------------------------
r3 | sally | 2008-05-15 23:09:28 -0500 (Thu, 15 May 2008) | 1 line

include-Zeilen hinzugefügt und Anzahl der Käsescheiben korrigiert.
------------------------------------------------------------------------
r2 | harry | 2008-05-14 18:43:15 -0500 (Wed, 14 May 2008) | 1 line

main()-Methoden hinzugefügt.
------------------------------------------------------------------------
r1 | sally | 2008-05-10 19:50:31 -0500 (Sat, 10 May 2008) | 1 line

Erstimport
------------------------------------------------------------------------
</pre>
<p>Beachten Sie, dass die Protokolleinträge standardmäßig in
        <span class="emphasis"><em>umgekehrter zeitlicher Reihenfolge</em></span>
        ausgegeben werden. Falls Sie eine andere Folge von Revisionen
        in einer bestimmten Anordnung oder nur eine einzige Revision
        sehen möchten, übergeben Sie die Option
        <code class="option">--revision</code> (<code class="option">-r</code>):</p>
<pre class="screen">
$ svn log -r 5:19    # zeigt Protokolleintrag 5 bis 19 in chronologischer Reihenfolge

$ svn log -r 19:5    # zeigt Protokolleintrag 5 bis 19 in umgekehrter Reihenfolge

$ svn log -r 8       # zeigt Protokolleintrag für Revision 8
</pre>
<p>Sie können sich auch die Protokollgeschichte einer
        einzigen Datei oder eines einzigen Verzeichnisses ansehen. Zum
        Beispiel:</p>
<pre class="screen">
$ svn log foo.c
…
$ svn log http://foo.com/svn/trunk/code/foo.c
…
</pre>
<p>Diese Befehle zeigen <span class="emphasis"><em>nur</em></span>
        Protokolleinträge für die Revisionen, in der sich die
        Arbeitsdatei (oder URL) geändert hat.</p>
<div class="sidebar">
<p class="title"><b>Warum zeigt mir svn log nicht, was ich gerade übergeben
	  habe?</b></p>
<p>Wenn Sie Ihre Änderungen an das Repository übergeben und
          sofort <strong class="userinput"><code>svn log</code></strong> ohne Argumente
          eingeben, wird Ihnen vielleicht auffallen, dass Ihre letzte
          Änderung nicht in der Liste der Protokolleinträge
          auftaucht. Das liegt an der Kombination des Verhaltens von
          <span class="command"><strong>svn commit</strong></span> und dem Standardverhalten von
          <span class="command"><strong>svn log</strong></span>. Wenn Sie Änderungen an das
          Repository übergeben, erhöht <span class="command"><strong>svn</strong></span> zunächst
          nur die Revision der Dateien (und Verzeichnisse) die es
          übernimmt, so dass das Elternverzeichnis normalerweise auf
          der älteren Revision verbleibt (siehe <a class="xref" href="svn.basic.in-action.html#svn.basic.in-action.mixedrevs.update-commit" title="1.3.5.1. Updates und Commits sind getrennt">Abschnitt 1.3.5.1, „Updates und Commits sind getrennt“</a> für
          die Erklärung, warum das so ist). <span class="command"><strong>svn log</strong></span>
          holt dann standardmäßig die Geschichte des Verzeichnisses in
          der gegenwärtigen Revision, und so kommt es, dass Sie die
          neu übergebenen Änderungen nicht sehen. Die Lösung besteht
          entweder in einer Aktualisierung Ihrer Arbeitskopie oder
          indem Sie dem Befehl <span class="command"><strong>svn log</strong></span> ausdrücklich
          mit der Option <code class="option">--revision</code>
          (<code class="option">-r</code>) eine Revisionsnummer mitgeben.</p>
</div>
<p>Wenn Sie noch mehr Informationen über eine Datei oder ein
        Verzeichnis benötigen, können Sie <span class="command"><strong>svn log</strong></span>
        auch die Option <code class="option">--verbose</code>
        (<code class="option">-v</code>) mitgeben. Weil Ihnen Subversion erlaubt,
        Dateien und Verzeichnisse zu kopieren und zu verschieben, ist
        es wichtig, Pfadänderungen im Dateisystem
        mitzuverfolgen. Daher beinhaltet bei dieser Option die Ausgabe
        von <span class="command"><strong>svn log</strong></span> eine Liste veränderter Pfade in
        einer Revision:</p>
<pre class="screen">
$ svn log -r 8 -v
------------------------------------------------------------------------
r8 | sally | 2008-05-21 13:19:25 -0500 (Wed, 21 May 2008) | 1 line
Geänderte Pfade:
   M /trunk/code/foo.c
   M /trunk/code/bar.h
   A /trunk/code/doc/README

Die Unterraumwinde gefrozzelt.

------------------------------------------------------------------------
</pre>
<p>
        <span class="command"><strong>svn log</strong></span> akzeptiert ebenfalls die Option
        <code class="option">--quiet</code> (<code class="option">-q</code>), die den
        Protokolleintrag unterdrückt.  Zusammen mit der Option
        <code class="option">--verbose</code> zeigt es nur die Namen der
        geänderten Dateien an.</p>
<div class="sidebar">
<p class="title"><b>Warum gibt mir svn log eine leere Antwort?</b></p>
<p>Nach ein wenig Arbeit mit Subversion werden die meisten
          Benutzer soetwas begegnen:</p>
<pre class="screen">
$ svn log -r 2
------------------------------------------------------------------------
$
</pre>
<p>Auf den ersten Blick sieht es aus wie ein Fehler. Aber
          seien Sie daran erinnert, dass, während Revisionen über das
          gesamte Repository zählen, <span class="command"><strong>svn log</strong></span> auf
          einem Pfad im Repository arbeitet. Wenn Sie keinen Pfad
          angeben, verwendet Subversion das aktuelle
          Arbeitsverzeichnis als Standardargument.  Deshalb zeigt Subversion
          Ihnen einen leeren Protokolleintrag, falls Sie in einem
          Unterverzeichnis Ihrer Arbeitskopie arbeiten und versuchen,
          sich den Protokolleintrag einer Revision anzusehen, in dem
          sich weder dieses Verzeichnis noch irgendein Unterverzeichnis
          darin geändert hat. Falls Sie sehen wollen, was sich in der
          Revision geändert hat, versuchen Sie <span class="command"><strong>svn
          log</strong></span> direkt auf den obersten URL Ihres Repositorys
          zeigen zu lassen, wie in <strong class="userinput"><code>svn log -r 2
          http://svn.collab.net/repos/svn</code></strong>.</p>
</div>
</div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="svn.tour.history.diff"></a>2.5.2. Detaillierte Untersuchung der Änderungsgeschichte</h3></div></div></div>
<p><span class="command"><strong>svn diff</strong></span> ist uns bereits begegnet
        – es zeigt Dateiunterschiede im unified-diff-Format; wir
        verwendeten es, um die lokalen Änderungen an unserer
        Arbeitskopie anzuzeigen, bevor wir sie dem Repository
        übergaben.</p>
<p>Tatsächlich stellt sich heraus, dass es
        <span class="emphasis"><em>drei</em></span> verschiedene
        Verwendungsmöglichkeiten für <span class="command"><strong>svn diff</strong></span>
        gibt:</p>
<div class="itemizedlist"><ul type="disc">
<li><p>zum Untersuchen lokaler Änderungen</p></li>
<li><p>zum Vergleichen Ihrer Arbeitskopie mit dem
	    Repository</p></li>
<li><p>zum Vergleichen von Revisionen im Repository</p></li>
</ul></div>
<div class="sect3" lang="de">
<div class="titlepage"><div><div><h4 class="title">
<a name="svn.tour.history.diff.local"></a>2.5.2.1. Untersuchen lokaler Änderungen</h4></div></div></div>
<p>Wie wir gesehen haben, vergleicht der Aufruf von
          <strong class="userinput"><code>svn diff</code></strong> ohne Optionen die
          Arbeitsdateien mit den zwischengespeicherten
          „<span class="quote">ursprünglichen</span>“ Kopien im
          <code class="filename">.svn</code>-Bereich:</p>
<pre class="screen">
$ svn diff
Index: rules.txt
===================================================================
--- rules.txt   (revision 3)
+++ rules.txt   (working copy)
@@ -1,4 +1,5 @@
 Be kind to others
 Freedom = Responsibility
 Everything in moderation
-Chew with your mouth open
+Chew with your mouth closed
+Listen when others are speaking
$
</pre>
</div>
<div class="sect3" lang="de">
<div class="titlepage"><div><div><h4 class="title">
<a name="svn.tour.history.diff.wcrepos"></a>2.5.2.2. Vergleichen der Arbeitskopie mit dem Repository</h4></div></div></div>
<p>Wird eine einzelne Nummer mit <code class="option">--revision</code>
          (<code class="option">-r</code>) übergeben, wird die Arbeitskopie mit
          der angegebenen Revision im Repository verglichen:</p>
<pre class="screen">
$ svn diff -r 3 rules.txt
Index: rules.txt
===================================================================
--- rules.txt   (revision 3)
+++ rules.txt   (working copy)
@@ -1,4 +1,5 @@
 Be kind to others
 Freedom = Responsibility
 Everything in moderation
-Chew with your mouth open
+Chew with your mouth closed
+Listen when others are speaking
$
</pre>
</div>
<div class="sect3" lang="de">
<div class="titlepage"><div><div><h4 class="title">
<a name="svn.tour.history.diff.reposrepos"></a>2.5.2.3. Vergleichen von Repository mit Repository</h4></div></div></div>
<p>Werden zwei Revisionsnummern durch einen Doppelpunkt
          getrennt mit <code class="option">--revision</code>
          (<code class="option">-r</code>) übergeben, werden die beiden
          Revisionen direkt miteinander verglichen:</p>
<pre class="screen">
$ svn diff -r 2:3 rules.txt
Index: rules.txt
===================================================================
--- rules.txt   (revision 2)
+++ rules.txt   (revision 3)
@@ -1,4 +1,4 @@
 Be kind to others
-Freedom = Chocolate Ice Cream
+Freedom = Responsibility
 Everything in moderation
 Chew with your mouth open
$
</pre>
<p>Eine bequemere Möglichkeit, eine Revision mit der
          Vorgänger-Revision zu vergleichen, bietet die Verwendung der
          Option <code class="option">--change</code>
          (<code class="option">-c</code>):</p>
<pre class="screen">
$ svn diff -c 3 rules.txt
Index: rules.txt
===================================================================
--- rules.txt   (revision 2)
+++ rules.txt   (revision 3)
@@ -1,4 +1,4 @@
 Be kind to others
-Freedom = Chocolate Ice Cream
+Freedom = Responsibility
 Everything in moderation
 Chew with your mouth open
$
</pre>
<p>Zu guter Letzt können Sie Revisionen im Repository auch
          dann vergleichen, falls Sie gar keine Arbeitskopie auf Ihrem
          lokalen Rechner haben, indem Sie einfach den entsprechenden
          URL auf der Kommandozeile angeben:</p>
<pre class="screen">
$ svn diff -c 5 http://svn.example.com/repos/example/trunk/text/rules.txt
…
$
</pre>
</div>
</div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="svn.tour.history.browsing"></a>2.5.3. Stöbern im Repository</h3></div></div></div>
<p>Wenn Sie <span class="command"><strong>svn cat</strong></span> und <span class="command"><strong>svn
        list</strong></span> verwenden, können Sie sich verschiedene
        Revisionen von Dateien und Verzeichnissen ansehen, ohne die
        Revision Ihrer Arbeitskopie ändern zu müssen. Tatsächlich
        brauchen Sie dafür nichteinmal eine Arbeitskopie.</p>
<div class="sect3" lang="de">
<div class="titlepage"><div><div><h4 class="title">
<a name="svn.tour.history.browsing.cat"></a>2.5.3.1. svn cat</h4></div></div></div>
<p>Falls Sie eine frühere Version einer Datei untersuchen
          möchten und nicht notwendigerweise die Unterschiede zwischen
          zwei Dateien, können Sie <span class="command"><strong>svn cat</strong></span>
          verwenden:</p>
<pre class="screen">
$ svn cat -r 2 rules.txt
Be kind to others
Freedom = Chocolate Ice Cream
Everything in moderation
Chew with your mouth open
$
</pre>
<p>Sie können die Ausgabe auch direkt in eine Datei
          umleiten:</p>
<pre class="screen">
$ svn cat -r 2 rules.txt &gt; rules.txt.v2
$
</pre>
</div>
<div class="sect3" lang="de">
<div class="titlepage"><div><div><h4 class="title">
<a name="svn.tour.history.browsing.list"></a>2.5.3.2. svn list</h4></div></div></div>
<p>Der Befehl <span class="command"><strong>svn list</strong></span> zeigt Ihnen,
          welche Dateien sich in einem Repository-Verzeichnis
          befinden, ohne die Dateien auf Ihren lokalen Rechner
          herunterladen zu müssen:</p>
<pre class="screen">
$ svn list http://svn.collab.net/repos/svn
README
branches/
clients/
tags/
trunk/
</pre>
<p>Falls Sie eine detailliertere Auflistung wünschen,
          übergeben Sie die Option <code class="option">--verbose</code>
          (<code class="option">-v</code>), um eine Ausgabe ähnlich der folgenden
          zu bekommen:</p>
<pre class="screen">
$ svn list -v http://svn.collab.net/repos/svn
  20620 harry            1084 Jul 13  2006 README
  23339 harry                 Feb 04 01:40 branches/
  21282 sally                 Aug 27 09:41 developer-resources/
  23198 harry                 Jan 23 17:17 tags/
  23351 sally                 Feb 05 13:26 trunk/
</pre>
<p>Die Spalten zeigen Ihnen die Revision, in der die Datei
          zuletzt geändert wurde, den Benutzer, der sie änderte, die
          Größe, falls es sich um eine Datei handelt, sowie den Namen
          des Objektes.</p>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Warnung]" src="images/warning.png"></td>
<th align="left">Warnung</th>
</tr>
<tr><td align="left" valign="top"><p>Der Befehl <strong class="userinput"><code>svn list</code></strong> ohne
          Argumente verwendet standardmäßig den
          <span class="emphasis"><em>Repository-URL</em></span> des aktuellen
          Arbeitsverzeichnisses und <span class="emphasis"><em>nicht</em></span> das
          Verzeichnis der lokalen Arbeitskopie. Schließlich können
          Sie, falls Sie eine Auflistung des lokalen Verzeichnisses
          möchten, das einfache <span class="command"><strong>ls</strong></span> (oder irgendein
          vernünftiges nicht-unixartiges Äquivalent) benutzen.</p></td></tr>
</table></div>
</div>
</div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="svn.tour.history.snapshots"></a>2.5.4. Bereitstellung älterer Repository-Schnappschüsse</h3></div></div></div>
<p>Zusätzlich zu den obigen Befehlen können Sie <span class="command"><strong>svn
        update</strong></span> und <span class="command"><strong>svn checkout</strong></span> mit der
        Option <code class="option">--revision</code> verwenden, um eine
        vollständige Arbeitskopie „<span class="quote">zeitlich
        zurückzusetzen</span>“:
        <sup>[<a name="id606772" href="#ftn.id606772" class="footnote">7</a>]</sup>
        </p>
<pre class="screen">
$ svn checkout -r 1729 # Checkt eine neue Arbeitskopie von r1729 aus
…
$ svn update -r 1729 # Aktualisiert eine bestehende Arbeitskopie auf r1729
…
</pre>
<div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Tipp]" src="images/tip.png"></td>
<th align="left">Tipp</th>
</tr>
<tr><td align="left" valign="top"><p>Viele Subversion-Neulinge versuchen das vorangehende
          <span class="command"><strong>svn update</strong></span>-Beispiel zu verwenden, um
          übergebene Änderungen „<span class="quote">rückgängig</span>“ zu machen,
          was allerdings nicht funktioniert, da Sie keine Änderungen
          übergeben können, die Sie durch das zeitliche Zurücksetzen
          einer Arbeitskopie erhalten haben, falls die geänderten
          Dateien neuere Revisionen haben. Siehe <a class="xref" href="svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.resurrect" title="4.3.5. Zurückholen gelöschter Objekte">Abschnitt 4.3.5, „Zurückholen gelöschter Objekte“</a> für eine
          Beschreibung, wie eine Übergabe „<span class="quote">rückgängig</span>“
          gemacht wird.</p></td></tr>
</table></div>
<p>Wenn Sie am Ende ein Release bauen und die Dateien aus
        Subversion zu einem Bündel schnüren möchten, ohne allerdings
        diese verdammten <code class="filename">.svn</code>-Verzeichnisse dabei
        zu haben, können Sie <span class="command"><strong>svn export</strong></span> verwenden,
        um eine lokale Kopie des gesamten oder teilweisen Repositorys
        ohne <code class="filename">.svn</code>-Verzeichnisse zu erhalten. Wie
        bei <span class="command"><strong>svn update</strong></span> und <span class="command"><strong>svn
        checkout</strong></span> können Sie auch hier die Option
        <code class="option">--revision</code> an <span class="command"><strong>svn export</strong></span>
        übergeben:</p>
<pre class="screen">
$ svn export http://svn.example.com/svn/repos1 # Exportiert die letzte Revision
…
$ svn export http://svn.example.com/svn/repos1 -r 1729
# Exportiert Revision r1729
…
</pre>
</div>
<div class="footnotes">
<br><hr width="100" align="left">
<div class="footnote"><p><sup>[<a name="ftn.id606772" href="#id606772" class="para">7</a>] </sup>Sehen Sie? Wir haben Ihnen gesagt, dass Subversion
            eine Zeitmaschine sei.</p></div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="svn.tour.cycle.html">Zurück</a> </td>
<td width="20%" align="center"><a accesskey="u" href="svn.tour.html">Nach oben</a></td>
<td width="40%" align="right"> <a accesskey="n" href="svn.tour.cleanup.html">Weiter</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">2.4. Der grundlegende Arbeitszyklus </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td>
<td width="40%" align="right" valign="top"> 2.6. Manchmal müssen Sie einfach nur aufräumen</td>
</tr>
</table>
</div>
</body>
</html>
