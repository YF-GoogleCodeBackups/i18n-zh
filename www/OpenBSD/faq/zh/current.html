<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>跟踪 -current</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2005-2009 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../../zh/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ 索引]</a>
</font>

<p>

<h1><font color="#e00000">跟踪 <i>-current</i></font></h1>
<hr>

<h3>目录</h3>
<p>
<ul>
<li><a href="#Intro">介绍</a>
<!-- Oldest on top... -->
<li><a href="#20080907">2008/09/07 - ifconfig(8) 的语法修改</a>
<li><a href="#20080913">2008/09/13 - xcompmgr(1) 从 ports 移到了 xbase</a>
<li><a href="#20080929">2008/09/29 - Perl 升级到 5.10.0</a>
<li><a href="#20081003">2008/10/03 - sm-client.st 移动了位置</a>
<li><a href="#20081102">2008/11/02 - Xserver 升级到 1.5.2</a>
<li><a href="#20081103">2008/11/03 - Perl 升级到 5.10.0</a>
<li><a href="#20081105">2008/11/05 - Perl 升级到 5.10.0</a>
<li><a href="#20081106">2008/11/06 - Xserver 升级到 1.5.2</a>
<li><a href="#20081107">2008/11/07 - Perl 升级到 5.10.0</a>
<li><a href="#20081111">2008/11/11 - PIE 支持被增加到 gcc 3.3.5 & csu</a>
<li><a href="#20081116">2008/11/16 - mixerctl(1) 的名称改变</a>
<li><a href="#20081126">2008/11/26 - btd 需要增加新用户和组</a>
<li><a href="#20090204">2009/02/04 - Perl 升级到 5.10.0</a>
<li><a href="#20090215">2009/02/15 - ifconfig(8) 的语法修改</a>
<li><a href="#20090218">2009/02/18 - pfsync(4) 的版本号增加</a>
<!-- 4.5 -->
<li><a href="#20090304">2009/03/04 - smtpd 需要增加新用户和组</a>
<li><a href="#20090316">2009/03/16 - 现在通过 mailwrapper(8) 运行 makemap(8)</a>
<li><a href="#20090324">2009/03/24 - ospfd(8) 和 ripd(8) 的 "redistribute default" 行为改变</a>
<li><a href="#20090406">2009/04/06 - pf(4) 的不兼容修改</a>
<li><a href="#20090407">2009/04/07 - pf(4) 默认执行碎片重组</a>
<li><a href="#20090426">2009/04/26 - pfctl(8) 默认关闭 require-order</a>

<!-- New additions go on the bottom, please -->
</ul>

<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>介绍</h2>
此文档针对跟踪 <i>-current</i> 的用户。
它包含了从 4.5-release 到 <i>-current</i> 的修改信息，不能用于从 4.4
或更早版本的升级，或者想跟踪
<a href="../../stable.html"><i>-stable</i></a> 的用户。

<p>
如果你想从旧版本更新到 4.5-release 或
4.5-stable，参见<a href="../upgrade45.html">升级指南</a>。

<p>
在使用 -current 和执行下述操作之前，请确认已经阅读和理解了
<a href="../faq5.html">FAQ 5 - 从源代码构建系统</a>。

<p>
你始终应该使用快照作为运行 <i>-current</i> 的起点。
不支持从你自己的源代码编译升级。

<p>
如果你想查阅从早期的 OpenBSD 升级的信息，参见
<a href= "../upgrade-old.html">upgrade-old.html</a>。
它作为历史记录提供 -- 不能用做升级指南。

<p>
<a name="20080907"></a>
<h3>2008/09/07 - ifconfig(8) 的语法修改</h3>
某些 <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>
的选项已经修改。要列出支持的媒体类型时应该使用：
<pre>
    <b>ifconfig &lt;interface&gt; media</b>
</pre>
扫描无线网络的选项也改变了，但是被<a href="#20090215">稍后修订</a>。

<p>
<a name="20080913"></a>
<h3>2008/09/13 - xcompmgr(1) 从 ports 移到了 xbase</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=xcompmgr&amp;sektion=1">xcompmgr(1)</a>
已经从 ports 移到了 xbase。如果你已经从 ports 安装了 xcompmgr(1)，请使用 pkg_delete 删除之。

<p>
<a name="20080929"></a>
<h3>2008/09/29 - Perl 升级到 5.10.0</h3>
由于 Perl 发行版的改变，你需要在构建之前，手工删除旧的 perl obj 目录。例如：
<pre>
    # rm -rf /usr/obj/gnu/usr.bin/perl
</pre>
然后重新创建 obj 目录:
<pre>
    # cd /usr/src/gnu/usr.bin/perl
    # make -f Makefile.bsd-wrapper obj
</pre>
由于这是 Perl 的关键更新，你需要重新构建/安装全部 Perl XS 模块。
这些模块包含加载到 perl 进程中的共享对象。查看通过 package
子系统安装的 XS 模块列表的方法是：
<pre>
    # cd /var/db/pkg
    # fgrep .so p5-*/+CONTENTS | sed 's/+CONTENTS.*//' | sort -u
</pre>
使用“pkg_add -ui”升级到最新的 package 快照会处理这些升级。
在你升级完成后，你需要删除几个被 Perl 基本包提供的模块：

<pre>
    # pkg_delete p5-Archive-Tar p5-Compress-Raw-Zlib p5-Compress-Zlib \
      p5-IO-Compress-Base p5-IO-Compress-Zlib p5-IO-Zlib p5-Module-Build \
      p5-Module-CoreList p5-Module-Load p5-version p5-Digest-SHA
</pre>

<p>
<a name="20081003"></a>
<h3>2008/10/03 - sm-client.st 移动了位置</h3>
(可选的) sendmail 递送状态文件已经从
<tt>/var/spool/clientmqueue/sm-client.st</tt> 移动到
<tt>/var/log/sm-client.st</tt>，从而与 <tt>/var/log/sendmail.st</tt>
文件的位置一致。

<p>
<a name="20081102"></a>
<h3>2008/11/02 - Xserver 升级到 1.5.2</h3>
<tt>RgbPath</tt> 在 <b>Files</b> 节，配置文件 <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=xorg.conf">xorg.conf(5)</a>
中不再是合法的关键字。请删除相应的配置项。它已经在几个发行版本中被忽略了。
<p>
intel 芯片组的 <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=i810">i810(4)</a>
驱动已经彻底被
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=intel">intel(4)</a>
驱动取代。因此应该更新配置文件 <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=xorg.conf">xorg.conf(5)</a> 。

<p>
<a name="20081103"></a>
<h3>2008/11/03 - Perl 升级到 5.10.0</h3>
发现了另一个被 Perl 基本包提供的模块 - 请删除它。
<pre>
    # pkg_delete p5-Locale-Maketext-Simple
</pre>

<p>
<a name="20081105"></a>
<h3>2008/11/05 - Perl 升级到 5.10.0</h3>
有几个被 Perl 基本包提供的模块需要删除。
<pre>
    # pkg_delete p5-Pod-Escapes p5-Pod-Simple
</pre>

<p>
<a name="20081106"></a>
<h3>2008/11/06 - Xserver updated to 1.5.2</h3>
淘汰了几个 xserver 模块和驱动。为了确保 <tt>X -configure</tt>
不再试图加载这些过时的模块，推荐在安装新快照之前删除
<tt>/usr/X11R6/lib/modules</tt> 中的内容。

<p>
<a name="20081107"></a>
<h3>2008/11/07 - update to Perl 5.10.0</h3>
More modules moved to base, as above.
更多移到 Perl 基本包的模块需要删除。
<pre>
    # pkg_delete p5-ExtUtils-ParseXS p5-ExtUtils-CBuilder \
      p5-Module-Pluggable p5-Time-Piece
</pre>

<p>
<a name="20081111"></a>
<h3>2008/11/11 - PIE 支持被增加到 gcc 3.3.5 & csu</h3>
位置中立执行(PIE) 支持被增加到 gcc 3.3.5 & csu。使用下述步骤升级：
<ul>
<li>构建和安装 gcc:
<pre>
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
     # make -f Makefile.bsd-wrapper clean
</pre>
<li><a href="faq5.html#BldUserland">构建和安装 userland</a>
</ul>

<p>
<a name="20081116"></a>
<h3>2008/11/16 - mixerctl(1) 的名称改变</h3>
混频器的变量名称 <tt>headphones</tt> 被缩短为 <tt>hp</tt>，<tt>speaker</tt>
被缩短为 <tt>spkr</tt>。它导致 mixerctl.conf(5) 可能需要修改。

<p>
<a name="20081126"></a>
<h3>2008/11/26 - btd 需要增加新用户和组</h3>
新增加的蓝牙后台程序 <tt>btd</tt> 放弃特权后，使用新用户和组 _btd。
以 <i>root</i> 身份，使用
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>
增加新用户和组:
<blockquote><pre>
# useradd -u94 -g=uid -c"Bluetooth Daemon" -d/var/empty -s/sbin/nologin _btd</b>
</pre></blockquote>

<p>
<a name="20090204"></a>
<h3>2009/02/04 - Perl 升级到 5.10.0</h3>
新模块移到基本包 - 请删除它。
<pre>
    # pkg_delete p5-Module-Loaded
</pre>

<p>
<a name="20090215"></a>
<h3>2009/02/15 - ifconfig(8) 的语法修改</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig&amp;sektion=8">ifconfig(8)</a>
扫描无线网络的选项已经修改。现在应该使用：
<pre>
    <b>ifconfig &lt;interface&gt; scan</b>
</pre>

<p>
<a name="20090218"></a>
<h3>2009/02/18 - pfsync(4) 的版本号增加</h3>
由于 pfsync(4) 接口的协议和实现的修改，pfsync(4) 协议的版本号已经增加。
不同版本的防火墙将不能同步状态表，在出现故障时，现有的连接会被终止。

<!-- cut-off point for 4.5 -->

<p>
<a name="20090304"></a>
<h3>2009/03/04 - smtpd 需要增加新用户和组</h3>
需要执行下述命令:
<pre>
useradd -u 95 -g =uid -c "SMTP Daemon" -d /var/empty -s /sbin/nologin _smtpd
</pre>

<p>
<a name="20090316"></a>
<h3>2009/03/16 - 现在通过 mailwrapper(8) 运行 makemap(8)</h3>
由于 smtpd(8) 加入构建，所以现在通过 mailwrapper(8) 运行 makemap(8)，以避免其
sendmail 和 smtpd 版本的二进制冲突。所以，用户需要手工增加下行到
/etc/mailer.conf:
<pre>
makemap		/usr/libexec/sendmail/makemap
</pre>

<p>
<a name="20090324"></a>
<h3>2009/03/24 - ospfd(8) 和 ripd(8) 的 "redistribute default" 行为改变</h3>
"redistribute default" 在 ospfd.conf(5) 和 ripd.conf(5)
的配置文件中设置，现在需要出现在内河路由表的默认路由中，否则
ospfd(8) 和 ripd(8) 不会广播路由。

<p>
<a name="20090406"></a>
<h3>2009/04/06 - pf(4) 的不兼容修改</h3>
包的标准化("擦洗")已经集成到主规则集中。现在可以增加参数
"scrub" 到规则中。例如:

<pre>
        scrub in all no-df max-mss 1440
</pre>

可以被在规则中使用新的 "match" 动作替换:

<pre>
        match in all scrub (no-df max-mss 1440)
</pre>

由于默认强制规则集排序，它或者必须放到主规则集(在
"pass quick" 规则之前)，或者禁止检查规则集顺序:

<pre>
        set require-order no
</pre>

包重组已经简化。删除了 "Crop" 和 "drop-ovl"；只剩余全部重组。可以这样打开:

<pre>
        set reassemble yes|no [no-df]
</pre>

如果指定了 "no-df"，设置了 df 位的碎片(只有碎片!)在进入碎片缓存之前会被清除
df 位，从而重组后的包没有设置 df 位。"no-df" 不影响非碎片包。

<p>
<a name="20090407"></a>
<h3>2009/04/07 - pf(4) 默认执行碎片重组</h3>
由于没有什么理由不使用碎片重组，所以
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&sektion=4">pf(4)</a>
改为默认启用碎片重组。

<p>
<a name="20090426"></a>
<h3>2009/04/26 - pfctl(8) 默认关闭 require-order</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pfctl&sektion=8">pfctl(8)</a>
改为默认禁用 "set require-order"。它只是建议，不需要修改配置。

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>$OpenBSD: current.html,v 1.149 2009/04/26 12:34:55 sthen Exp $</small>

</body>
</html>
<!--
Originally [OpenBSD: current.html,v 1.149]<br>
$Translation: current.html,v 1.21 2009/04/29 05:48:04 dongsheng Exp $<br>
-->
