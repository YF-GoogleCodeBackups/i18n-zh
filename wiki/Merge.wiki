#summary 如何合并 PO 文件？

= 简介 =
 对于很大的 PO 文件，经常需要协作翻译。于是，在翻译完成后，大家需要合并翻译。
 建议大家使用标准格式，格式化方法参见 [Newbie]，[Flow] 等页面。

= 方法 =
== 大家使用同一 pot 文件，同一翻译格式 ==
 这是通常情况，翻译和提交流程如下：
  # 开始翻译
  # 复审翻译
  # 更新到最新版本的 PO 文件
  # 如果产生合并冲突，说明有翻译同样条目的情况出现。用文本编辑器打开 PO 文件，手工解决冲突，然后回到步骤2
  # 如果提交失败，报告服务器上有新版本，那么回到步骤3

== 大家使用同一 pot 文件，不同翻译格式 ==
 这种情况应该禁止，大家要采用一致的翻译格式。
 合并方法很简单，假设有 foo.pot，zh_CN-A.po，zh_CN-B.po 三个文件，合并方法如下：
  # python po-merge.py<zh_CN-A.po zh_CN-B.po
  # msgmerge --no-wrap -o zh_CN-new.po zh_CN-B.po foo.pot
  # mv -f zh_CN-new.po zh_CN.po

 产生的结果是文件 zh_CN.po，它以 A 的翻译为准，如果 A 和 B 翻译了相同的条目，那么采用 A 的翻译。如果要以 B 的翻译为准，将命令中的 A 和 B 互换即可。最后两个命令是格式化合并结果的。

 其中 po-merge.py 位于 trunk/lib/tools，它是从官方 Subversion 版本库复制而来，即 trunk/tools/dev/po-merge.py。

== 大家使用不同 pot 文件，不同翻译格式 ==
 这种情况应该禁止，大家要采用一致的翻译格式，优先翻译高版本，然后从高版本移植到低版本，最后翻译低版本剩余的部分。

 合并方法稍微复杂，如果两个 pot 文件是两个版本分支，那么要对于每个 pot 文件，执行*大家使用同一 pot 文件，不同翻译格式*。否则，直接对最新的 pot 文件，执行*大家使用同一 pot 文件，不同翻译格式*即可。
